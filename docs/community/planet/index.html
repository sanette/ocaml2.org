<!DOCTYPE HTML>


<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta charset="utf-8"/>
    
    <link href="." rel="alternate" hreflang="en"/>

    
    <title>OCaml Planet &#8211; OCaml</title>
    <link href="../../img/favicon32x32.ico?" rel="shortcut icon" type="image/x-icon"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <link href="//fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet"/>
    <link href="//fonts.googleapis.com/css?family=Domine:400,700" rel="stylesheet"/>
    <link href="//fonts.googleapis.com/css?family=Droid+Sans+Mono" rel="stylesheet" type="text/css"/>
    
    <link href="../../css/bootstrap.css" rel="stylesheet" media="screen"/>
    <link href="../../css/bootstrap_mod.css" rel="stylesheet" media="screen"/>
    <link href="../../css/ocamlorg.css" rel="stylesheet" media="screen"/>
    
    
    <script src="../../js/collapsed-menu.js" type="text/javascript"></script>
    
    <link href="../../feed.xml" rel="alternate" type="application/atom+xml" title="Atom feed"/>
    
    <script>
      if (document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image', '1.1')) {
      document.documentElement.className = 'svg';
      }
    </script>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" onclick="toggleVisibilityMenu('menu-items')">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="../../" class="brand"><img src="../../img/colour-logo-white.svg" class="svg" alt="OCaml"/><img src="../../img/colour-logo-white.png" class="png" alt="OCaml"/></a>
          <div id="menu-items" class="nav-collapse collapse">
                        <ul class="nav">
              <li><a href="../../learn/">Learn</a></li>
              <li><a href="../../docs/">Documentation</a></li>
              <li><a href="https://opam.ocaml.org/">Packages</a></li>
              <li><a href="../../community/">Community</a></li>
              <li class="active"><a href="../../community/planet/">News</a></li>
            </ul>

            
            <a href="https://github.com/ocaml/ocaml.org/tree/master/site/community/planet/index.md" title="Edit this page" class="edit-this-page pull-right"><span>Edit this page</span></a>
	    <script language="JavaScript">
	      // Preload the hover image
	      Image1= new Image(33,33);
	      Image1.src = '/img/edit-hover.svg';
	      Image2= new Image(33,33);
	      Image2.src = '/img/edit-hover.png';
	    </script>
            
            <form id="searchform" class="navbar-search pull-right" method="get" action="//www.google.com/search">
              <input type="hidden" name="as_sitesearch" value="ocaml.org"/>
              <input placeholder="Search" class="search-query" name="q" type="text"/>
            </form>
          </div>
        </div>
      </div>
      
    </nav>
    
    
<div class="container">
  <div class="row">
    
    
    
    
    <div id="content-primary" class="span12">
            <div id="tryocaml" class="content" style="display:none;">
        <div class="container">
          <div class="row">
            <div id="lesson-message"></div>
            <div id="languages" style="display:none;"></div>
            <div id="menu-lessons" style="display:none">
              <table class="zebra-striped">
                <tr><td id="text-x"><code></code></td> <td></td></tr>
              </table>
            </div>
            <div class="span9 ocaml">
              <div id="toplevel-container">
                <pre id="output"></pre>
                <div id="sharp">#</div>
                <div id="toplevel"></div>
              </div>
              <div id="buttons"></div>
              <div id="graphics-title"></div>
              <div id="graphics"></div>
            </div>
          </div>
        </div>
      </div>

      
<div class="running-header">
  
  <div class="row">
    <ol class="breadcrumb">
      <li><a href="../../">Home</a><span class="divider"></span></li>
<li><a href="../../community/">Community</a><span class="divider"></span></li>
<li class="active">OCaml Planet</li>


    </ol>
    <ul class="translations">
      <li class="active">en</li>

    </ul>
  </div>
  
</div>

      <div id="main-contents" class="content">
        


<h1 id="OCaml-Planet">OCaml Planet</h1>

<p>The OCaml Planet aggregates various blogs
from the OCaml community. If you would like to be added, read the
<a href="syndication.html">Planet syndication HOWTO</a>.</p>
<div class="container">
<div class="row">
<section class="span8 planet">

1134 blog posts are available.
You can read the 30 more recent ones below
or view <a href="older.html">older ones</a>.

<script type="text/javascript">function switchContent(id1,id2) {
     // Get the DOM reference
     var contentId1 = document.getElementById(id1);
     var contentId2 = document.getElementById(id2);
     // Toggle
     contentId1.style.display = "none";
     contentId2.style.display = "block";
     }
</script><div>
<a name="85b23059accf8368eb826e4dc01e980a"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://www.ocamlpro.com/2020/03/23/ocaml-new-best-fit-garbage-collector/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.ocamlpro.com%2F2020%2F03%2F23%2Focaml-new-best-fit-garbage-collector%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2385b23059accf8368eb826e4dc01e980a&amp;t=An+in-depth+Look+at+OCaml%E2%80%99s+new+%E2%80%9CBest-fit%E2%80%9D+Garbage+Collector+Strategy" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2385b23059accf8368eb826e4dc01e980a&text=An+in-depth+Look+at+OCaml%E2%80%99s+new+%E2%80%9CBest-fit%E2%80%9D+Garbage+Collector+Strategy" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://www.ocamlpro.com/feed/" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://www.ocamlpro.com/2020/03/23/ocaml-new-best-fit-garbage-collector/" target="_blank" title="Go to the original post">An in-depth Look at OCaml’s new “Best-fit” Garbage Collector Strategy</a><span class="additional-info"> — OCamlPro, Mar 23, 2020</span></h1><div class="planet-post"><div id="ocamlorg-post1"><p><img src="http://www.ocamlpro.com/wp-content/uploads/2025/03/Ocaml-search-300x300.png" class=" wp-image-2613 alignleft" alt="" width="150" height="150"/>The Garbage Collector probably is OCaml&#8217;s greatest unsung hero. Its pragmatic approach allows us to allocate without much fear of efficiency loss. In a way, the fact that most OCaml hackers know little about it is a good sign: you want a runtime to gracefully do its job without having to mind it all the time.</p>
<p>But as OCaml 4.10.0 has now hit the shelves, a very exciting feature is <a href="https://ocaml.org/releases/4.10.0.html#Changes">in the changelog</a>:</p>
<pre><span style="font-size: 10pt;">- #8809, #9292: Add a best-fit allocator for the major heap; still
experimental, it should be…</span></pre><a href="#85b23059accf8368eb826e4dc01e980a" onclick="switchContent('ocamlorg-post1','ocamlorg-post2')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post2" style="display: none"><p><img src="http://www.ocamlpro.com/wp-content/uploads/2025/03/Ocaml-search-300x300.png" class=" wp-image-2613 alignleft" alt="" width="150" height="150"/>The Garbage Collector probably is OCaml&#8217;s greatest unsung hero. Its pragmatic approach allows us to allocate without much fear of efficiency loss. In a way, the fact that most OCaml hackers know little about it is a good sign: you want a runtime to gracefully do its job without having to mind it all the time.</p>
<p>But as OCaml 4.10.0 has now hit the shelves, a very exciting feature is <a href="https://ocaml.org/releases/4.10.0.html#Changes">in the changelog</a>:</p>
<pre><span style="font-size: 10pt;">- #8809, #9292: Add a best-fit allocator for the major heap; still
experimental, it should be much better than current allocation
policies (first-fit and next-fit) for programs with large heaps,
reducing both GC cost and memory usage.
This new best-fit is not (yet) the default; set it explicitly with
OCAMLRUNPARAM="a=2" (or Gc.set from the program). You may also want
to increase the `space_overhead` parameter of the GC (a percentage,
80 by default), for example OCAMLRUNPARAM="o=85", for optimal
speed.
(Damien Doligez, review by Stephen Dolan, Jacques-Henri Jourdan,
Xavier Leroy, Leo White)</span></pre>
<p>At OCamlPro, some of the tools that we develop, such as the package manager <a href="https://opam.ocaml.org/">Opam</a>, the <a href="https://alt-ergo.ocamlpro.com/">Alt-Ergo</a> SMT solver or the Flambda optimizer, can be quite demanding in memory usage, so we were curious to better understand the properties of this new allocator.</p>
<h2>Minor heap and Major heap: the GC in a nutshell</h2>
<p>Not all values are allocated equal. Some will only be useful for the span of local calculations, some will last as long as the program lives. To handle those two kinds of values, the runtime uses a <em>Generational Garbage Collector</em> with two spaces:</p>
<ul>
<li>The minor heap uses the <a href="https://en.wikipedia.org/wiki/Tracing_garbage_collection#Copying_vs._mark-and-sweep_vs._mark-and-don.27t-sweep">Stop-and-copy</a> principle. It is fast but has to stop the computation to perform a full iteration.</li>
<li>The major heap uses the <a href="https://en.wikipedia.org/wiki/Tracing_garbage_collection#Na%C3%AFve_mark-and-sweep">Mark-and-sweep</a> principle. It has the perk of being incremental and behaves better for long-lived data.</li>
</ul>
<p>Allocation in the minor heap is straightforward and efficient: values are stored sequentially, and when there is no space anymore, space is emptied, surviving values get allocated in the major heap while dead values are just forgotten for free. However, the major heap is a bit more tricky, since we will have random allocations and deallocations that will eventually produce a scattered memory. This is called <a href="https://en.wikipedia.org/wiki/Fragmentation_(computing)">fragmentation</a>, and this means that you&#8217;re using more memory than necessary. Thankfully, the GC has two strategies to counter that problem:</p>
<ul>
<li>Compaction: a heavyweight reallocation of everything that will remove those holes in our heap. OCaml&#8217;s compactor is cleverly written to work in constant space, and would be worth its own specific article!</li>
<li>Free-list Allocation: allocating the newly coming data in the holes (the free-list) in memory, de-scattering it in the process.</li>
</ul>
<p>Of course, asking the GC to be smarter about how it allocates data makes the GC slower. Coding a good GC is a subtle art: you need to have something smart enough to avoid fragmentation but simple enough to run as fast as possible.</p>
<h2>Where and how to allocate: the 3 strategies</h2>
<p>OCaml used to propose 2 free-list allocation strategies: <em>next-fit</em>, the default, and <em>first-fit</em>. Version 4.10 of OCaml introduces the new <em>best-fit</em> strategy. Let&#8217;s compare them:</p>
<h3>Next-fit, the original and remaining champion</h3>
<p>OCaml&#8217;s original (and default) &#8220;next-fit&#8221; allocating strategy is pretty simple:</p>
<ol>
<li>Keep a (circular) list of every hole in memory ordered by increasing addresses;</li>
<li>Have a pointer on an element of that list;</li>
<li>When an allocation is needed, if the currently pointed-at hole is big enough, allocate in it;</li>
<li>Otherwise, try the next hole and so-on.</li>
</ol>
<p>This strategy is extremely efficient, but a big hole might be fragmented with very small data while small holes stay unused. In some cases, the GC would trigger costly compactions that would have been avoidable.</p>
<h3>First-fit, the unsuccessful contender</h3>
<p>To counteract that problem, the &#8220;first-fit&#8221; strategy was implemented in 2008 (OCaml 3.11.0):</p>
<ul>
<li>Same idea as next-fit, but with an extra allocation table.</li>
<li>Put the pointer back at the beginning of the list for each allocation.</li>
<li>Use the allocation table to skip some parts of the list.</li>
</ul>
<p>Unfortunately, that strategy is slower than the previous one. This is an example of making the GC smarter ends up making it slower. It does, however, reduce fragmentation. It was still useful to have this strategy at hand for the case where compaction would be too costly (on a 100Gb heap, for instance). An application that requires low latency might want to disable compaction and use that strategy.</p>
<h3>Best-fit: a new challenger enters!</h3>
<p>This leads us to the brand new &#8220;best-fit&#8221; strategy. This strategy is actually composite and will have different behaviors depending on the size of the data you&#8217;re trying to allocate.</p>
<ul>
<li>On small data (up to 32 words), <a href="https://github.com/ocaml/ocaml/blob/trunk/runtime/freelist.c#L868">segregated free lists</a> will allow allocation in (mostly) constant time.</li>
<li>On big data, a general best-fit allocator based on <a href="https://en.wikipedia.org/wiki/Splay_tree">splay trees</a>.</li>
</ul>
<p>This allows for the best of the two worlds, as you can easily allocate your numerous small blocks in the small holes in your memory while you take a bit more time to select a good place for your big arrays.</p>
<p>How will best-fit fare? Let&#8217;s find out!</p>
<h2>Try it!</h2>
<p>First, let us remind you that this is still an experimental feature, which from the OCaml development team means &#8220;We&#8217;ve tested it thoroughly on different systems, but only for months and not on a scale as large as the whole OCaml ecosystem&#8221;.</p>
<p>That being said, we&#8217;d advise you don&#8217;t use it in production code yet.</p>
<h3>Why you should try it</h3>
<p>Making benchmarks of this new strategy could be beneficial for you and the language at large: the dev team is hoping for feedback, the more quality feedback <strong>you</strong> give means the more the future GC will be tuned for your needs.</p>
<p>In 2008, the first-fit strategy was released with the hope of improving memory usage by reducing fragmentation. However, the lack of feedback meant that the developers were not aware that it didn&#8217;t meet the users&#8217; needs. If more feedback had been given, it&#8217;s possible that work on improving the strategy or on better strategies would have happened sooner.</p>
<h3>Choosing the allocator strategy</h3>
<p>Now, there are two ways to control the GC behavior: through the code or through environment variables.</p>
<h4>First method: Adding instructions in your code</h4>
<p>This method should be used by those of us who have code that already does some GC fine-tuning. As early as possible in your program, you want to execute the following lines:</p>
<pre>let () =
Gc.(set
  { (get()) with
    allocation_policy = 2; (* Use the best-fit strategy *)
    space_overhead = 100; (* Let the major GC work a bit less since it's more efficient *)
  })</pre>
<p>You might also want to add <code>verbose = 0x400;</code> or <code>verbose = 0x404;</code> in order to get some GC debug information. See <a href="https://caml.inria.fr/pub/docs/manual-ocaml/libref/Gc.html">here</a> for more details on how to use the <code>GC </code>module.</p>
<p>Of course, you&#8217;ll need to recompile your code, and this will apply only after the runtime has initialized itself, triggering a compaction in the process. Also, since you might want to easily switch between different allocation policies and overhead specifications, we suggest you use the second method.</p>
<h4>Second method: setting <code>$OCAMLRUNPARAM</code></h4>
<p>At OCamlPro, we develop and maintain a program that any OCaml developer should want to run smoothly. It&#8217;s called <a href="https://opam.ocaml.org/">Opam</a>, maybe you&#8217;ve heard of it? Though most commands take a few seconds, some <a href="https://opam.ocaml.org/doc/man/opam-admin-check.html">administrative-heavy</a> commands can be a strain on our computer. In other words: those are perfect for a benchmark.</p>
<p>Here&#8217;s what we did to benchmark Opam:</p>
<pre>$ opam update
$ opam switch create 4.10.0
$ opam install opam-devel # or build your own code
$ export OCAMLRUNPARAM='b=1,a=2,o=100,v=0x404'
$ cd my/local/opam-repository
$ perf stat ~/.opam/4.10.0/lib/opam-devel/opam admin check --installability # requires right to execute perf, time can do the trick
</pre>
<p>If you want to compile and run your own benchmarks, here are a few details on <code>OCAMLRUNPARAM</code>:<code></code></p>
<ul>
<li><code>b=1</code> means &#8220;print the backtrace in case of uncaught exception&#8221;</li>
<li><code>a=2</code> means &#8220;use best-fit&#8221; (default is <code>0</code>, first-fit is <code>1</code>)</li>
<li><code>o=100</code> means &#8220;do less work&#8221; (default is <code>80</code>, lower means more work)</li>
<li><code>v=0x404</code> means &#8220;have the gc be verbose&#8221; (<code>0x400</code> is &#8220;print statistics at exit&#8221;, 0x4 is &#8220;print when changing heap size&#8221;)</li>
</ul>
<p>See the <a href="https://caml.inria.fr/pub/docs/manual-ocaml/runtime.html#s:ocamlrun-options">manual</a> for more details on <code>OCAMLRUNPARAM</code></p>
<p>You might want to compare how your code fares on all three different GC strategies (and fiddle a bit with the overhead to find your best configuration).</p>
<h2>Our results on opam</h2>
<p>Our contribution in this article is to benchmark <code>opam</code> with the different allocation strategies:</p>
<table style="height: 165px; width: 800px; border-style: solid; border-color: #000020;" border="1" cellspacing="0">
<thead>
<tr style="border-style: solid; border-color: #000000;">
<td style="width: 193.867px; background-color: #2392ba; height: 33px; border-style: solid; border-color: #000000; text-align: center;">Strategy:</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">Next-fit</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">First-fit</td>
<td style="width: 357.667px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" colspan="3" scope="colgroup">Best-fit</td>
</tr>
<tr style="border-style: solid; border-color: #000000;">
<td style="width: 193.867px; background-color: #2392ba; height: 33px; border-style: solid; border-color: #000000; text-align: center;">Overhead:</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">80</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">80</td>
<td style="width: 117.05px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">80</td>
<td style="width: 117.05px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">100</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">120</td>
</tr>
<tr style="border-style: solid; border-color: #000000;">
<td style="width: 193.867px; background-color: #2392ba; height: 33px; border-style: solid; border-color: #000000; text-align: center;">Cycles used (Gcycle)</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">2,040</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">3,808</td>
<td style="width: 117.05px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">3,372</td>
<td style="width: 117.05px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">2,851</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">2,428</td>
</tr>
<tr style="border-style: solid; border-color: #000000;">
<td style="width: 193.867px; background-color: #2392ba; height: 33px; border-style: solid; border-color: #000000; text-align: center;">Maximum heap size (kb)</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">793,148</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">793,148</td>
<td style="width: 117.05px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">689,692</td>
<td style="width: 117.05px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">689,692</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">793,148</td>
</tr>
<tr style="border-style: solid; border-color: #000000;">
<td style="width: 193.867px; background-color: #2392ba; height: 33px; border-style: solid; border-color: #000000; text-align: center;">User time (s)</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">674</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">1,350</td>
<td style="width: 117.05px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">1,217</td>
<td style="width: 117.05px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">1,016</td>
<td style="width: 116.9px; height: 33px; border-style: solid; border-color: #000000; text-align: center;" scope="colgroup">791</td>
</tr>
</thead>
</table>
<p>A quick word on these results. Most of <code>opam</code>&#8216;s calculations are done by <code><a href="http://www.mancoosi.org/software/">dose</a></code> and rely heavily on small interconnected blocks. We don&#8217;t really have big chunks of data we want to allocate, so the strategy won&#8217;t give us the bonus you might have as it perfectly falls into the best-case scenario of the next-fit strategy. As a matter of fact, for every strategy, we didn&#8217;t have a single GC compaction happen. However, Best-fit still allows for a lower memory footprint!</p>
<h2>Conclusions</h2>
<p>If your software is highly reliant on memory usage, you should definitely try the new Best-fit strategy and stay tuned on its future development. If your software requires good performance, knowing if your performances are better with Best-fit (and giving feedback on those) might help you in the long run.</p>
<p>The different strategies are:</p>
<ul>
<li>Next-fit: generally good and fast, but has very bad worst cases with big heaps.</li>
<li>First fit: mainly useful for very big heaps that must avoid compaction as much as possible.</li>
<li>Best-fit: almost the best of both worlds, with a small performance hit for programs that fit well with next-fit.</li>
</ul>
<p>Remember that whatever works best for you, it&#8217;s still better than having to <code>malloc</code> and <code>free</code> by hand. Happy allocating!</p>
<blockquote><p>About OCamlPro</p>
<p>OCamlPro is a R&amp;D lab founded in 2011, with the mission to help industrial users harness the OCaml state-of-the art programming language.</p>
<p>We design, create and implement custom ad-hoc software for our clients in state-of-the-art languages (OCaml, Rust&#8230;). We also have a long experience in developing and maintaining open-source tooling for OCaml, such as Opam and ocp-indent, and we contribute to the core-development of OCaml, notably with our work on the Flambda optimizer branch. Another area of expertise is that of Formal Methods, with tools such as our SMT Solver Alt-Ergo (check our <a href="https://alt-ergo.ocamlpro.com/#club">Alt-Ergo Users&#8217; Club</a>). We also provide vocational trainings in OCaml and Rust, and we can build courses on formal methods on-demand. Do not hesitate reach out by email: <a href="mailto:contact@ocamlpro.com">contact@ocamlpro.com</a>.</p></blockquote>
<a href="#85b23059accf8368eb826e4dc01e980a" onclick="switchContent('ocamlorg-post2','ocamlorg-post1')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="22c4099ad510016ab3edd54e4b725bd6"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://psellos.com/2020/03/2020.03.how-i-wrote-elastic-man.html" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fpsellos.com%2F2020%2F03%2F2020.03.how-i-wrote-elastic-man.html" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2322c4099ad510016ab3edd54e4b725bd6&amp;t=Sliding+Tile+Puzzle%2C+Self-Contained+OCaml+Webapp" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2322c4099ad510016ab3edd54e4b725bd6&text=Sliding+Tile+Puzzle%2C+Self-Contained+OCaml+Webapp" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://psellos.com/atom.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://psellos.com/2020/03/2020.03.how-i-wrote-elastic-man.html" target="_blank" title="Go to the original post">Sliding Tile Puzzle, Self-Contained OCaml Webapp</a><span class="additional-info"> — Psellos, Mar 21, 2020</span></h1><div class="planet-post"><div id="ocamlorg-post3"><div class="date">March 21, 2020</div>

<p>I just finished coding up another webapp in OCaml. I thought it would be
cool to publish the sources of a small, completely self-contained app.
It&#8217;s a sliding tile puzzle coded entirely in OCaml, using a few of the
BuckleScript extensions. There are no dependencies on any frameworks or
the like aside from the Js modules of BuckleScript. The app itself
consists of just one JavaScript file&#8212;no images, nothing else.</p>

<table class="morelikealist" style="margin-top: 0.4em;">
<tr><td>
<a href="http://psellos.com/ocaml/example-app-slide24.html">
<img src="http://psellos.com/images/slide242-220.png"/><br/>
</a>
</td></tr>
</table>

<p>You can try out the puzzle or get the sources a…</p><a href="#22c4099ad510016ab3edd54e4b725bd6" onclick="switchContent('ocamlorg-post3','ocamlorg-post4')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post4" style="display: none"><div class="date">March 21, 2020</div>

<p>I just finished coding up another webapp in OCaml. I thought it would be
cool to publish the sources of a small, completely self-contained app.
It&#8217;s a sliding tile puzzle coded entirely in OCaml, using a few of the
BuckleScript extensions. There are no dependencies on any frameworks or
the like aside from the Js modules of BuckleScript. The app itself
consists of just one JavaScript file&#8212;no images, nothing else.</p>

<table class="morelikealist" style="margin-top: 0.4em;">
<tr><td>
<a href="http://psellos.com/ocaml/example-app-slide24.html">
<img src="http://psellos.com/images/slide242-220.png"/><br/>
</a>
</td></tr>
</table>

<p>You can try out the puzzle or get the sources at the
<a href="http://psellos.com/ocaml/example-app-slide24.html">Slide24</a> page.</p>

<p>I also tried to make a clean DOM interface based on experience with the
Cassino and Schnapsen apps. I think it came out well, at least for these
self-contained webapps.</p>

<p>The idea for the DOM interface is that it should expose only abstract
types, but that there should be a subtype relation based on the
JavaScript DOM. It turns out that you can do this pretty easily using
<code>private</code> declarations. Types for contents of a document look like this:</p>

<pre><code>type node
type text = private node
type element = private node
type canvas = private element
type box = private element
type div = private box
type span = private box
type button = private box</code></pre>

<p>So, the interface reveals nothing whatsoever about the types except that
they participate in a subtype relation. <code>text</code> and <code>element</code> are
subtypes of <code>node</code>, <code>canvas</code> is a subtype of <code>element</code>, and so on.
<code>node</code> is the supertype of all the document content types.</p>

<p>What this means is that you can pass a canvas or a button to a function
that expects an element, and so on. I don&#8217;t find the necessity to use
explicit supertype coercion to be too much trouble when working with
non-parameterized types.</p>

<pre><code>let style = Pseldom.(element_style (mybutton :&gt; element)) in
. . .</code></pre>

<p>It seems to me this captures pretty much everything that I want from the
object-oriented approach without the usual complicated baggage. I think
inheritance is more often a hindrance than a help. It&#8217;s too dependent on
implementation details, and is associated with too many informal
(unenforceable) descriptions of how to write subclasses of each class
without messing up the semantics.</p>

<p>I&#8217;ve never used <code>private</code> declarations before, but they seem to have
created exactly the structure I was hoping for.</p>

<p>Posted by: <a href="http://psellos.com/aboutus.html#jeffreya.scofieldphd">Jeffrey</a></p>

<p></p>
<a href="#22c4099ad510016ab3edd54e4b725bd6" onclick="switchContent('ocamlorg-post4','ocamlorg-post3')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="82ac342a968b1423637daacd34991ffa"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://www.ocamlpro.com/2020/03/16/new-version-of-try-ocaml-in-beta/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.ocamlpro.com%2F2020%2F03%2F16%2Fnew-version-of-try-ocaml-in-beta%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2382ac342a968b1423637daacd34991ffa&amp;t=New+version+of+Try+OCaml+in+beta!" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2382ac342a968b1423637daacd34991ffa&text=New+version+of+Try+OCaml+in+beta!" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://www.ocamlpro.com/feed/" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://www.ocamlpro.com/2020/03/16/new-version-of-try-ocaml-in-beta/" target="_blank" title="Go to the original post">New version of Try OCaml in beta!</a><span class="additional-info"> — OCamlPro, Mar 16, 2020</span></h1><div class="planet-post"><div id="ocamlorg-post5"><p>We are happy to announce that our venerable &#8220;Try Ocaml&#8221; service is being retired and replaced by a new, modern version based upon our work on <a href="https://github.com/ocaml-sf/learn-ocaml" target="_blank" rel="noopener noreferrer">Learn-OCaml</a>.</p>
<p>→ <a href="https://try.ocamlpro.com" target="_blank" rel="noopener noreferrer">Try it here</a> ←</p>
<p>The new interface provides an editor panel besides the familiar top-level, error and warning positions highlighting, the latest OCaml release (4.10.0), local storage of your session, and more.</p>
<p>The service is still in beta, so it would be helpful if you could tell us about any hiccups you may encounter <a href="https://discuss.ocaml.org/t/ann-try-ocaml-2-0-beta">on the Dis…</a></p><a href="#82ac342a968b1423637daacd34991ffa" onclick="switchContent('ocamlorg-post5','ocamlorg-post6')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post6" style="display: none"><p>We are happy to announce that our venerable &#8220;Try Ocaml&#8221; service is being retired and replaced by a new, modern version based upon our work on <a href="https://github.com/ocaml-sf/learn-ocaml" target="_blank" rel="noopener noreferrer">Learn-OCaml</a>.</p>
<p>→ <a href="https://try.ocamlpro.com" target="_blank" rel="noopener noreferrer">Try it here</a> ←</p>
<p>The new interface provides an editor panel besides the familiar top-level, error and warning positions highlighting, the latest OCaml release (4.10.0), local storage of your session, and more.</p>
<p>The service is still in beta, so it would be helpful if you could tell us about any hiccups you may encounter <a href="https://discuss.ocaml.org/t/ann-try-ocaml-2-0-beta">on the Discuss thread</a>.</p>
<a href="#82ac342a968b1423637daacd34991ffa" onclick="switchContent('ocamlorg-post6','ocamlorg-post5')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="048e2d3bdd9dbd2054828876e6406c6e"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://frama-c.com/index.html" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fframa-c.com%2Findex.html" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23048e2d3bdd9dbd2054828876e6406c6e&amp;t=Frama-Clang+0.0.8+is+out.+Download+it+here." class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23048e2d3bdd9dbd2054828876e6406c6e&text=Frama-Clang+0.0.8+is+out.+Download+it+here." class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://frama-c.com/rss.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://frama-c.com/index.html" target="_blank" title="Go to the original post">Frama-Clang 0.0.8 is out. Download it here.</a><span class="additional-info"> — Frama-C, Mar 10, 2020</span></h1><div class="planet-post"></div></section>

<a name="7e6478a93a3a6139f79da47946859c88"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://drup.github.io/2020/03/06/tyxml440/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fdrup.github.io%2F2020%2F03%2F06%2Ftyxml440%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%237e6478a93a3a6139f79da47946859c88&amp;t=A+reasonable+TyXML+release+%7C+Drup%27s+thingies" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%237e6478a93a3a6139f79da47946859c88&text=A+reasonable+TyXML+release+%7C+Drup%27s+thingies" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://drup.github.io/feed-ocaml.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://drup.github.io/2020/03/06/tyxml440/" target="_blank" title="Go to the original post">A reasonable TyXML release | Drup's thingies</a><span class="additional-info"> — Gabriel Radanne, Mar 06, 2020</span></h1><div class="planet-post">
        
        
        
        <p>I have the pleasure to announce the release of <a href="https://github.com/ocsigen/tyxml/releases/tag/4.4.0">TyXML 4.4.0</a>, with special Reason support!</p>


        
        </div></section>

<a name="a5eb0fa043c6e9e6cf9278f0eaa0a118"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://www.ocamlpro.com/2020/03/03/alt-ergo-userss-club-annual-meeting/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.ocamlpro.com%2F2020%2F03%2F03%2Falt-ergo-userss-club-annual-meeting%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23a5eb0fa043c6e9e6cf9278f0eaa0a118&amp;t=Alt-Ergo+Users%E2%80%99+Club+Annual+Meeting" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23a5eb0fa043c6e9e6cf9278f0eaa0a118&text=Alt-Ergo+Users%E2%80%99+Club+Annual+Meeting" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://www.ocamlpro.com/feed/" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://www.ocamlpro.com/2020/03/03/alt-ergo-userss-club-annual-meeting/" target="_blank" title="Go to the original post">Alt-Ergo Users’ Club Annual Meeting</a><span class="additional-info"> — OCamlPro, Mar 03, 2020</span></h1><div class="planet-post"><div id="ocamlorg-post7"><p class="moz-signature"><img src="http://www.ocamlpro.com/wp-content/uploads/2020/02/altergo.png" class="size-full wp-image-2494 alignleft" alt="" width="107" height="90"/>The second annual meeting of the Alt-Ergo Users&#8217; Club was held in mid-February. Our annual meeting is the perfect place to review each partner&#8217;s needs regarding Alt-Ergo. This year, we had the pleasure of receiving our partners to discuss the roadmap for future Alt-Ergo developments and enhancements.</p>
<blockquote><p>Alt-Ergo is an automatic mathematical formula checker, jointly developed by <a href="https://www.lri.fr/index_en.php?lang=EN">LRI</a> and OCamlPro (since 2014). For more information or to join the club, visit <a href="https://alt-ergo.ocamlpro.com/" class="c-link" target="_blank" rel="noopener noreferrer" aria-describedby="slack-kit-tooltip">https://alt-ergo.ocamlpro.com</a>.</p></blockquote>
<a href="#a5eb0fa043c6e9e6cf9278f0eaa0a118" onclick="switchContent('ocamlorg-post7','ocamlorg-post8')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post8" style="display: none"><p class="moz-signature"><img src="http://www.ocamlpro.com/wp-content/uploads/2020/02/altergo.png" class="size-full wp-image-2494 alignleft" alt="" width="107" height="90"/>The second annual meeting of the Alt-Ergo Users&#8217; Club was held in mid-February. Our annual meeting is the perfect place to review each partner&#8217;s needs regarding Alt-Ergo. This year, we had the pleasure of receiving our partners to discuss the roadmap for future Alt-Ergo developments and enhancements.</p>
<blockquote><p>Alt-Ergo is an automatic mathematical formula checker, jointly developed by <a href="https://www.lri.fr/index_en.php?lang=EN">LRI</a> and OCamlPro (since 2014). For more information or to join the club, visit <a href="https://alt-ergo.ocamlpro.com/" class="c-link" target="_blank" rel="noopener noreferrer" aria-describedby="slack-kit-tooltip">https://alt-ergo.ocamlpro.com</a>.</p></blockquote>
<p class="moz-signature">Our club has several goals, the first of which is to ensure the sustainability of Alt-Ergo by fostering collaboration among club members and strengthening collaboration with formal method communities such as Why3. One of our priorities is to increase our user community by extending our tool to new sectors such as Model Checking. Participation in international competitions is also a way to gain visibility. Finally, the last objective of the club is to find new projects or contracts for the development of long-term functionalities.</p>
<p class="moz-signature">We thank all our members for their support and bid a warm welcome Mitsubishi Electric R&amp;D Centre Europe as they join AdaCore and the CEA list as a member of the club this year. We would also like to highlight the <a href="http://why3.lri.fr/">Why3</a> development team with whom we are working to improve our tools.</p>
<p class="moz-signature">Our members are particularly interested in:</p>
<ul>
<li class="moz-signature">Better generation of models and counter-examples.</li>
<li class="moz-signature">The addition of sequence theory.</li>
<li class="moz-signature">The improvement of non-linear arithmetic support in Alt-Ergo.</li>
</ul>
<p>These features are now top priorities for us. For more information, you can read our <a href="http://www.ocamlpro.com/tag/alt-ergo-en/">articles</a> on this blog.</p>
<a href="#a5eb0fa043c6e9e6cf9278f0eaa0a118" onclick="switchContent('ocamlorg-post8','ocamlorg-post7')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="3347afaf9963a6d9c69e2fb2b8540653"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://psellos.com/2020/02/2020.02.kid-charlemagne.html" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fpsellos.com%2F2020%2F02%2F2020.02.kid-charlemagne.html" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%233347afaf9963a6d9c69e2fb2b8540653&amp;t=OCaml+iOS+Apps+Ported+to+Browser" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%233347afaf9963a6d9c69e2fb2b8540653&text=OCaml+iOS+Apps+Ported+to+Browser" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://psellos.com/atom.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://psellos.com/2020/02/2020.02.kid-charlemagne.html" target="_blank" title="Go to the original post">OCaml iOS Apps Ported to Browser</a><span class="additional-info"> — Psellos, Feb 24, 2020</span></h1><div class="planet-post"><div id="ocamlorg-post9"><div class="date">February 24, 2020</div>

<p>Something like ten years ago we produced two iOS card game apps written
in OCaml, partly as a proof of concept for compiling OCaml to iOS and
partly because we enjoy card games. Unfortunately we weren&#8217;t able to
spark a worldwide craze for writing iOS apps in OCaml or for playing
Schnapsen, as we had hoped. Consequently there was very little financial
return and we all had to move on to other projects.</p>

<p>Both apps play a very good two-player card game. The apps are
essenti…</p><a href="#3347afaf9963a6d9c69e2fb2b8540653" onclick="switchContent('ocamlorg-post9','ocamlorg-post10')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post10" style="display: none"><div class="date">February 24, 2020</div>

<p>Something like ten years ago we produced two iOS card game apps written
in OCaml, partly as a proof of concept for compiling OCaml to iOS and
partly because we enjoy card games. Unfortunately we weren&#8217;t able to
spark a worldwide craze for writing iOS apps in OCaml or for playing
Schnapsen, as we had hoped. Consequently there was very little financial
return and we all had to move on to other projects.</p>

<p>Both apps play a very good two-player card game. The apps are
essentially a kind of solitaire where you play against the app as your
opponent. The games are:</p>

<ul>
<li><p>Cassino, a classic fishing game said without substantiation to be
of Italian origin (per Wikipedia).</p></li>
<li><p>Schnapsen, a kind of miniature Pinochle very popular in the
territories of the former Austro-Hungarian Empire (again per
Wikipedia).</p></li>
</ul>

<p>The Schnapsen app also plays a closely related game called Sixty-Six,
named after this number in many different languages.</p>

<p>The images and layout algorithms for the apps quickly fell behind the
formats and display capabilities of later iOS devices, so I was thinking
we might just as well release the apps as is, for free. However there is
a lot of rigamarole (and some cost) associated with the App Store if all
you want to do is release some free apps.</p>

<table class="morelikealist" style="margin-top: 0.4em;">
<tr><td>
<a href="http://cassino.psellos.com">
<img src="http://psellos.com/images/cassino-icon45.png"/><br/>
<strong>Cassino</strong>
</a>
</td></tr>
<tr><td>
<a href="http://schnapsen.psellos.com">
<img src="http://psellos.com/images/schnapsen-icon45.png"/><br/>
<strong>Master<br/>Schnapsen/66</strong>
</a>
</td></tr>
</table>

<p>Recently I wondered if it wouldn&#8217;t be possible to revive the apps in a
browser environment. These days you can compile OCaml to JavaScript
using <a href="https://bucklescript.github.io/">BuckleScript</a> or
<a href="https://ocsigen.org/js_of_ocaml/3.5.1/manual/overview">Js_of_ocaml</a>.
The HTML 5 canvas element has an interface a lot like the
two-dimensional graphics used by the apps. It seems like it should be
possible.</p>

<p>So, in fact, that&#8217;s what I did. I ported the two card game apps to run
as webapps. Visually they run in a smallish rectangle exactly the size
of the original iPhone screen. I was able to retain the iPhone behavior
almost unchanged. Computationally they run completely in the browser,
and make no further contact with psellos.com (unless you want to access
the game pages at psellos.com).</p>

<p>The OCaml code is compiled to JavaScript using the BuckleScript
compiler. Because the target language is JavaScript, there&#8217;s no need for
any stubs or supporting code (as there was in iOS). All of the code for
the apps is in OCaml.</p>

<p>Once the basic graphics primitives were in place, a lot of the code
worked without any change. The part of the code that actually plays the
game (the &#8220;engine&#8221;) didn&#8217;t change at all.</p>

<p>As an unexpected and very welcome side effect, two of the old iOS app
team members got interested in the project again. They&#8217;re working on
making the Schnapsen app into an even better player. I added some extra
features to the Schnapsen GUI to make it easier to keep track of what&#8217;s
happened in a hand.</p>

<p>Neither of the webapps is quite finished yet. But they both are already
playable and in fact quite enjoyable. You can try them by clicking on
the icons above. You can also read about the apps and the games they
play on their own separate pages.</p>

<ul>
<li><a href="http://psellos.com/cassino">Cassino Page</a></li>
<li><a href="http://psellos.com/schnapsen">Schnapsen Page</a></li>
</ul>

<p>If you have any comments, suggestions, or encouragement, leave them
below or email me at <a href="http://psellos.com/&#x6d%3B%26%23x61%3B%26%23x69%3B%26%23108%3B%26%23x74%3B%26%23x6f%3B%26%23x3a%3Bj%26%23x65%3B%26%23x66%3B%26%23x66%3B%26%23115%3B%26%23099%3B%26%23x6f%3B%26%23064%3B%26%23112%3B%26%23115%3B%26%23x65%3Bl%26%23x6c%3B%26%23x6f%3Bs%26%23046%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B">&#106;e&#102;&#x66;&#115;&#099;o&#064;&#112;&#115;&#x65;&#108;l&#x6f;&#x73;&#x2e;&#x63;&#111;&#109;</a>.</p>

<p>Posted by: <a href="http://psellos.com/aboutus.html#jeffreya.scofieldphd">Jeffrey</a></p>

<p></p>
<a href="#3347afaf9963a6d9c69e2fb2b8540653" onclick="switchContent('ocamlorg-post10','ocamlorg-post9')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="2cdd6a9f15f3d63f17c44fbb53ac854b"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://blog.janestreet.com/watch-all-of-jane-streets-tech-talks/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fblog.janestreet.com%2Fwatch-all-of-jane-streets-tech-talks%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%232cdd6a9f15f3d63f17c44fbb53ac854b&amp;t=Watch+all+of+Jane+Street%27s+tech+talks" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%232cdd6a9f15f3d63f17c44fbb53ac854b&text=Watch+all+of+Jane+Street%27s+tech+talks" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://blog.janestreet.com/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://blog.janestreet.com/watch-all-of-jane-streets-tech-talks/" target="_blank" title="Go to the original post">Watch all of Jane Street's tech talks</a><span class="additional-info"> — Jane Street, Feb 20, 2020</span></h1><div class="planet-post"><p>Jane Street has been posting tech talks from internal speakers and
invited guests for years—and they’re all available on our YouTube
channel:</p>

</div></section>

<a name="0532a19c12d9d3ca0de976fe4ccc8b77"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://blog.0branch.com/posts/2020-02-15-prettyconfig-extension.html" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fblog.0branch.com%2Fposts%2F2020-02-15-prettyconfig-extension.html" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%230532a19c12d9d3ca0de976fe4ccc8b77&amp;t=Mercurial%3A+prettyconfig+extension" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%230532a19c12d9d3ca0de976fe4ccc8b77&text=Mercurial%3A+prettyconfig+extension" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://newblog.0branch.com/rss.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://blog.0branch.com/posts/2020-02-15-prettyconfig-extension.html" target="_blank" title="Go to the original post">Mercurial: prettyconfig extension</a><span class="additional-info"> — Marc Simpson, Feb 16, 2020</span></h1><div class="planet-post"><div id="ocamlorg-post11"><div>
  <div class="span-22">
    <div class="span-12"><h1>Mercurial: prettyconfig extension</h1></div>
    <div style="text-align: right" class="span-10 last">
      <a href="http://newblog.0branch.com/index.html">#</a> February 16, 2020
    </div>
  </div>
  <hr/>
  <div>
    <p>Since the <a href="http://newblog.0branch.com/posts/2020-02-03-bitbucket-migration.html">Bitbucket migration</a>, I’ve found myself tinkering<a href="http://newblog.0branch.com/rss.xml#fn1" class="footnote-ref"><sup>1</sup></a> with Mercurial and its extensions system again (after a long hiatus).</p>
<p>One byproduct of this was a simple, single function <a href="http://hg.0branch.com/hg-aliases">extension</a> for listing aliases in a user-friendly way. I subsequently realised that the same behaviour would be useful for arbitrary config sections (aliases, paths, schemes)… and so, the <a href="http://hg.0branch.com/hg-prettyconfig">prettyconfig</a> fork.</p>
<p>The <a href="http://hg.0branch.com/hg-prettyconfig">prettyconfig</a> …</p></div></div><a href="#0532a19c12d9d3ca0de976fe4ccc8b77" onclick="switchContent('ocamlorg-post11','ocamlorg-post12')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post12" style="display: none"><div>
  <div class="span-22">
    <div class="span-12"><h1>Mercurial: prettyconfig extension</h1></div>
    <div style="text-align: right" class="span-10 last">
      <a href="http://newblog.0branch.com/index.html">#</a> February 16, 2020
    </div>
  </div>
  <hr/>
  <div>
    <p>Since the <a href="http://newblog.0branch.com/posts/2020-02-03-bitbucket-migration.html">Bitbucket migration</a>, I’ve found myself tinkering<a href="http://newblog.0branch.com/rss.xml#fn1" class="footnote-ref"><sup>1</sup></a> with Mercurial and its extensions system again (after a long hiatus).</p>
<p>One byproduct of this was a simple, single function <a href="http://hg.0branch.com/hg-aliases">extension</a> for listing aliases in a user-friendly way. I subsequently realised that the same behaviour would be useful for arbitrary config sections (aliases, paths, schemes)… and so, the <a href="http://hg.0branch.com/hg-prettyconfig">prettyconfig</a> fork.</p>
<p>The <a href="http://hg.0branch.com/hg-prettyconfig">prettyconfig</a> extension defines a single command, <code>prettyconfig</code>, for colourising and neatly displaying config values. Without arguments, all config name/value pairs are output, where names are qualified with section prefixes (akin to <code>hg showconfig</code>). Single sections are displayed with the <code>-s</code> (or <code>--section</code>) switch, e.g.:</p>
<pre><code>$ hg prettyconfig  -s       alias   # display aliases
$ hg prettyconfig --section alias   # same thing</code></pre>
<p>Colouring can be applied to the output by setting the following two labels in an <code>.hgrc</code> file (either globally or locally):</p>
<div class="sourceCode"><pre class="sourceCode ini"><code class="sourceCode ini"><a class="sourceLine" data-line-number="1"><span class="kw">[color]</span></a>
<a class="sourceLine" data-line-number="2"><span class="dt">prettyconfig.name </span><span class="ot">=</span><span class="st"> yellow</span></a>
<a class="sourceLine" data-line-number="3"><span class="dt">prettyconfig.value </span><span class="ot">=</span><span class="st"> green</span></a></code></pre></div>
<p>So far, I’ve found the following aliases<a href="http://newblog.0branch.com/rss.xml#fn2" class="footnote-ref"><sup>2</sup></a> useful enough to store globally in <code>~/.hgrc</code>:</p>
<div class="sourceCode"><pre class="sourceCode ini"><code class="sourceCode ini"><a class="sourceLine" data-line-number="1"><span class="kw">[alias]</span></a>
<a class="sourceLine" data-line-number="2"><span class="dt">aliases </span><span class="ot">=</span><span class="st"> prettyconfig -s alias</span></a>
<a class="sourceLine" data-line-number="3"><span class="dt">schemes </span><span class="ot">=</span><span class="st"> prettyconfig -s schemes</span></a></code></pre></div>
<p>Hopefully others will find <a href="http://hg.0branch.com/hg-prettyconfig">prettyconfig</a> useful too. Feedback is welcome.</p>
<section class="footnotes">
<hr/>
<ol>
<li><p>Perusing APIs, making old extensions Python 3 compatible, tweaking web templates, etc.<a href="http://newblog.0branch.com/rss.xml#fnref1" class="footnote-back">↩</a></p></li>
<li><p>Note that the <code>aliases</code> alias effectively does the same thing as enabling <a href="http://hg.0branch.com/hg-aliases">hg-aliases</a> (from which this extension was derived).<a href="http://newblog.0branch.com/rss.xml#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</section>
  </div>
</div>

<hr/>

<div></div>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<a href="#0532a19c12d9d3ca0de976fe4ccc8b77" onclick="switchContent('ocamlorg-post12','ocamlorg-post11')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="16173d981ca7e60ce06c44486feff215"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://blog.0branch.com/posts/2020-02-05-hg-extensions.html" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fblog.0branch.com%2Fposts%2F2020-02-05-hg-extensions.html" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2316173d981ca7e60ce06c44486feff215&amp;t=Mercurial+extensions+%28update%29" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2316173d981ca7e60ce06c44486feff215&text=Mercurial+extensions+%28update%29" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://newblog.0branch.com/rss.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://blog.0branch.com/posts/2020-02-05-hg-extensions.html" target="_blank" title="Go to the original post">Mercurial extensions (update)</a><span class="additional-info"> — Marc Simpson, Feb 05, 2020</span></h1><div class="planet-post"><div>
  <div class="span-22">
    <div class="span-12"><h1>Mercurial extensions (update)</h1></div>
    <div style="text-align: right" class="span-10 last">
      <a href="http://newblog.0branch.com/index.html">#</a> February  5, 2020
    </div>
  </div>
  <hr/>
  <div>
    <p>In my <a href="http://newblog.0branch.com/posts/2020-02-03-bitbucket-migration.html">previous post</a>, I mentioned that a couple of old Mercurial extensions are archived on this server: <a href="http://hg.0branch.com/hg-prettypaths">hg-prettypaths</a> and <a href="http://hg.0branch.com/hg-persona/">hg-persona</a>.</p>
<p>Both have now been lightly tidied and updated to work with newer versions of Mercurial (tested on 4.5.3, 5.3).</p>
  </div>
</div>

<hr/>

<div></div>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div></section>

<a name="02b840e88168198ddeb7278b22928773"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://www.ocamlpro.com/2020/02/04/2019-at-ocamlpro/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.ocamlpro.com%2F2020%2F02%2F04%2F2019-at-ocamlpro%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2302b840e88168198ddeb7278b22928773&amp;t=2019+at+OCamlPro" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2302b840e88168198ddeb7278b22928773&text=2019+at+OCamlPro" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://www.ocamlpro.com/feed/" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://www.ocamlpro.com/2020/02/04/2019-at-ocamlpro/" target="_blank" title="Go to the original post">2019 at OCamlPro</a><span class="additional-info"> — OCamlPro, Feb 04, 2020</span></h1><div class="planet-post"><div id="ocamlorg-post13"><p>OCamlPro was created to help OCaml and formal methods spread into the industry. We grew from 1 to 21 engineers, still strongly sharing this ambitious goal! The year 2019 at OCamlPro was very lively, with fantastic accomplishments all along!</p>
<p>Let&#8217;s quickly review the past years&#8217; works, first in the world of <a href="http://www.ocamlpro.com/feed/#ocaml">OCaml</a> (<a href="http://www.ocamlpro.com/feed/#compilation">flambda2</a> &amp; compiler optimisations, <a href="http://www.ocamlpro.com/feed/#opam">opam</a> 2, our <a href="http://www.ocamlpro.com/feed/#rust">Rust-based</a> UI for <a href="http://www.ocamlpro.com/feed/#memthol">memprof</a>, tools like tryOCaml, ocp-indent, and supporting the <a href="http://www.ocamlpro.com/feed/#ocsf">OCaml Software Foundation</a>), then in the wor…</p><a href="#02b840e88168198ddeb7278b22928773" onclick="switchContent('ocamlorg-post13','ocamlorg-post14')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post14" style="display: none"><p>OCamlPro was created to help OCaml and formal methods spread into the industry. We grew from 1 to 21 engineers, still strongly sharing this ambitious goal! The year 2019 at OCamlPro was very lively, with fantastic accomplishments all along!</p>
<p>Let&#8217;s quickly review the past years&#8217; works, first in the world of <a href="http://www.ocamlpro.com/feed/#ocaml">OCaml</a> (<a href="http://www.ocamlpro.com/feed/#compilation">flambda2</a> &amp; compiler optimisations, <a href="http://www.ocamlpro.com/feed/#opam">opam</a> 2, our <a href="http://www.ocamlpro.com/feed/#rust">Rust-based</a> UI for <a href="http://www.ocamlpro.com/feed/#memthol">memprof</a>, tools like tryOCaml, ocp-indent, and supporting the <a href="http://www.ocamlpro.com/feed/#ocsf">OCaml Software Foundation</a>), then in the world of <a href="http://www.ocamlpro.com/feed/#formalmethods">formal methods</a> (new versions of our SMT Solver <a href="http://www.ocamlpro.com/feed/#altergo">Alt-Ergo</a>, launch of the <a href="http://www.ocamlpro.com/feed/#altergoclub">Alt-Ergo Users&#8217; Club</a>, the <a href="http://www.ocamlpro.com/feed/#love">Love language</a>, etc.).</p>
<div class="m_-9073459877353804024moz-forward-container">
<div class="m_-9073459877353804024moz-forward-container">
<h1>In the World of OCaml<a></a></h1>
</div>
</div>
<h2><b>Flambda &amp; Compilation Team<a></a><br/>
</b></h2>
<p><i>* Work by Pierre Chambart, Vincent Laviron, Guillaume Bury and Pierrick Couderc</i></p>
<p><img src="http://www.ocamlpro.com/wp-content/uploads/2018/01/ocaml.png" class="alignleft wp-image-823" alt="" width="109" height="95"/></p>
<p>Pierre and Vincent&#8217;s considerable work on Flambda 2 (the optimizing intermediate representation of the OCaml compiler &#8211; on which inlining occurs), in close cooperation with Jane Street (Mark Shinwell, Leo White and their team) aims at overcoming some of flambda&#8217;s limitations. We have continued our work on making OCaml programs always faster: internal types are clearer, more concise, and possible control flow transformations are more flexible. Overall a precious outcome for industrial users. In 2019, the major breakthrough was to go from the initial prototype to a complete compiler, which allowed us to compile simple examples first and then to bootstrap it.</p>
<p>On the OCaml compiler side, we also worked with Leo on two new features: functorized compilation units and functorized packs, and recursive packs. The former will allow any developer to implement &#8216;.ml&#8217; files as if they were functors and not simply modules, and more importantly generate packs that are real functors. As such, this allows to split big functors into several files or to parameterize libraries on other modules. The latter allows two distinct usages: recursive interfaces, to implement recursive types into distinct `.mlis` as long as they do not need any implementation; and recursive packs, whose components are typed and compiled as recursive modules.</p>
<ul>
<li>These new features are described on the new <a href="https://github.com/ocaml/RFCs/pull/11">RFC repository</a> for OCaml (a <a href="https://github.com/ocaml/ocaml/issues/5283">similar idea</a> was suggested and implemented in 2011 by Fabrice Le Fessant).</li>
<li>The implementation is available on GitHub for both <a href="https://github.com/OCamlPro-Couderc/ocaml/tree/functorized-packs">functorized packs</a> and <a href="https://github.com/OCamlPro-Couderc/ocaml/tree/recursive-units+pack-cleanup">recursive packs</a>. Be aware that both are based on an old version of OCaml for now, but should be in sync with the current trunk in the near future.</li>
<li>See also Vincent&#8217;s <a href="http://www.ocamlpro.com/2019/08/30/ocamlpros-compiler-team-work-update/" rel="bookmark">OCamlPro’s compiler team work update</a> of August 2019.</li>
</ul>
<p><em>This work is allowed thanks to Jane Street&#8217;s funding.</em></p>
<div class="m_-9073459877353804024moz-forward-container">
<div class="m_-9073459877353804024moz-forward-container">
<h2>Work on a formalized type system for OCaml<a></a></h2>
<p>* <em>Work of Pierrick Couderc</em></p>
<p>At the end of 2018, Pierrick defended his PhD on &#8220;<a href="https://pastel.archives-ouvertes.fr/tel-02100717/">Checking type inference results of the OCaml language</a>&#8220;, leading to a formalized type systems and semantics for a large subset of OCaml, or at least its unique typed intermediate language: the Typedtree. This work led us to work on new aspects of the OCaml compiler as recursive and functorized packs described earlier, and we hope this proves useful in the future for the evolution of the language.</p>
<h2>The OPAM package manager<a></a></h2>
<p><i>*Work of Raja Boujbel and Louis Gesbert</i></p>
<h2><img src="http://www.ocamlpro.com/wp-content/uploads/2018/01/opam-300x261.png" class="wp-image-820 alignleft" alt="" width="109" height="95" srcset="http://www.ocamlpro.com/wp-content/uploads/2018/01/opam-300x261.png 300w, http://www.ocamlpro.com/wp-content/uploads/2018/01/opam.png 357w" sizes="(max-width: 109px) 100vw, 109px"/></h2>
<p><a href="http://opam.ocaml.org">OPAM</a> is maintained and developed at OCamlPro by Louis and Raja. Thanks to their thorough efforts the opam 2.1 first release candidate is soon to be published!</p>
<p>Back in 2018, the long-awaited opam 2.0 version was finally released. It embedded many changes, in opam itself as well as for the community. The opam file format was redefined to simplify and add new features. With the close collaboration of OCamlLabs and opam repository maintainers, we were able to manage a smooth transition of the repository and whole ecosystem from opam 1.2 format to the new &#8211; and richer &#8211; opam 2.0 format. Other emblematic features are e.g. for practically integrated mccs solver, sandboxing builds, for security issues (we care about your filesystem!), for usability reworking of the pin&#8217; command, etc.</p>
<p>While the 2.1.0 version is in preparation, the 2.0.0 version is still updated with minor releases to fix issues. The lastest 2.0.6 release is fresh from January.</p>
<p>In the meantime, we continued to improve opam by integrating some opam plugins (opam lock, opam depext), recursively discover opam files in the file tree when pinning, new definition of a switch compiler, the possibility to use z3 backend instead of mccs, etc.</p>
<p>All these new features &#8211; among others &#8211; will be integrated in the 2.1.0 release, that is betaplanned for February. The best is yet to come!</p>
</div>
</div>
<ul>
<li>More details: on <a href="http://opam.ocaml.org">http://opam.ocaml.org </a></li>
<li>Releases on Releases on <a href="https://github.com/ocaml/opam/releases" target="_blank" rel="noopener noreferrer" data-saferedirecturl="https://www.google.com/url?q=https://github.com/ocaml/opam/releases&amp;source=gmail&amp;ust=1580896455680000&amp;usg=AFQjCNF4j8wCWVQHXbTqQ1KaEZY8IJ3UAQ">https://github.com/ocaml/opam/<wbr></wbr>releases</a> &amp; <a href="https://opam.ocaml.org/blog/opam-2-0-6/">our blog</a></li>
</ul>
<p><em>This work is allowed thanks to Jane Street&#8217;s funding.</em></p>
<h2><b class="im">Encouraging OCaml adoption</b><b><br/>
</b></h2>
<h3>OCaml Expert trainings for professional programmers<a></a></h3>
<p>We proposed in 2019 some <a href="http://www.ocamlpro.com/course-ocaml-expert/">OCaml expert training</a> specially designed for developers who want to use advanced features and master all the open-source tools and libraries of OCaml.</p>
<blockquote><p>The &#8220;Expert&#8221; OCaml course is for already experienced OCaml programmers to better understand advanced type system possibilities (objects, GADTs), discover GC internals, write &#8220;compiler-optimizable&#8221; code. These sessions are also an opportunity to come discuss with our OPAM &amp; Flambda lead developers and core contributors in Paris.</p></blockquote>
<ul>
<li>Next session: 3-4 March 2020, Paris <a href="http://www.ocamlpro.com/forms/preinscriptions-formation-ocaml/">(registration)</a></li>
</ul>
<div class="m_-9073459877353804024moz-forward-container">
<div class="m_-9073459877353804024moz-forward-container">
<h3>Our cheat-sheets on OCaml, the stdlib and opam<a></a></h3>
<p><i>* Work of Thomas Blanc, Raja Boujbel and Louis Gesbert </i></p>
<p>Thomas announced the release of our up-to-date cheat-sheets for the <a href="http://www.ocamlpro.com/2019/09/13/updated-cheat-sheets-ocaml-language-and-ocaml-standard-library/">OCaml language, standard library</a> and <a href="http://www.ocamlpro.com/wp-content/uploads/2019/11/ocaml-opam.pdf">opam</a>. Our original cheat-sheets were dating back to 2011. This was an opportunity to update them after the <a href="http://www.ocamlpro.com/2019/09/13/updated-cheat-sheets-ocaml-language-and-ocaml-standard-library/">many changes</a> in the language, library and ecosystem overall.</p>
<blockquote><p>Cheat-sheets are helpful to refer to, as an overview of the documentation when you are programming, especially when you’re starting in a new language. They are meant to be printed and pinned on your wall, or to be kept in handy on a spare screen. <em>They come in handy when your <a href="https://rubberduckdebugging.com/">rubber duck</a> is rubbish at debugging your code!</em></p></blockquote>
<ul>
<li>More details on <a href="http://www.ocamlpro.com/2019/09/13/updated-cheat-sheets-ocaml-language-and-ocaml-standard-library/">Thomas&#8217; blog post</a></li>
</ul>
<h3>Open Source Tooling and Web IDEs</h3>
<p>And let&#8217;s not forget the other tools we develop and maintain! We have tools for education such as our interactive editor OCaml-top and  <a href="https://try.ocamlpro.com/new.html">Try-OCaml </a> (from the previous work on the learn-OCaml platform for the OCaml Fun MOOC) which you can use to code in your browser. Developers will appreciate tools like our indentation tool ocp-indent, and ocp-index which gives you easy access to the interface information of installed OCaml libraries for editors like Emacs and Vim.</p>
<h2>Supporting the OCaml Software Foundation<a></a></h2>
<h2><img src="http://ocaml-sf.org/img/logo-ocsf.svg" class="alignleft" alt="The OCaml Software Foundation. Logo by Bettina Steinbrecher" width="162" height="50"/></h2>
<p>OCamlPro was proud to be one of the first supporters of the new Inria&#8217;s <a href="http://ocaml-sf.org/">OCaml Software Foundation.</a> We keep committed to the adoption of OCaml as an industrial language:</p>
<blockquote><p>&#8220;[&#8230;] As a long-standing supporter of the OCaml language, we have always been committed to helping spread OCaml&#8217;s adoption and increase the accessibility of OCaml to beginners and students. [&#8230;] We value close and friendly collaboration with the main actors of the OCaml community, and are proud to be contributing to the OCaml language and tooling.&#8221; (August 2019, Advisory Board of the OCSF, ICFP Berlin)</p></blockquote>
<ul>
<li>More information on the <a href="http://ocaml-sf.org/">OCaml Software Foundation</a></li>
</ul>
<h1>In the World of Formal Methods<a></a></h1>
<p><em>* By Mohamed Iguernlala, Albin Coquereau, Guillaume Bury<br/>
</em></p>
<p>In 2018, we welcomed five new engineers with a background in formal methods. They consolidate the department of formal methods at OCamlPro, in particular help develop and maintain our SMT solver Alt-Ergo.</p>
<h2>Release of Alt-Ergo 2.3.0, and version 2.0.0 (free)<a></a></h2>
<h2><img src="http://www.ocamlpro.com/wp-content/uploads/2016/02/alt-ergo-logo.png" class="size-medium alignleft" alt="Alt-Ergo" width="107" height="90"/></h2>
<p>After the release of <a href="http://www.ocamlpro.com/2018/04/23/release-of-alt-ergo-2-2-0/">Alt-Ergo 2.2.0</a> (with a new front-end that supports the SMT-LIB 2 language, extended prenex polymorphism, implemented as a standalone library) came the version 2.3.0 in 2019 with new features : dune support, ADT / algebraic datatypes, improvement of the if-then-else and let-in support, improvement of the data types.</p>
<ul>
<li>More information on the <a href="https://alt-ergo.ocamlpro.com/">Alt-Ergo SMT Solver</a></li>
<li>Albin Coquereau defended his PhD thesis in Decembre 2019 &#8220;Improving performance of the SMT solver Alt-Ergo with a better integration of efficient SAT solver&#8221;</li>
<li>We participated in the SMT-COMP 2019 during the 22nd SAT conference. The results of the competition are detailed <a href="http://www.ocamlpro.com/2019/07/09/alt-ergo-participation-to-the-smt-comp-2019/">here.</a>
<div class="c-message_kit__gutter">
<div class="c-message_kit__gutter__right" data-qa="message_content">
<div class="c-message_kit__blocks c-message_kit__blocks--rich_text">
<div class="c-message__message_blocks c-message__message_blocks--rich_text">
<div class="p-block_kit_renderer" data-qa="block-kit-renderer">
<div class="p-block_kit_renderer__block_wrapper p-block_kit_renderer__block_wrapper--first">
<div class="p-rich_text_block" dir="auto"></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="c-message_actions__container c-message__actions" role="group" aria-label="Message actions"></div>
</li>
</ul>
</div>
</div>
<div class="m_-9073459877353804024moz-forward-container">
<div class="m_-9073459877353804024moz-forward-container">
<h2>The launch of the Alt-Ergo Users&#8217; Club<a></a></h2>
<p>Getting closer to our users, gathering industrial and academic supporters, collecting their needs into the Alt-Ergo roadmap is key to Alt-Ergo&#8217;s development and sustainability.</p>
<p>The <a href="https://alt-ergo.ocamlpro.com/#club">Alt-Ergo Users&#8217; Club</a> was officially launched beginning of 2019. The first yearly meeting took place in February 2019. We were happy to welcome our first members <a href="https://www.adacore.com" target="_blank" rel="noopener">Adacore</a>, <a href="http://www-list.cea.fr/en/" target="_blank" rel="noopener">CEA List</a>, <a href="https://trust-in-soft.com" target="_blank" rel="noopener">Trust-In-Soft</a>, and now Mitsubishi MERCE.</p>
<ul>
<li>More information on the <a href="https://alt-ergo.ocamlpro.com/#club">Alt-Ergo Users&#8217; Club</a></li>
</ul>
</div>
</div>
<div class="m_-9073459877353804024moz-forward-container">
<div class="m_-9073459877353804024moz-forward-container">
<h1>Harnessing our language-design expertise: Love<a></a></h1>
<p><img src="http://www.ocamlpro.com/wp-content/uploads/2020/02/Love-deuxi%C3%A8me-jet-couleur-dune-300x300.png" class=" wp-image-2410 alignleft" alt="" width="158" height="163"/></p>
<p><i>* Work by David Declerck &amp; Steven de Oliveira</i></p>
<p>Following the launch of Dune network, the Love language for smart-contracts was born from the collaboration of OCamlPro and Origin Labs. This new language, whose syntax is inspired from OCaml and Liquidity, is an alternative to the Dune native smart contract language Michelson. Love is based on system-F, a type system requiring no type inference and allowing polymorphism. The language has successfully been integrated on the network and the first smart contracts are being written.</p>
<ul>
<li><a href="https://medium.com/dune-network/love-a-new-smart-contract-language-for-the-dune-network-a217ab2255be">LOVE: a New Smart Contract Language for the Dune Network</a></li>
<li><a href="https://medium.com/dune-network/the-love-smart-contract-language-introduction-key-features-part-i-949d8a4e73c3">The Love Smart Contract Language: Introduction &amp; Key Features — Part I</a></li>
</ul>
<h1>Rust-related activities<a></a></h1>
<p>The OCaml &amp; Rust combo <em>should</em> be a candidate for any ambitious software project!</p>
<ul>
<li><a></a>A Rust-based UI for memprof: we started in 2019 to work in collaboration with the memprof developer team on a Rust based UI for memprof. See Pierre and Albin&#8217;s exposé at the <a href="http://jfla.inria.fr/jfla2020.html">JFLA2020</a>&#8216;s &#8220;<span class="commtitle">Gardez votre mémoire fraiche avec Memthol&#8221; (</span>Pierre <span class="name">Chambart</span> , Albin <span class="name">Coquereau</span> and Jacques-Henri <span class="name">Jourdan)</span></li>
</ul>
<ul>
<li><a href="http://www.ocamlpro.com/rust-vocational-training/">Rust training</a> : R<em>ust borrows heavily from functional programming languages to provide very expressive abstraction mechanisms. Because it is a systems language, these mechanisms are almost always zero-cost. For instance, polymorphic code has no runtime cost compared to a monomorphic version.This concern for efficiency also means that Rust lets developers keep a very high level of control and freedom for optimizations. Rust has no Garbage Collection or any form of runtime memory inspection to decide when to free, allocate or re-use memory. But because manual memory management is almost universally regarded as dangerous, or at least very difficult to maintain, the Rust compiler has a borrow-checker which is responsible for i) proving that the input program is memory-safe (and thread-safe), and ii) generating a safe and “optimal” allocation/deallocation strategy. All of this is done at compile-time.</em>
<ul>
<li>Next sessions: April 20-24th 2020 <a href="http://www.ocamlpro.com/forms/preinscriptions-formation-ocaml/">(registration)</a></li>
</ul>
</li>
</ul>
</div>
<div class="m_-9073459877353804024moz-forward-container">
<h1><b>OCamlPro around the world</b></h1>
<p>OCamlPro&#8217;s team members attended many events throughout the world:</p>
<ul>
<li><a href="https://icfp19.sigplan.org/">ICFP 2019</a> (Berlin)</li>
<li>The <a href="https://dpt-info.u-strasbg.fr/~magaud/JFLA2019/lieu.html">JFLA’2019</a> (Les Rousses, Haut-Jura)</li>
<li>The<a href="https://www.opensourcesummit.paris/"> POSS&#8217;2019 </a>(Paris)</li>
<li><a href="http://retreat.mirage.io/">MirageOS Retreat</a> (Marrakech)</li>
</ul>
<p>As a committed member of the OCaml ecosystem&#8217;s animation, we&#8217;ve organized OCaml meetups too (see the famous <a href="https://www.meetup.com/fr-FR/ocaml-paris/">OUPS</a> meetups in Paris!).</p>
</div>
<p>Now let&#8217;s jump into the new year 2020, with a team keeping expanding, and new projects ahead: keep posted!</p>
</div>
<p>&nbsp;</p>
<h2>Past projects: blockchain-related achievements (2018-beginning of 2019)<a></a></h2>
<div class="m_-9073459877353804024moz-forward-container">
<p>Many people ask us about what happened in 2018! That was an incredibly active year on blockchain-related achievements, and at that time we were hoping to attract clients that would be interested in our blockchain expertise.</p>
<p>But that is <a href="http://www.ocamlpro.com/wp-content/uploads/2020/01/Flyer_Blockchains_OSIS2017ok.pdf">history</a> now! Still interested? Check the <a href="https://www.origin-labs.com/">Origin Labs</a> team and their partner <a href="https://www.thegara.ge/">The Garage</a> on <a href="https://dune.network">Dune Network</a>!</p>
<p>For the <a href="http://www.ocamlpro.com/2019/04/29/blockchains-at-ocamlpro-an-overview/">record</a>:</p>
<ul>
<li>(April 2019) We had started Techelson: a testing framework for Michelson and Liquidity</li>
<li>(Nov 2018) <a href="http://www.ocamlpro.com/2018/11/21/an-introduction-to-tezos-rpcs-signing-operations/" rel="bookmark">An Introduction to Tezos RPCs: Signing Operations</a> / <a href="http://www.ocamlpro.com/2018/11/15/an-introduction-to-tezos-rpcs-a-basic-wallet/" rel="bookmark">An Introduction to Tezos RPCs: a Basic Wallet </a> / <a href="http://www.ocamlpro.com/2018/11/06/liquidity-tutorial-a-game-with-an-oracle-for-random-numbers/" rel="bookmark">Liquidity Tutorial: A Game with an Oracle for Random Numbers</a> / <a href="http://www.ocamlpro.com/2018/11/08/first-open-source-release-of-tzscan/" rel="bookmark">First Open-Source Release of TzScan</a></li>
<li>(Oct 2018) <a href="http://www.ocamlpro.com/2018/10/17/ocamlpros-tzscan-grant-proposal-accepted-by-the-tezos-foundation-joint-press-release/" rel="bookmark">OCamlPro’s TZScan grant proposal accepted by the Tezos Foundation – joint press release </a></li>
<li>(Jul 2018) <a href="http://www.ocamlpro.com/2018/07/20/new-updates-on-tzscan-2/" rel="bookmark">OCamlPro’s Tezos block explorer TzScan’s last updates</a></li>
<li><span lang="en"></span>(Feb 2018) <a href="http://www.ocamlpro.com/2018/02/14/release-of-a-first-version-of-tzscan-io-a-tezos-block-explorer/" rel="bookmark">Release of a first version of TzScan.io, a Tezos block explorer</a> / <a href="http://www.ocamlpro.com/2018/11/06/liquidity-tutorial-a-game-with-an-oracle-for-random-numbers/" rel="bookmark">OCamlPro’s Liquidity-lang demo at JFLA2018 – a smart-contract design language</a> . We were developing <a href="http://www.liquidity-lang.org/">Liquidity</a>, a high level smart contract language, <span lang="en">human-readable, purely functional, statically-typed, which syntax was very close to the OCaml syntax.</span></li>
<li><span lang="en">To garner interest and adoption, we also developed the online editor <a href="http://www.liquidity-lang.org/edit">Try Liquidity</a></span><span lang="en">. Smart-contract developers could design contracts interactively, directly in the browser, compile them to Michelson, run them and deploy them on the alphanet network of Tezos. </span><span lang="en">Future plans included a full-fledged web-based IDE for Liquidity. Worth mentioning was a neat feature: decompiling a Michelson program back to its Liquidity version, whether it was generated from Liquidity code or not.</span></li>
</ul>
</div>
<a href="#02b840e88168198ddeb7278b22928773" onclick="switchContent('ocamlorg-post14','ocamlorg-post13')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="98ad530546d5b22777171c47776615c1"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://blog.0branch.com/posts/2020-02-03-bitbucket-migration.html" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fblog.0branch.com%2Fposts%2F2020-02-03-bitbucket-migration.html" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2398ad530546d5b22777171c47776615c1&amp;t=Bitbucket+repository+migration" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2398ad530546d5b22777171c47776615c1&text=Bitbucket+repository+migration" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://newblog.0branch.com/rss.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://blog.0branch.com/posts/2020-02-03-bitbucket-migration.html" target="_blank" title="Go to the original post">Bitbucket repository migration</a><span class="additional-info"> — Marc Simpson, Feb 03, 2020</span></h1><div class="planet-post"><div id="ocamlorg-post15"><div>
  <div class="span-22">
    <div class="span-12"><h1>Bitbucket repository migration</h1></div>
    <div style="text-align: right" class="span-10 last">
      <a href="http://newblog.0branch.com/index.html">#</a> February  3, 2020
    </div>
  </div>
  <hr/>
  <div>
    <p>Since Bitbucket are discontinuing Mercurial support in a few months’ time (see <a href="https://bitbucket.org/blog/sunsetting-mercurial-support-in-bitbucket">here</a>), I’ve started migrating a few old repositories:</p>
<ul>
<li><a href="https://github.com/0branch/hugo-unix">hugo-unix</a> is now hosted on GitHub
<ul>
<li>… and Nikos released <a href="https://github.com/0branch/hugo-unix/releases/tag/v3.1.05">v3.1.05</a> today.</li>
<li>Conversion was done with <a href="https://foss.heptapod.net/mercurial/hg-git">hg-git</a>.</li>
</ul></li>
<li>Extensions <a href="http://hg.0branch.com/hg-prettypaths">hg-prettypaths</a> and <a href="http://hg.0branch.com/hg-persona/">hg-persona</a> are now archived on this server.
<ul>
<li>Note that <a href="http://hg.0branch.com/hg-prettypaths">hg-prettypaths</a> is deprecated (broken in newer versions of Mercurial).</li>
<li><a href="http://hg.0branch.com/hg-persona/">hg-persona</a> h…</li></ul></li></ul></div></div><a href="#98ad530546d5b22777171c47776615c1" onclick="switchContent('ocamlorg-post15','ocamlorg-post16')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post16" style="display: none"><div>
  <div class="span-22">
    <div class="span-12"><h1>Bitbucket repository migration</h1></div>
    <div style="text-align: right" class="span-10 last">
      <a href="http://newblog.0branch.com/index.html">#</a> February  3, 2020
    </div>
  </div>
  <hr/>
  <div>
    <p>Since Bitbucket are discontinuing Mercurial support in a few months’ time (see <a href="https://bitbucket.org/blog/sunsetting-mercurial-support-in-bitbucket">here</a>), I’ve started migrating a few old repositories:</p>
<ul>
<li><a href="https://github.com/0branch/hugo-unix">hugo-unix</a> is now hosted on GitHub
<ul>
<li>… and Nikos released <a href="https://github.com/0branch/hugo-unix/releases/tag/v3.1.05">v3.1.05</a> today.</li>
<li>Conversion was done with <a href="https://foss.heptapod.net/mercurial/hg-git">hg-git</a>.</li>
</ul></li>
<li>Extensions <a href="http://hg.0branch.com/hg-prettypaths">hg-prettypaths</a> and <a href="http://hg.0branch.com/hg-persona/">hg-persona</a> are now archived on this server.
<ul>
<li>Note that <a href="http://hg.0branch.com/hg-prettypaths">hg-prettypaths</a> is deprecated (broken in newer versions of Mercurial).</li>
<li><a href="http://hg.0branch.com/hg-persona/">hg-persona</a> has been updated to work with hg ≥4.3.</li>
</ul></li>
</ul>
  </div>
</div>

<hr/>

<div></div>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<a href="#98ad530546d5b22777171c47776615c1" onclick="switchContent('ocamlorg-post16','ocamlorg-post15')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="c184fd446270db27e9af2ecca6736b68"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://blog.janestreet.com/troubleshooting-systemd-with-systemtap/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fblog.janestreet.com%2Ftroubleshooting-systemd-with-systemtap%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23c184fd446270db27e9af2ecca6736b68&amp;t=Troubleshooting+systemd+with+SystemTap" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23c184fd446270db27e9af2ecca6736b68&text=Troubleshooting+systemd+with+SystemTap" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://blog.janestreet.com/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://blog.janestreet.com/troubleshooting-systemd-with-systemtap/" target="_blank" title="Go to the original post">Troubleshooting systemd with SystemTap</a><span class="additional-info"> — Jane Street, Feb 03, 2020</span></h1><div class="planet-post"><p>When we set up a schedule on a computer, such as a list of commands to
run every day at particular times via Linux <a href="https://www.ostechnix.com/a-beginners-guide-to-cron-jobs">cron
jobs</a>, we
expect that schedule to execute reliably.  Of course we’ll check the
logs to see whether the job has failed, but we never question whether
the cron daemon itself will function.  We always assume that it will,
as it always has done; we are not expecting mutiny in the ranks of the
operating system.</p>

</div></section>

<a name="67c17de5f01e915bec732cebf6c25e8f"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://ocsigen.github.io/blog/2020/01/20/release/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Focsigen.github.io%2Fblog%2F2020%2F01%2F20%2Frelease%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2367c17de5f01e915bec732cebf6c25e8f&amp;t=Ocsigen+Start+updated" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2367c17de5f01e915bec732cebf6c25e8f&text=Ocsigen+Start+updated" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://ocsigen.github.io/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://ocsigen.github.io/blog/2020/01/20/release/" target="_blank" title="Go to the original post">Ocsigen Start updated</a><span class="additional-info"> — Ocsigen project (The Ocsigen Team), Jan 20, 2020</span></h1><div class="planet-post"><p>New release: Ocsigen Start 2.15</p>

<p><a href="https://ocsigen.org/ocsigen-start/">Ocsigen Start</a> is a template for client-server Web and/or mobile app in OCaml or ReasonML.
It contains many standard features like user management, notifications, and many code examples.
Use it to <a href="https://ocsigen.org/tuto/latest/manual/start">learn Web/mobile development in OCaml</a> or to quickly create your own Minimum Viable Product.
<a href="https://ocsigen-1.inria.fr/ocsigen-start/demo/">See an online demo</a>.</p>

<p>Last features include:</p>
<ul>
  <li>Get rid of all remaining Camlp4 code</li>
  <li>compatibility with OCaml 4.09</li>
</ul>

</div></section>

<a name="67c17de5f01e915bec732cebf6c25e8f"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://ocsigen.github.io/blog/2020/01/20/release/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Focsigen.github.io%2Fblog%2F2020%2F01%2F20%2Frelease%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2367c17de5f01e915bec732cebf6c25e8f&amp;t=Ocsigen+Start+updated" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2367c17de5f01e915bec732cebf6c25e8f&text=Ocsigen+Start+updated" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://ocsigen.github.io/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://ocsigen.github.io/blog/2020/01/20/release/" target="_blank" title="Go to the original post">Ocsigen Start updated</a><span class="additional-info"> — Ocsigen blog (The Ocsigen Team), Jan 20, 2020</span></h1><div class="planet-post"><p>New release: Ocsigen Start 2.15</p>

<p><a href="https://ocsigen.org/ocsigen-start/">Ocsigen Start</a> is a template for client-server Web and/or mobile app in OCaml or ReasonML.
It contains many standard features like user management, notifications, and many code examples.
Use it to <a href="https://ocsigen.org/tuto/latest/manual/start">learn Web/mobile development in OCaml</a> or to quickly create your own Minimum Viable Product.
<a href="https://ocsigen-1.inria.fr/ocsigen-start/demo/">See an online demo</a>.</p>

<p>Last features include:</p>
<ul>
  <li>Get rid of all remaining Camlp4 code</li>
  <li>compatibility with OCaml 4.09</li>
</ul>

</div></section>

<a name="80693a58dae0b4f453be24781f23d27b"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://www.ocamlpro.com/2020/01/16/opam-2-0-6-release/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.ocamlpro.com%2F2020%2F01%2F16%2Fopam-2-0-6-release%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2380693a58dae0b4f453be24781f23d27b&amp;t=opam+2.0.6+release" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2380693a58dae0b4f453be24781f23d27b&text=opam+2.0.6+release" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://www.ocamlpro.com/feed/" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://www.ocamlpro.com/2020/01/16/opam-2-0-6-release/" target="_blank" title="Go to the original post">opam 2.0.6 release</a><span class="additional-info"> — OCamlPro, Jan 16, 2020</span></h1><div class="planet-post"><div id="ocamlorg-post17"><p>We are pleased to announce the minor release of <a href="https://github.com/ocaml/opam/releases/tag/2.0.6">opam 2.0.6</a>.</p>
<p>This new version contains some small <a href="https://github.com/ocaml/opam/pull/3973">backported</a> fixes and build update:</p>
<ul>
<li>Don’t remove git cache objects that may be used [<a href="https://github.com/ocaml/opam/pull/3831">#3831</a> <a href="https://github.com/AltGr">@AltGr</a>]</li>
<li>Don’t include .gitattributes in index.tar.gz [<a href="https://github.com/ocaml/opam/pull/3873">#3873</a> <a href="https://github.com/dra27">@dra27</a>]</li>
<li>Update FAQ uri [<a href="https://github.com/ocaml/opam/pull/3941">#3941</a> <a href="https://github.com/dra27">@dra27</a>]</li>
<li>Lock: add warning in case of missing locked file [<a href="https://github.com/ocaml/opam/pull/3939">#3939</a> <a href="https://github.com/rjbou">@rjbou</a>]</li>
<li>Directory tracking: fix cached entries retrieving with precise tracking [<a href="https://github.com/ocaml/opam/pull/4038">#4038</a> <a href="https://github.com/hannesm">@hannesm</a>]</li>
<li>Build:
<ul>
<li>Add sanity checks [<a href="https://github.com/ocaml/opam/pull/3934">#3934</a> <a href="https://github.com/dra27">@dra27</a>]</li>
<li>Build man pages …</li></ul></li></ul><a href="#80693a58dae0b4f453be24781f23d27b" onclick="switchContent('ocamlorg-post17','ocamlorg-post18')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post18" style="display: none"><p>We are pleased to announce the minor release of <a href="https://github.com/ocaml/opam/releases/tag/2.0.6">opam 2.0.6</a>.</p>
<p>This new version contains some small <a href="https://github.com/ocaml/opam/pull/3973">backported</a> fixes and build update:</p>
<ul>
<li>Don’t remove git cache objects that may be used [<a href="https://github.com/ocaml/opam/pull/3831">#3831</a> <a href="https://github.com/AltGr">@AltGr</a>]</li>
<li>Don’t include .gitattributes in index.tar.gz [<a href="https://github.com/ocaml/opam/pull/3873">#3873</a> <a href="https://github.com/dra27">@dra27</a>]</li>
<li>Update FAQ uri [<a href="https://github.com/ocaml/opam/pull/3941">#3941</a> <a href="https://github.com/dra27">@dra27</a>]</li>
<li>Lock: add warning in case of missing locked file [<a href="https://github.com/ocaml/opam/pull/3939">#3939</a> <a href="https://github.com/rjbou">@rjbou</a>]</li>
<li>Directory tracking: fix cached entries retrieving with precise tracking [<a href="https://github.com/ocaml/opam/pull/4038">#4038</a> <a href="https://github.com/hannesm">@hannesm</a>]</li>
<li>Build:
<ul>
<li>Add sanity checks [<a href="https://github.com/ocaml/opam/pull/3934">#3934</a> <a href="https://github.com/dra27">@dra27</a>]</li>
<li>Build man pages using dune [<a href="https://github.com/ocaml/opam/issues/3902">#3902</a>] #dra27]</li>
<li>Add patch and bunzip check for make cold [<a href="https://github.com/ocaml/opam/pull/4006">#4006</a> <a href="https://github.com/rjbou">@rjbou</a> &#8211; fix <a href="https://github.com/ocaml/opam/issues/3842">#3842</a>]</li>
</ul>
</li>
<li>Shell:
<ul>
<li>fish: add colon for fish manpath [<a href="https://github.com/ocaml/opam/pull/3886">#3886</a> <a href="https://github.com/rjbou">@rjbou</a> &#8211; fix <a href="https://github.com/ocaml/opam/issues/3878">#3878</a>]</li>
</ul>
</li>
<li>Sandbox:
<ul>
<li>Add dune cache as rw [<a href="https://github.com/ocaml/opam/pull/4019">#4019</a> <a href="https://github.com/rjbou">@rjbou</a> &#8211; fix <a href="https://github.com/ocaml/opam/issues/4012">#4012</a>]</li>
<li>Do not fail if $HOME/.ccache is missing [<a href="https://github.com/ocaml/opam/pull/3957">#3957</a> <a href="https://github.com/mseri">@mseri</a>]</li>
</ul>
</li>
<li>opam-devel file: avoid copying extraneous files in opam-devel example [<a href="https://github.com/ocaml/opam/pull/3999">#3999</a> <a href="https://github.com/maroneze">@maroneze</a>]</li>
</ul>
<p>As <strong>sandbox scripts</strong> have been updated, don’t forget to run <code>opam init --reinit -ni</code> to update yours.</p>
<blockquote><p>Note: To homogenise macOS name on system detection, we decided to keep <code>macos</code>, and convert <code>darwin</code> to <code>macos</code> in opam. For the moment, to not break jobs &amp; CIs, we keep uploading <code>darwin</code> &amp; <code>macos</code> binaries, but from the 2.1.0 release, only <code>macos</code> ones will be kept.</p></blockquote>
<hr/>
<p>Installation instructions (unchanged):</p>
<ol type="1">
<li>From binaries: run
<pre><code>sh &lt;(curl -sL https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh)</code></pre>
<p>or download manually from <a href="https://github.com/ocaml/opam/releases/tag/2.0.6">the Github “Releases” page</a> to your PATH. In this case, don’t forget to run <code>opam init --reinit -ni</code> to enable sandboxing if you had version 2.0.0~rc manually installed or to update you sandbox script.</p></li>
<li>From source, using opam:
<pre><code>opam update; opam install opam-devel</code></pre>
<p>(then copy the opam binary to your PATH as explained, and don’t forget to run <code>opam init --reinit -ni</code> to enable sandboxing if you had version 2.0.0~rc manually installed or to update you sandbox script)</p></li>
<li>From source, manually: see the instructions in the <a href="https://github.com/ocaml/opam/tree/2.0.6#compiling-this-repo">README</a>.</li>
</ol>
<p>We hope you enjoy this new minor version, and remain open to <a href="https://github.com/ocaml/opam/issues">bug reports</a> and <a href="https://github.com/ocaml/opam/issues">suggestions</a>.</p>
<blockquote><p>NOTE: this article is cross-posted on <a href="https://opam.ocaml.org/blog/">opam.ocaml.org</a> and <a href="http://www.ocamlpro.com/category/blog/">ocamlpro.com</a>. Please head to the latter for the comments!</p>
<div class="c-message_kit__gutter__right" data-qa="message_content">
<div class="c-message_kit__blocks c-message_kit__blocks--rich_text">
<div class="c-message__message_blocks c-message__message_blocks--rich_text">
<div class="p-block_kit_renderer" data-qa="block-kit-renderer">
<div class="p-block_kit_renderer__block_wrapper p-block_kit_renderer__block_wrapper--first">
<div class="p-rich_text_block" dir="auto">
<div class="p-rich_text_section">If you need more opam in your life, <a href="http://www.ocamlpro.com/wp-content/uploads/2019/11/ocaml-opam.pdf">print our cheat sheet</a>!</div>
</div>
</div>
</div>
</div>
</div>
</div>
</blockquote>
<a href="#80693a58dae0b4f453be24781f23d27b" onclick="switchContent('ocamlorg-post18','ocamlorg-post17')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="4fee4d5f63e1bee8c53dcf4fc244ccf7"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://opam.ocaml.org/blog/opam-2-0-6/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fopam.ocaml.org%2Fblog%2Fopam-2-0-6%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%234fee4d5f63e1bee8c53dcf4fc244ccf7&amp;t=opam+2.0.6+release" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%234fee4d5f63e1bee8c53dcf4fc244ccf7&text=opam+2.0.6+release" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://opam.ocaml.org/blog/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://opam.ocaml.org/blog/opam-2-0-6/" target="_blank" title="Go to the original post">opam 2.0.6 release</a><span class="additional-info"> — OCaml Platform (Raja Boujbel - OCamlPro, Louis Gesbert - OCamlPro), Jan 16, 2020</span></h1><div class="planet-post"><div id="ocamlorg-post19">

<p>We are pleased to announce the minor release of <a href="https://github.com/ocaml/opam/releases/tag/2.0.6">opam 2.0.6</a>.</p>
<p>This new version contains some small <a href="https://github.com/ocaml/opam/pull/3973">backported</a> fixes and build update:</p>
<ul><li>Don't remove git cache objects that may be used [<a href="https://github.com/ocaml/opam/pull/3831">#3831</a> <a href="https://github.com/AltGr">@AltGr</a>]</li><li>Don't include .gitattributes in index.tar.gz [<a href="https://github.com/ocaml/opam/pull/3873">#3873</a> <a href="https://github.com/dra27">@dra27</a>]</li><li>Update FAQ uri [<a href="https://github.com/ocaml/opam/pull/3941">#3941</a> <a href="https://github.com/dra27">@dra27</a>]</li><li>Lock: add warning in case of missing locked file [<a href="https://github.com/ocaml/opam/pull/3939">#3939</a> <a href="https://github.com/rjbou">@rjbou</a>]</li><li>Directory tracking: fix cached entries retrieving with precise
 tracking [<a href="https://github.com/ocaml/opam/pull/4038">#4038</a> <a href="https://github.com/hannesm">@hannesm</a>]</li><li>Build:<ul><li>Add sanity checks [<a href="https://github.com/ocaml/opam/pull/3934">#3934</a> <a href="https://github.com/dra27">@dra27</a>]</li><li>Build man pages using dune…</li></ul></li></ul><a href="#4fee4d5f63e1bee8c53dcf4fc244ccf7" onclick="switchContent('ocamlorg-post19','ocamlorg-post20')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post20" style="display: none">

<p>We are pleased to announce the minor release of <a href="https://github.com/ocaml/opam/releases/tag/2.0.6">opam 2.0.6</a>.</p>
<p>This new version contains some small <a href="https://github.com/ocaml/opam/pull/3973">backported</a> fixes and build update:</p>
<ul><li>Don't remove git cache objects that may be used [<a href="https://github.com/ocaml/opam/pull/3831">#3831</a> <a href="https://github.com/AltGr">@AltGr</a>]</li><li>Don't include .gitattributes in index.tar.gz [<a href="https://github.com/ocaml/opam/pull/3873">#3873</a> <a href="https://github.com/dra27">@dra27</a>]</li><li>Update FAQ uri [<a href="https://github.com/ocaml/opam/pull/3941">#3941</a> <a href="https://github.com/dra27">@dra27</a>]</li><li>Lock: add warning in case of missing locked file [<a href="https://github.com/ocaml/opam/pull/3939">#3939</a> <a href="https://github.com/rjbou">@rjbou</a>]</li><li>Directory tracking: fix cached entries retrieving with precise
 tracking [<a href="https://github.com/ocaml/opam/pull/4038">#4038</a> <a href="https://github.com/hannesm">@hannesm</a>]</li><li>Build:<ul><li>Add sanity checks [<a href="https://github.com/ocaml/opam/pull/3934">#3934</a> <a href="https://github.com/dra27">@dra27</a>]</li><li>Build man pages using dune [<a href="https://github.com/ocaml/opam/issues/3902">#3902</a> ]</li><li>Add patch and bunzip check for make cold [<a href="https://github.com/ocaml/opam/pull/4006">#4006</a> <a href="https://github.com/rjbou">@rjbou</a> - fix <a href="https://github.com/ocaml/opam/issues/3842">#3842</a>]</li></ul></li><li>Shell:<ul><li>fish: add colon for fish manpath [<a href="https://github.com/ocaml/opam/pull/3886">#3886</a> <a href="https://github.com/rjbou">@rjbou</a> - fix <a href="https://github.com/ocaml/opam/issues/3878">#3878</a>]</li></ul></li><li>Sandbox:<ul><li>Add dune cache as rw [<a href="https://github.com/ocaml/opam/pull/4019">#4019</a> <a href="https://github.com/rjbou">@rjbou</a> - fix <a href="https://github.com/ocaml/opam/issues/4012">#4012</a>]</li><li>Do not fail if $HOME/.ccache is missing [<a href="https://github.com/ocaml/opam/pull/3957">#3957</a> <a href="https://github.com/mseri">@mseri</a>]</li></ul></li><li>opam-devel file: avoid copying extraneous files in opam-devel example [<a href="https://github.com/ocaml/opam/pull/3999">#3999</a> <a href="https://github.com/maroneze">@maroneze</a>]</li></ul>

<p>As <strong>sandbox scripts</strong> have been updated, don't forget to run <code>opam init --reinit -ni</code> to update yours.</p>
<blockquote><p>Note: To homogenise macOS name on system detection, we decided to keep <code>macos</code>, and convert <code>darwin</code> to <code>macos</code> in opam. For the moment, to not break jobs &amp; CIs, we keep uploading <code>darwin</code> &amp; <code>macos</code> binaries, but from the 2.1.0 release, only <code>macos</code> ones will be kept.</p>
</blockquote>

<p></p><hr/>Installation instructions (unchanged):
<ol><li><p>From binaries: run</p>
<pre><code>sh &lt;(curl -sL https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh)</code></pre>

<p>or download manually from <a href="https://github.com/ocaml/opam/releases/tag/2.0.6">the Github &quot;Releases&quot; page</a> to your PATH. In this case, don't forget to run <code>opam init --reinit -ni</code> to enable sandboxing if you had version 2.0.0~rc manually installed or to update you sandbox script.</p>
</li><li><p>From source, using opam:</p>
<pre><code>opam update; opam install opam-devel</code></pre>

<p>(then copy the opam binary to your PATH as explained, and don't forget to run <code>opam init --reinit -ni</code> to enable sandboxing if you had version 2.0.0~rc manually installed or to update you sandbox script)</p>
</li><li><p>From source, manually: see the instructions in the <a href="https://github.com/ocaml/opam/tree/2.0.6#compiling-this-repo">README</a>.</p>
</li></ol>

<p>We hope you enjoy this new minor version, and remain open to <a href="https://github.com/ocaml/opam/issues">bug reports</a> and <a href="https://github.com/ocaml/opam/issues">suggestions</a>.</p>
<blockquote><p>NOTE: this article is cross-posted on <a href="https://opam.ocaml.org/blog/">opam.ocaml.org</a> and <a href="http://www.ocamlpro.com/category/blog/">ocamlpro.com</a>. Please head to the latter for the comments!</p>
</blockquote><a href="#4fee4d5f63e1bee8c53dcf4fc244ccf7" onclick="switchContent('ocamlorg-post20','ocamlorg-post19')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="445990f6c1c34e1c6bb82b4f8ff94c43"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://mirage.io/blog/ccc-2019-leipzig" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fmirage.io%2Fblog%2Fccc-2019-leipzig" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23445990f6c1c34e1c6bb82b4f8ff94c43&amp;t=Hackers+and+climate+activists+join+forces+in+Leipzig" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23445990f6c1c34e1c6bb82b4f8ff94c43&text=Hackers+and+climate+activists+join+forces+in+Leipzig" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://mirage.io/blog/atom.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://mirage.io/blog/ccc-2019-leipzig" target="_blank" title="Go to the original post">Hackers and climate activists join forces in Leipzig</a><span class="additional-info"> — MirageOS (Damien Leloup), Jan 08, 2020</span></h1><div class="planet-post"><div id="ocamlorg-post21"><h1>Hackers and climate activists join forces in Leipzig</h1>

<p><em>By Damien Leloup, special correspondent, Le Monde. Originally <a href="https://www.lemonde.fr/pixels/article/2019/12/30/a-leipzig-hackers-et-militants-pour-le-climat-font-front-commun_6024362_4408996.html">published</a> by Le Monde on December 30, 2019. English translation by the MirageOS Core Team.</em></p>
<p><strong>The Chaos Communication Congress, the world's largest self-managed event dedicated to IT security, hosted its 36th edition this weekend in Germany.</strong></p>
<p>In front of Leipzig station, around fifty students and high school students are gathered.  It's Sunday, but the local branch of the Fridays for F…</p><a href="#445990f6c1c34e1c6bb82b4f8ff94c43" onclick="switchContent('ocamlorg-post21','ocamlorg-post22')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post22" style="display: none"><h1>Hackers and climate activists join forces in Leipzig</h1>

<p><em>By Damien Leloup, special correspondent, Le Monde. Originally <a href="https://www.lemonde.fr/pixels/article/2019/12/30/a-leipzig-hackers-et-militants-pour-le-climat-font-front-commun_6024362_4408996.html">published</a> by Le Monde on December 30, 2019. English translation by the MirageOS Core Team.</em></p>
<p><strong>The Chaos Communication Congress, the world's largest self-managed event dedicated to IT security, hosted its 36th edition this weekend in Germany.</strong></p>
<p>In front of Leipzig station, around fifty students and high school students are gathered.  It's Sunday, but the local branch of the Fridays for Future movement, which organizes demonstrations on Fridays at the call of activist Greta Thunberg, made an exception to its usual calendar to take advantage of the presence, a few kilometers from there, of the Chaos Communication Congress (CCC).</p>
<p>Organized each year for thirty-six years, this gigantic gathering of hackers and activists - 18,000 participants, dozens of conference talks around the clock - invades the Leipzig convention center for four days, in an atmosphere that is both anarcho-libertarian and very family oriented.  For the first time, the slogan of the 2019 edition is devoted to the environment: “Resource exhaustion”, a reference both to a computer <a href="https://en.wikipedia.org/wiki/Resource_exhaustion_attack">attack technique</a> and to the preservation of the planet.</p>
<p><em>&quot;It makes sense: it's a major issue, and the environmental movement is a highlight of the year, isn't it?&quot;</em>, notes, hair dyed pink and megaphone in hand, Rune, one of the organizers of the event. <em>“In any case, we are very happy that the CCC opened its doors to us and supports us.&quot;</em></p>
<p>The conference program gave pride of place to ecological themes and organizations such as Fridays for Future or Extinction Rebellion. These themes were all features in the main talks.  The audience for the event, marked on the far left, is quite sensitive to environmental issues.  <a href="https://www.fridaysforfuture.org/">Fridays for Future's</a> review of the year was sold out;  the track where some scientists explained how they build their climate models was full and was not able to host all the attendees.</p>
<h2>Safety of power plants and the right to repair</h2>

<p>But if the CCC has given a lot of space to environmental issues, it has done it in its own way.  In this mecca of cyber-security, we could for example discover long lists of vulnerabilities affecting the on-board systems used to manage the turbines of power plants. <em>Do not</em> panic: <em>&quot;These flaws do not block a power plant, or cut the power of a city,&quot;</em> relativized Radu Motspan, the author of the study.  Some of them have been corrected;  for others, it is up to plant managers to carry out verifications.  The researcher and his associates produced a small turnkey guide to help them: <em>“No need to hire expensive consultants, you can do everything yourself.&quot;</em></p>
<p>This “do it yourself” spirit, omnipresent in hacker culture in general and at the CCC in particular, easily lends itself to an environmental translation.  The collective <a href="https://runder-tisch-reparatur.de/">Runder Tisch Reparatur</a>, which campaigns for the adoption at European level of a &quot;right to repair&quot;, was thus invited for the first time to the conference.  The philosophy of the movement, which aims above all to reduce the amount of waste produced by obsolescence whether or not it is programmed, is very similar to that of the free software movement, say Eduard and Erik, who run the stand of the association. <em>&quot;An object that you cannot repair does not really belong to you,&quot;</em> they believe, just as the promoters of free software believe that software that you cannot modify yourself deprives you of certain freedoms.</p>
<p>But the main issue, at the heart of many talks during the four days of the CCC, is that of the energy impact of the Internet.  No one in the aisles of the Leipzig congress center plans to reduce their use of the Internet;  but everyone concedes that the network consumes a lot of electricity unnecessarily, or uses too much fossil energy.  <em>&quot;There are simple things to do to improve the carbon footprint of a site or service,&quot;</em> said Chris Adams, environmental activist and member of the Green Web Foundation.  <em>“If your service uses Amazon Web Service [AWS, a very popular cloud service], you can choose the data center you want to use, for example.  The one assigned to you by default may be in a country that produces little renewable electricity and uses a lot of coal for its power plants… ”</em></p>
<p>Existing non-digital systems (like boilers) already have ways to function more efficiently, such as off-peak hours at night, when electricity is both cheaper and more eco-friendly. There are equivalent options for more modern, digital systems, for instance: Chris Adams advocates the use of the <a href="http://ceur-ws.org/Vol-2382/ICT4S2019_paper_28.pdf">Low Carbon Kubernetes Scheduler</a>, an orchestration tool which allows to optimise the power consumption of a server in order to reduce its environmental impact.</p>
<h2>Safety and minimum consumption, get the best of both worlds</h2>

<p>Despite everything, the “greenest” electricity remains that which we do not consume in the first place.  There too, promising solutions exist: <a href="https://hannes.nqsb.io/">Hannes Mehnert</a>, a German computer scientist, presented at the opening of the CCC the MirageOS project, an operating system for ultra-minimalist servers, coded in a language renowned for its lightness, and which runs each process in a dedicated virtual machine.  A radical approach - and reserved for connoisseurs - which allows the software to embed only the bare minimum of lines of code in each compiled version. <em>&quot;Reducing complexity mathematically reduces the number of calculation operations required,&quot;</em> explains Mehnert.  Result: <em>&quot;A carbon footprint that drops drastically, with ten times less computing power used by the processor, and up to twenty-five times less memory used&quot;</em>, according to his measurements.</p>
<p>Above all, and this is a strong argument at a conference dedicated to computer security, minimalism is also a real advantage in terms of potential vulnerabilities: the more compact the code is, the less it risks containing flaws or errors.  And such systems are also better protected and safer than more conventional systems, as they are not vulnerable to memory-safety issues.</p>
<p>But the collaboration between environmentalists and privacy advocates seemed much broader than just focusing on technical issues. That mix was everywhere: for instance the corridor walls had graffiti concerned with the the excessive consumption of CO2 on the planet close to others highlighting the fact that every human being generates, on average, 1.7 MB of data per second. The posters of the anarchist or anti-fascist movements were also mixed with the flyers of the collective Hackers against <a href="https://hacc.uber.space/Main_Page">Climate Change</a>, which attracted the curious with a joke typical of the place: <em>&quot;cli / mate crisis is real&quot;</em>, in reference to Club-Mate, an ubiquitous drink at the event.</p>
<p>This community of views between hackers and climate activists comes as little surprise in Germany, where both movements are very present, and even less in Leipzig, the flagship city of the former GDR where pre-Internet mass surveillance tools from the Stasi were also directed against environmental activists in the 1980s. Some environmental movements feel naturally close to the anarchist spirit of the German hackers of the Chaos Computer Club, which organizes the CCC: a talk by <a href="https://rebellion.earth/">Extinction Rebellion</a> detailed the security measures they took to ensure their privacy, and how they didn't depend on third-party tools from Facebook, Google or Amazon - responsible, in their eyes, both for mass surveillance and <em>green washing</em>.</p>
<p>However, in this atmosphere of global collaboration some questions remained unanswered.  In some specific cases, better IT security can also consume more resources.  A talk dedicated to encrypted messaging thus presented many tools which make it possible to reinforce the confidentiality of exchanges, but also require using more computing power, to encrypt or decrypt messages, or even request the sending of large quantities of data to scramble the origin or volume of a message.  This first CCC under the sign of environmental protection did not really address this contradiction - pending, perhaps, a next edition?</p>
<a href="#445990f6c1c34e1c6bb82b4f8ff94c43" onclick="switchContent('ocamlorg-post22','ocamlorg-post21')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="4c6a491ed746040180d58ec24df45dfc"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://hannes.nqsb.io/Posts/DnsServer" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fhannes.nqsb.io%2FPosts%2FDnsServer" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%234c6a491ed746040180d58ec24df45dfc&amp;t=Deploying+authoritative+OCaml-DNS+servers+as+MirageOS+unikernels" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%234c6a491ed746040180d58ec24df45dfc&text=Deploying+authoritative+OCaml-DNS+servers+as+MirageOS+unikernels" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://hannes.nqsb.io/atom" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://hannes.nqsb.io/Posts/DnsServer" target="_blank" title="Go to the original post">Deploying authoritative OCaml-DNS servers as MirageOS unikernels</a><span class="additional-info"> — Hannes Mehnert (hannes), Dec 23, 2019</span></h1><div class="planet-post"><div id="ocamlorg-post23">

<h2>Goal</h2>

<p>Have your domain served by OCaml-DNS authoritative name servers. Data is stored in a git remote, and let&#39;s encrypt certificates can be requested to DNS. This software is deployed since more than two years for several domains such as <code>nqsb.io</code> and <code>robur.coop</code>. This present the authoritative server side, and certificate library of the OCaml-DNS implementation formerly known as <a href="https://hannes.nqsb.io/Posts/DNS">µDNS</a>.</p>
<h2>Prerequisites</h2>

<p>You need to own a domain, and be able to delegate the name service to your own servers.
You…</p><a href="#4c6a491ed746040180d58ec24df45dfc" onclick="switchContent('ocamlorg-post23','ocamlorg-post24')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post24" style="display: none">

<h2>Goal</h2>

<p>Have your domain served by OCaml-DNS authoritative name servers. Data is stored in a git remote, and let&#39;s encrypt certificates can be requested to DNS. This software is deployed since more than two years for several domains such as <code>nqsb.io</code> and <code>robur.coop</code>. This present the authoritative server side, and certificate library of the OCaml-DNS implementation formerly known as <a href="https://hannes.nqsb.io/Posts/DNS">µDNS</a>.</p>
<h2>Prerequisites</h2>

<p>You need to own a domain, and be able to delegate the name service to your own servers.
You also need two spare public IPv4 addresses (in different /24 networks) for your name servers.
A git server or remote repository reachable via git over ssh.
Servers which support <a href="https://github.com/solo5/solo5">solo5</a> guests, and have the corresponding tender installed.
A computer with <a href="https://opam.ocaml.org">opam</a> (&gt;= 2.0.0) installed.</p>
<h2>Data preparation</h2>

<p>Figure out a way to get the DNS entries of your domain in a <a href="https://tools.ietf.org/html/rfc1034">&quot;master file format&quot;</a>, i.e. what bind uses.</p>
<p>This is a master file for the <code>mirage</code> domain, defining <code>$ORIGIN</code> to avoid typing the domain name after each hostname (use <code>@</code> if you need the domain name only; if you need to refer to a hostname in a different domain end it with a dot (<code>.</code>), i.e. <code>ns2.foo.com.</code>). The default time to live <code>$TTL</code> is an hour (3600 seconds).
The zone contains a <a href="https://tools.ietf.org/html/rfc1035#section-3.3.13">start of authority (<code>SOA</code>) record</a> containing the nameserver, hostmaster, serial, refresh, retry, expiry, and minimum.
Also, a single <a href="https://tools.ietf.org/html/rfc1035#section-3.3.11">name server (<code>NS</code>) record</a> <code>ns1</code> is specified with an accompanying <a href="https://tools.ietf.org/html/rfc1035#section-3.4.1">address (<code>A</code>) records</a> pointing to their IPv4 address.</p>
<pre class="shell"><code class="shell">git-repo&gt; cat mirage
$ORIGIN mirage.
$TTL 3600
@    SOA    ns1    hostmaster    1    86400    7200    1048576    3600
@    NS    ns1
ns1     A       127.0.0.1
www    A    1.1.1.1
git-repo&gt; git add mirage &amp;&amp; git commit -m initial &amp;&amp; git push</code></pre>

<h2>Installation</h2>

<p>On your development machine, you need to install various OCaml packages. You don&#39;t need privileged access if common tools (C compiler, make, libgmp) are already installed. You have <code>opam</code> installed.</p>
<p>Let&#39;s create a fresh <code>switch</code> for the DNS journey:</p>
<pre class="shell"><code class="shell">$ opam init
$ opam update
$ opam switch create udns 4.09.0
# waiting a bit, a fresh OCaml compiler is getting bootstrapped
$ eval `opam env` #sets some environment variables</code></pre>

<p>The last command set environment variables in your current shell session, please use the same shell for the commands following (or run <code>eval $(opam env)</code> in another shell and proceed in there - the output of <code>opam switch</code> sohuld point to <code>udns</code>).</p>
<h3>Validation of our zonefile</h3>

<p>First let&#39;s check that OCaml-DNS can parse our zonefile:</p>
<pre class="shell"><code class="shell">$ opam install dns-cli #installs ~/.opam/udns/bin/ozone and other binaries
$ ozone &lt;git-repo&gt;/mirage # see ozone --help
successfully checked zone</code></pre>

<p>Great. Error reporting is not great, but line numbers are indicated (<code>ozone: zone parse problem at line 3: syntax error</code>), <a href="https://github.com/mirage/ocaml-dns/tree/v4.2.0/zone">lexer and parser are lex/yacc style</a> (PRs welcome).</p>
<p>FWIW, <code>ozone</code> accepts <code>--old &lt;filename&gt;</code> to check whether an update from the old zone to the new is fine. This can be used as <a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">pre-commit hook</a> in your git repository to avoid bad parse states in your name servers.</p>
<h3>Getting the primary up</h3>

<p>The next step is to compile the primary server and run it to serve the domain data. Since the git-via-ssh client is not yet released, we need to add a custom opam repository to this switch.</p>
<pre class="shell"><code class="shell"># git via ssh is not yet released, but this opam repository contains the branch information
$ opam repo add git-ssh git+https://github.com/roburio/git-ssh-dns-mirage3-repo.git
# get the `mirage` application via opam
$ opam install lwt mirage

# get the source code of the unikernels
$ git clone -b future https://github.com/roburio/unikernels.git
$ cd unikernels/primary-git

# let&#39;s build the server first as unix application
$ mirage configure --prng fortuna #--no-depext if you have all system dependencies
$ make depend
$ make

# run it
$ ./primary_git
# starts a unix process which clones https://github.com/roburio/udns.git
# attempts to parse the data as zone files, and fails on parse error
$ ./primary-git --remote=https://my-public-git-repository
# this should fail with ENOACCESS since the DNS server tries to listen on port 53

# which requires a privileged user, i.e. su, sudo or doas
$ sudo ./primary-git --remote=https://my-public-git-repository
# leave it running, run the following programs in a different shell

# test it
$ host ns1.mirage 127.0.0.1
ns1.mirage has address 127.0.0.1
$ dig any mirage @127.0.0.1
# a DNS packet printout with all records available for mirage</code></pre>

<p>That&#39;s exciting, the DNS server serving answers from a remote git repository.</p>
<h3>Securing the git access with ssh</h3>

<p>Let&#39;s authenticate the access by using ssh, so we feel ready to push data there as well. The primary-git unikernel already includes an experimental <a href="https://github.com/haesbaert/awa-ssh">ssh client</a>, all we need to do is setting up credentials - in the following a RSA keypair and the server fingerprint.</p>
<pre class="shell"><code class="shell"># collect the RSA host key fingerprint
$ ssh-keyscan &lt;git-server&gt; &gt; /tmp/git-server-public-keys
$ ssh-keygen -l -E sha256 -f /tmp/git-server-public-keys | grep RSA
2048 SHA256:a5kkkuo7MwTBkW+HDt4km0gGPUAX0y1bFcPMXKxBaD0 &lt;git-server&gt; (RSA)
# we&#39;re interested in the SHA256:yyy only

# generate a ssh keypair
$ awa_gen_key # installed by the make depend step above in ~/.opam/udns/bin
seed is pIKflD07VT2W9XpDvqntcmEW3OKlwZL62ak1EZ0m
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC5b2cSSkZ5/MAu7pM6iJLOaX9tJsfA8DB1RI34Zygw6FA0y8iisbqGCv6Z94ZxreGATwSVvrpqGo5p0rsKs+6gQnMCU1+sOC4PRlxy6XKgj0YXvAZcQuxwmVQlBHshuq0CraMK9FASupGrSO8/dW30Kqy1wmd/IrqW9J1Cnw+qf0C/VEhIbo7btlpzlYpJLuZboTvEk1h67lx1ZRw9bSPuLjj665yO8d0caVIkPp6vDX20EsgITdg+cFjWzVtOciy4ETLFiKkDnuzHzoQ4EL8bUtjN02UpvX2qankONywXhzYYqu65+edSpogx2TuWFDJFPHgcyO/ZIMoluXGNgQlP awa@awa.local
# please run your own awa_gen_key, don&#39;t use the numbers above</code></pre>

<p>The public key needs is in standard OpenSSH format and needs to be added to the list of accepted keys on your server - the exact steps depend on your git server, if you&#39;re running your own with <a href="https://github.com/tv42/gitosis">gitosis</a>, add it as new public key file and grant that key access to the data repository. If you use gitlab or github, you may want to create a new user account and with the generated key.</p>
<p>The private key is not displayed, but only the seed required to re-generate it, when using the same random number generator, in our case <a href="http://mirleft.github.io/ocaml-nocrypto/doc/Nocrypto.Rng.html">fortuna implemented by nocrypto</a> - used by both <code>awa_gen_key</code> and <code>primary_git</code>. The seed is provided as command-line argument while starting <code>primary_git</code>:</p>
<pre class="shell"><code class="shell"># execute with git over ssh, authenticator from ssh-keyscan, seed from awa_gen_key
$ ./primary_git --authenticator=SHA256:a5kkkuo7MwTBkW+HDt4km0gGPUAX0y1bFcPMXKxBaD0 --seed=pIKflD07VT2W9XpDvqntcmEW3OKlwZL62ak1EZ0m --remote=ssh://git@&lt;git-server&gt;/repo-name.git
# started up, you can try the host and dig commands from above if you like</code></pre>

<p>To wrap up, we now have a primary authoritative name server for our zone running as Unix process, which clones a remote git repository via ssh on startup and then serves it.</p>
<h3>Authenticated data updates</h3>

<p>Our remote git repository is the source of truth, if you need to add a DNS entry to the zone, you git pull, edit the zone file, remember to increase the serial in the SOA line, run <code>ozone</code>, git commit and push to the repository.</p>
<p>So, the <code>primary_git</code> needs to be informed of git pushes. This requires a communication channel from the git server (or somewhere else, e.g. your laptop) to the DNS server. I prefer in-protocol solutions over adding yet another protocol stack, no way my DNS server will talk HTTP REST.</p>
<p>The DNS protocol has an extension for <a href="https://tools.ietf.org/html/rfc1996">notifications of zone changes</a> (as a DNS packet), usually used between the primary and secondary servers. The <code>primary_git</code> accepts these notify requests (i.e. bends the standard slightly), and upon receival pulls the remote git repository, and serves the fresh zone files. Since a git pull may be rather excessive in terms of CPU cycles and network bandwidth, only authenticated notifications are accepted.</p>
<p>The DNS protocol specifies in another extension <a href="https://tools.ietf.org/html/rfc2845">authentication (DNS TSIG)</a> with transaction signatures on DNS packets including a timestamp and fudge to avoid replay attacks. As key material hmac secrets distribued to both the communication endpoints are used.</p>
<p>To recap, the primary server is configured with command line parameters (for remote repository url and ssh credentials), and serves data from a zonefile. If the secrets would be provided via command line, a restart would be necessary for adding and removing keys. If put into the zonefile, they would be publicly served on request. So instead, we&#39;ll use another file, still in zone file format, in the top-level domain <code>_keys</code>, i.e. the <code>mirage._keys</code> file contains keys for the <code>mirage</code> zone. All files ending in <code>._keys</code> are parsed with the normal parser, but put into an authentication store instead of the domain data store, which is served publically.</p>
<p>For encoding hmac secrets into DNS zone file format, the <a href="https://tools.ietf.org/html/rfc4034#section-2"><code>DNSKEY</code></a> format is used (designed for DNSsec). The <a href="https://www.isc.org/bind/">bind</a> software comes with <code>dnssec-keygen</code> and <code>tsig-keygen</code> to generate DNSKEY output: flags is 0, protocol is 3, and algorithm identifier for SHA256 is 163 (SHA384 164, SHA512 165). This is reused by the OCaml DNS library. The key material itself is base64 encoded.</p>
<p>Access control and naming of keys follows the DNS domain name hierarchy - a key has the form name._operation.domain, and has access granted to domain and all subdomains of it. Two operations are supported: update and transfer. In the future there may be a dedicated notify operation, for now we&#39;ll use update. The name part is ignored for the update operation.</p>
<p>Since we now embedd secret information in the git repository, it is a good idea to restrict access to it, i.e. make it private and not publicly cloneable or viewable. Let&#39;s generate a first hmac secret and send a notify:</p>
<pre class="shell"><code class="shell">$ dd if=/dev/random bs=1 count=32 | b64encode -
begin-base64 644 -
kJJqipaQHQWqZL31Raar6uPnepGFIdtpjkXot9rv2xg=
====
[..]
git-repo&gt; echo &quot;personal._update.mirage. DNSKEY 0 3 163 kJJqipaQHQWqZL31Raar6uPnepGFIdtpjkXot9rv2xg=&quot; &gt; mirage._keys
git-repo&gt; git add mirage._keys &amp;&amp; git commit -m &quot;add hmac secret&quot; &amp;&amp; git push

# now we need to restart the primary git to get the git repository with the key
$ ./primary_git --seed=... # arguments from above, remote git, host key fingerprint, private key seed

# now test that a notify results in a git pull
$ onotify 127.0.0.1 mirage --key=personal._update.mirage:SHA256:kJJqipaQHQWqZL31Raar6uPnepGFIdtpjkXot9rv2xg=
# onotify was installed by dns-cli in ~/.opam/udns/bin/onotify, see --help for options
# further changes to the hmac secrets don&#39;t require a restart anymore, a notify packet is sufficient :D</code></pre>

<p>Ok, this onotify command line could be setup as a git post-commit hook, or run manually after each manual git push.</p>
<h3>Secondary</h3>

<p>It&#39;s time to figure out how to integrate the secondary name server. An already existing bind or something else that accepts notifications and issues zone transfers with hmac-sha256 secrets should work out of the box. If you encounter interoperability issues, please get in touch with me.</p>
<p>The <code>secondary</code> subdirectory of the cloned <code>unikernels</code> repository is another unikernel that acts as secondary server. It&#39;s only command line argument is a list of hmac secrets used for authenticating that the received data originates from the primary server. Data is initially transferred by a <a href="https://tools.ietf.org/html/rfc5936">full zone transfer (AXFR)</a>, later updates (upon refresh timer or notify request sent by the primary) use <a href="https://tools.ietf.org/html/rfc1995">incremental (IXFR)</a>. Zone transfer requests and data are authenticated with transaction signatures again.</p>
<p>Convenience by OCaml DNS is that transfer key names matter, and are of the form &lt;primary-ip&gt;.&lt;secondary-ip&gt;._transfer.domain, i.e. <code>1.1.1.1.2.2.2.2._transfer.mirage</code> if the primary server is 1.1.1.1, and the secondary 2.2.2.2. Encoding the IP address in the name allows both parties to start the communication: the secondary starts by requesting a SOA for all domains for which keys are provided on command line, and if an authoritative SOA answer is received, the AXFR is triggered. The primary server emits notification requests on startup and then on every zone change (i.e. via git pull) to all secondary IP addresses of transfer keys present for the specific zone in addition to the notifications to the NS records in the zone.</p>
<pre class="shell"><code class="shell">$ cd ../secondary
$ mirage configure --prng fortuna
# make depend should not be needed since all packages are already installed by the primary-git
$ make
$ ./secondary</code></pre>

<h3>IP addresses and routing</h3>

<p>Both primary and secondary serve the data on the DNS port (53) on UDP and TCP. To run both on the same machine and bind them to different IP addresses, we&#39;ll use a layer 2 network (ethernet frames) with a host system software switch (bridge interface <code>service</code>), the unikernels as virtual machines (or seccomp-sandboxed) via the <a href="https://github.com/solo5/solo5">solo5</a> backend. Using xen is possible as well. As IP address range we&#39;ll use 10.0.42.0/24, and the host system uses the 10.0.42.1.</p>
<p>The primary git needs connectivity to the remote git repository, thus on a laptop in a private network we need network address translation (NAT) from the bridge where the unikernels speak to the Internet where the git repository resides.</p>
<pre class="shell"><code class="shell"># on FreeBSD:
# configure NAT with pf, you need to have forwarding enabled
$ sysctl net.inet.ip.forwarding: 1
$ echo &#39;nat pass on wlan0 inet from 10.0.42.0/24 to any -&gt; (wlan0)&#39; &gt;&gt; /etc/pf.conf
$ service pf restart

# make tap interfaces UP on open()
$ sysctl net.link.tap.up_on_open: 1

# bridge creation, naming, and IP setup
$ ifconfig bridge create
bridge0
$ ifconfig bridge0 name service
$ ifconfig bridge0 10.0.42.1/24

# two tap interfaces for our unikernels
$ ifconfig tap create
tap0
$ ifconfig tap create
tap1
# add them to the bridge
$ ifconfig service addm tap0 addm tap1</code></pre>

<h3>Primary and secondary setup</h3>

<p>Let&#39;s update our zone slightly to reflect the IP changes.</p>
<pre class="shell"><code class="shell">git-repo&gt; cat mirage
$ORIGIN mirage.
$TTL 3600
@    SOA    ns1    hostmaster    2    86400    7200    1048576    3600
@    NS    ns1
@    NS    ns2
ns1     A       10.0.42.2
ns2    A    10.0.42.3

# we also need an additional transfer key
git-repo&gt; cat mirage._keys
personal._update.mirage. DNSKEY 0 3 163 kJJqipaQHQWqZL31Raar6uPnepGFIdtpjkXot9rv2xg=
10.0.42.2.10.0.42.3._transfer.mirage. DNSKEY 0 3 163 cDK6sKyvlt8UBerZlmxuD84ih2KookJGDagJlLVNo20=
git-repo&gt; git commit -m &quot;udpates&quot; . &amp;&amp; git push</code></pre>

<p>Ok, the git repository is ready, now we need to compile the unikernels for the virtualisation target (see <a href="https://mirage.io/wiki/hello-world#Building-for-Another-Backend">other targets</a> for further information).</p>
<pre class="shell"><code class="shell"># back to primary
$ cd ../primary-git
$ mirage configure -t hvt --prng fortuna # or e.g. -t spt (and solo5-spt below)
# installs backend-specific opam packages, recompiles some
$ make depend
$ make
[...]
$ solo5-hvt --net:service=tap0 -- primary_git.hvt --ipv4=10.0.42.2/24 --ipv4-gateway=10.0.42.1 --seed=.. --authenticator=.. --remote=ssh+git://...
# should now run as a virtual machine (kvm, bhyve), and clone the git repository
$ dig any mirage @10.0.42.2
# should reply with the SOA and NS records, and also the name server address records in the additional section

# secondary
$ cd ../secondary
$ mirage configure -t hvt --prng fortuna
$ make
$ solo5-hvt --net:service=tap1 -- secondary.hvt --ipv4=10.0.42.3/24 --keys=10.0.42.2.10.0.42.3._transfer.mirage:SHA256:cDK6sKyvlt8UBerZlmxuD84ih2KookJGDagJlLVNo20=
# an ipv4-gateway is not needed in this setup, but in real deployment later
# it should start up and transfer the mirage zone from the primary

$ dig any mirage @10.0.42.3
# should now output the same information as from 10.0.42.2

# testing an update and propagation
# edit mirage zone, add a new record and increment the serial number
git-repo&gt; echo &quot;foo A 127.0.0.1&quot; &gt;&gt; mirage
git-repo&gt; vi mirage &lt;- increment serial
git-repo&gt; git commit -m &#39;add foo&#39; . &amp;&amp; git push
$ onotify 10.0.42.2 mirage --key=personal._update.mirage:SHA256:kJJqipaQHQWqZL31Raar6uPnepGFIdtpjkXot9rv2xg=

# now check that it worked
$ dig foo.mirage @10.0.42.2 # primary
$ dig foo.mirage @10.0.42.3 # secondary got notified and transferred the zone</code></pre>

<p>You can also check the behaviour when restarting either of the VMs, whenever the primary is available the zone is synchronised. If the primary is down, the secondary still serves the zone. When the secondary is started while the primary is down, it won&#39;t serve any data until the primary is online (the secondary polls periodically, the primary sends notifies on startup).</p>
<h3>Dynamic data updates via DNS, pushed to git</h3>

<p>DNS is a rich protocol, and it also has builtin <a href="https://tools.ietf.org/html/rfc2136">updates</a> that are supported by OCaml DNS, again authenticated with hmac-sha256 and shared secrets. Bind provides the command-line utility <code>nsupdate</code> to send these update packets, a simple <code>oupdate</code> unix utility is available as well (i.e. for integration of dynamic DNS clients). You know the drill, add a shared secret to the primary, git push, notify the primary, and voila we can dynamically in-protocol update. An update received by the primary via this way will trigger a git push to the remote git repository, and notifications to the secondary servers as described above.</p>
<pre class="shell"><code class="shell"># being lazy, I reuse the key above
$ oupdate 10.0.42.2 personal._update.mirage:SHA256:kJJqipaQHQWqZL31Raar6uPnepGFIdtpjkXot9rv2xg= my-other.mirage 1.2.3.4

# let&#39;s observe the remote git
git-repo&gt; git pull
# there should be a new commit generated by the primary
git-repo&gt; git log

# test it, should return 1.2.3.4
$ dig my-other.mirage @10.0.42.2
$ dig my-other.mirage @10.0.42.3</code></pre>

<p>So we can deploy further <code>oupdate</code> (or <code>nsupdate</code>) clients, distribute hmac secrets, and have the DNS zone updated. The source of truth is still the git repository, where the primary-git pushes to. Merge conflicts and timing of pushes is not yet dealt with. They are unlikely to happen since the primary is notified on pushes and should have up-to-date data in storage. Sorry, I&#39;m unsure about the error semantics, try it yourself.</p>
<h3>Let&#39;s encrypt!</h3>

<p><a href="https://letsencrypt.org/">Let&#39;s encrypt</a> is a certificate authority (CA), which certificate is shipped as trust anchor in web browsers. They specified a protocol for <a href="https://tools.ietf.org/html/draft-ietf-acme-acme-05">automated certificate management environment (ACME)</a>, used to get X509 certificates for your services. In the protocol, a certificate signing request (publickey and hostname) is sent to let&#39;s encrypt servers, which sends a challenge to proof the ownership of the hostnames. One widely-used way to solve this challenge is running a web server, another is to serve it as text record from the authoritative DNS server.</p>
<p>Since I avoid persistent storage when possible, and also don&#39;t want to integrate a HTTP client stack in the primary server, I developed a third unikernel that acts as (hidden) secondary server, performs the tedious HTTP communication with let&#39;s encrypt servers, and stores all data in the public DNS zone.</p>
<p>For encoding of certificates, the DANE working group specified <a href="https://tools.ietf.org/html/rfc6698.html#section-7.1">TLSA</a> records in DNS. They are quadruples of usage, selector, matching type, and ASN.1 DER-encoded material. We set usage to 3 (domain-issued certificate), matching type to 0 (no hash), and selector to 0 (full certificate) or 255 (private usage) for certificate signing requests. The interaction is as follows:</p>
<ol><li>Primary, secondary, and let&#39;s encrypt unikernels are running</li><li>A service (<code>ocertify</code>, <code>unikernels/certificate</code>, or the <code>dns-certify.mirage</code> library) demands a TLS certificate, and has a hmac-secret for the primary DNS</li><li>The service generates a certificate signing request with the desired hostname(s), and performs an nsupdate with TLSA 255 &lt;DER encoded signing-request&gt;</li><li>The primary accepts the update, pushes the new zone to git, and sends notifies to secondary and let&#39;s encrypt unikernels which (incrementally) transfer the zone</li><li>The let&#39;s encrypt unikernel notices while transferring the zone a signing request without a certificate, starts HTTP interaction with let&#39;s encrypt</li><li>The let&#39;s encrypt unikernel solves the challenge, sends the response as update of a TXT record to the primary nameserver</li><li>The primary pushes the TXT record to git, and notifies secondaries (which transfer the zone)</li><li>The let&#39;s encrypt servers request the TXT record from either or both authoritative name servers</li><li>The let&#39;s encrypt unikernel polls for the issued certificate and send an update to the primary TLSA 0 &lt;DER encoded certificate&gt;</li><li>The primary pushes the certificate to git, notifies secondaries (which transfer the zone)</li><li>The service polls TLSA records for the hostname, and use it upon retrieval</li></ol>

<p>Note that neither the signing request nor the certificate contain private key material, thus it is fine to serve them publically. Please also note, that the service polls for the certificate for the hostname in DNS, which is valid (start and end date) certificate and uses the same public key, this certificate is used and steps 3-10 are not executed.</p>
<p>The let&#39;s encrypt unikernel does not serve anything, it is a reactive system which acts upon notification from the primary. Thus, it can be executed in a private address space (with a NAT). Since the OCaml DNS server stack needs to push notifications to it, it preserves all incoming signed SOA requests as candidates for notifications on update. The let&#39;s encrypt unikernel ensures to always have a connection to the primary to receive notifications.</p>
<pre class="shell"><code class="shell"># getting let&#39;s encrypt up and running
$ cd ../lets-encrypt
$ mirage configure -t hvt --prng fortuna
$ make depend
$ make

# run it
$ solo5-hvt --net:service=tap2 -- letsencrypt.hvt --keys=...

# test it
$ ocertify 10.0.42.2 foo.mirage</code></pre>

<p>For actual testing with let&#39;s encrypt servers you need to have the primary and secondary deployed on your remote hosts, and your domain needs to be delegated to these servers. Good luck. And ensure you have backup your git repository.</p>
<p>As fine print, while this tutorial was about the <code>mirage</code> zone, you can stick any number of zones into the git repository. If you use a <code>_keys</code> file (without any domain prefix), you can configure hmac secrets for all zones, i.e. something to use in your let&#39;s encrypt unikernel and secondary unikernel. Dynamic addition of zones is supported, just create a new zonefile and notify the primary, the secondary will be notified and pick it up. The primary responds to a signed SOA for the root zone (i.e. requested by the secondary) with the SOA response (not authoritative), and additionally notifications for all domains of the primary.</p>
<h3>Conclusion and thanks</h3>

<p>This tutorial presented how to use the OCaml DNS based unikernels to run authoritative name servers for your domain, using a git repository as the source of truth, dynamic authenticated updates, and let&#39;s encrypt certificate issuing.</p>
<p>There are further steps to take, such as monitoring -- have a look at the <code>monitoring</code> branch of the opam repository above, and the <code>future-robur</code> branch of the unikernels repository above, which use a second network interface for reporting syslog and metrics to telegraf / influx / grafana. Some DNS features are still missing, most prominently DNSSec.</p>
<p>I&#39;d like to thank all people involved in this software stack, without other key components, including <a href="https://github.com/mirage/ocaml-git">git</a>, <a href="https://irmin.io/">irmin 2.0</a>, <a href="https://github.com/mirleft/ocaml-nocrypto">nocrypto</a>, <a href="https://github.com/haesbaert/awa-ssh">awa-ssh</a>, <a href="https://github.com/mirage/ocaml-cohttp">cohttp</a>, <a href="https://github.com/solo5/sol5">solo5</a>, <a href="https://github.com/mirage/mirage">mirage</a>, <a href="https://github.com/mmaker/ocaml-letsencrypt">ocaml-letsencrypt</a>, and more.</p>
<p>If you want to support our work on MirageOS unikernels, please <a href="https://robur.coop/Donate">donate to robur</a>. I&#39;m interested in feedback, either via <a href="https://twitter.com/h4nnes">twitter</a>, <a href="https://mastodon.social/@hannesm">hannesm@mastodon.social</a> or an issue on the <a href="https://github.com/hannesm/hannes.nqsb.io/issues">data repository</a>.</p>
<a href="#4c6a491ed746040180d58ec24df45dfc" onclick="switchContent('ocamlorg-post24','ocamlorg-post23')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="7663836576be89be3bcd5d24ea16acff"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://hannes.nqsb.io/Posts/ReproducibleOPAM" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fhannes.nqsb.io%2FPosts%2FReproducibleOPAM" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%237663836576be89be3bcd5d24ea16acff&amp;t=Reproducible+MirageOS+unikernel+builds" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%237663836576be89be3bcd5d24ea16acff&text=Reproducible+MirageOS+unikernel+builds" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://hannes.nqsb.io/atom" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://hannes.nqsb.io/Posts/ReproducibleOPAM" target="_blank" title="Go to the original post">Reproducible MirageOS unikernel builds</a><span class="additional-info"> — Hannes Mehnert (hannes), Dec 16, 2019</span></h1><div class="planet-post"><div id="ocamlorg-post25">

<h2>Reproducible builds summit</h2>

<p>I&#39;m just back from the <a href="https://reproducible-builds.org/events/Marrakesh2019/">Reproducible builds summit 2019</a>. In 2018, several people developing <a href="https://ocaml.org">OCaml</a> and <a href="https://opam.ocaml.org">opam</a> and <a href="https://mirage.io">MirageOS</a>, attended <a href="https://reproducible-builds.org/events/paris2018/">the Reproducible builds summit in Paris</a>. The notes from last year on <a href="https://reproducible-builds.org/events/paris2018/report/#Toc11410_331763073">opam reproducibility</a> and <a href="https://reproducible-builds.org/events/paris2018/report/#Toc11681_331763073">MirageOS reproducibility</a> are online. After last years workshop, Raja started developing the opam reproducibilty builder <a href="https://github.com/rjbou/orb">orb</a>, which I extended at and after this years summit. This year before and after the facilitated summit there were hacking …</p><a href="#7663836576be89be3bcd5d24ea16acff" onclick="switchContent('ocamlorg-post25','ocamlorg-post26')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post26" style="display: none">

<h2>Reproducible builds summit</h2>

<p>I&#39;m just back from the <a href="https://reproducible-builds.org/events/Marrakesh2019/">Reproducible builds summit 2019</a>. In 2018, several people developing <a href="https://ocaml.org">OCaml</a> and <a href="https://opam.ocaml.org">opam</a> and <a href="https://mirage.io">MirageOS</a>, attended <a href="https://reproducible-builds.org/events/paris2018/">the Reproducible builds summit in Paris</a>. The notes from last year on <a href="https://reproducible-builds.org/events/paris2018/report/#Toc11410_331763073">opam reproducibility</a> and <a href="https://reproducible-builds.org/events/paris2018/report/#Toc11681_331763073">MirageOS reproducibility</a> are online. After last years workshop, Raja started developing the opam reproducibilty builder <a href="https://github.com/rjbou/orb">orb</a>, which I extended at and after this years summit. This year before and after the facilitated summit there were hacking days, which allowed further interaction with participants, writing some code and conduct experiments. I had this year again an exciting time at the summit and hacking days, thanks to our hosts, organisers, and all participants.</p>
<h2>Goal</h2>

<p>Stepping back a bit, first look on the <a href="https://reproducible-builds.org/">goal of reproducible builds</a>: when compiling source code multiple times, the produced binaries should be identical. It should be sufficient if the binaries are behaviourally equal, but this is pretty hard to check. It is much easier to check <strong>bit-wise identity of binaries</strong>, and relaxes the burden on the checker -- checking for reproducibility is reduced to computing the hash of the binaries. Let&#39;s stick to the bit-wise identical binary definition, which also means software developers have to avoid non-determinism during compilation in their toolchains, dependent libraries, and developed code.</p>
<p>A <a href="https://reproducible-builds.org/docs/test-bench/">checklist</a> of potential things leading to non-determinism has been written up by the reproducible builds project. Examples include recording the build timestamp into the binary, ordering of code and embedded data. The reproducible builds project also developed <a href="https://packages.debian.org/sid/disorderfs">disorderfs</a> for testing reproducibility and <a href="https://diffoscope.org/">diffoscope</a> for comparing binaries with file-dependent readers, falling back to <code>objdump</code> and <code>hexdump</code>. A giant <a href="https://tests.reproducible-builds.org/">test infrastructure</a> with <a href="https://tests.reproducible-builds.org/debian/index_variations.html">lots of variations</a> between the builds, mostly using Debian, has been setup over the years.</p>
<p>Reproducibility is a precondition for trustworthy binaries. See <a href="https://reproducible-builds.org/#why-does-it-matter">why does it matter</a>. If there are no instructions how to get from the published sources to the exact binary, why should anyone trust and use the binary which claims to be the result of the sources? It may as well contain different code, including a backdoor, bitcoin mining code, outputting the wrong results for specific inputs, etc. Reproducibility does not imply the software is free of security issues or backdoors, but instead of a audit of the binary - which is tedious and rarely done - the source code can be audited - but the toolchain (compiler, linker, ..) used for compilation needs to be taken into account, i.e. trusted or audited to not be malicious. <strong>I will only ever publish binaries if they are reproducible</strong>.</p>
<p>My main interest at the summit was to enhance existing tooling and conduct some experiments about the reproducibility of <a href="https://mirage.io">MirageOS unikernels</a> -- a unikernel is a statically linked ELF binary to be run as Unix process or <a href="https://github.com/solo5/solo5">virtual machine</a>. MirageOS heavily uses <a href="https://ocaml.org">OCaml</a> and <a href="https://opam.ocaml.org">opam</a>, the OCaml package manager, and is an opam package itself. Thus, <em>checking reproducibility of a MirageOS unikernel is the same problem as checking reproducibility of an opam package</em>.</p>
<h2>Reproducible builds with opam</h2>

<p>Testing for reproducibility is achieved by taking the sources and compile them twice independently. Afterwards the equality of the resulting binaries can be checked. In trivial projects, the sources is just a single file, or originate from a single tarball. In OCaml, opam uses <a href="https://github.com/ocaml/opam-repository">a community repository</a> where OCaml developers publish their package releases to, but can also use custom repositores, and in addition pin packages to git remotes (url including branch or commit), or a directory on the local filesystem. Manually tracking and updating all dependent packages of a MirageOS unikernel is not feasible: our hello-world compiled for hvt (kvm/BHyve) already has 79 opam dependencies, including the OCaml compiler which is distribued as opam package. The unikernel serving this website depends on 175 opam packages.</p>
<p>Conceptually there should be two tools, the <em>initial builder</em>, which takes the latest opam packages which do not conflict, and exports exact package versions used during the build, as well as hashes of binaries. The other tool is a <em>rebuilder</em>, which imports the export, conducts a build, and outputs the hashes of the produced binaries.</p>
<p>Opam has the concept of a <code>switch</code>, which is an environment where a package set is installed. Switches are independent of each other, and can already be exported and imported. Unfortunately the export is incomplete: if a package includes additional patches as part of the repository -- sometimes needed for fixing releases where the actual author or maintainer of a package responds slowly -- these package neither the patches end up in the export. Also, if a package is pinned to a git branch, the branch appears in the export, but this may change over time by pushing more commits or even force-pushing to that branch. In <a href="https://github.com/ocaml/opam/pull/4040">PR #4040</a> (under discussion and review), also developed during the summit, I propose to embed the additional files as base64 encoded values in the opam file. To solve the latter issue, I modified the export mechanism to <a href="https://github.com/ocaml/opam/pull/4055">embed the git commit hash (PR #4055)</a>, and avoid sources from a local directory and which do not have a checksum.</p>
<p>So the opam export contains the information required to gather the exact same sources and build instructions of the opam packages. If the opam repository would be self-contained (i.e. not depend on any other tools), this would be sufficient. But opam does not run in thin air, it requires some system utilities such as <code>/bin/sh</code>, <code>sed</code>, a GNU make, commonly <code>git</code>, a C compiler, a linker, an assembler. Since opam is available on various operating systems, the plugin <code>depext</code> handles host system dependencies, e.g. if your opam package requires <code>gmp</code> to be installed, this requires slightly different names depending on host system or distribution, take a look at <a href="https://github.com/ocaml/opam-repository/blob/master/packages/conf-gmp/conf-gmp.1/opam">conf-gmp</a>. This also means, opam has rather good information about both the opam dependencies and the host system dependencies for each package. Please note that the host system packages used during compilation are not yet recorded (i.e. which <code>gmp</code> package was installed and used during the build, only that a <code>gmp</code> package has to be installed). The base utilities mentioned above (C compiler, linker, shell) are also not recorded yet.</p>
<p>Operating system information available in opam (such as architecture, distribution, version), which in some cases maps to exact base utilities, is recorded in the build-environment, a separate artifact. The environment variable <a href="https://reproducible-builds.org/specs/source-date-epoch/"><code>SOURCE_DATE_EPOCH</code></a>, used for communicating the same timestamp when software is required to record a timestamp into the resulting binary, is also captured in the build environment.</p>
<p>Additional environment variables may be captured or used by opam packages to produce different output. To avoid this, both the initial builder and the rebuilder are run with minimal environment variables: only <code>PATH</code> (normalised to a whitelist of <code>/bin</code>, <code>/usr/bin</code>, <code>/usr/local/bin</code> and <code>/opt/bin</code>) and <code>HOME</code> are defined. Missing information at the moment includes CPU features: some libraries (gmp?, nocrypto) emit different code depending on the CPU feature.</p>
<h2>Tooling</h2>

<p><em>TL;DR: A <strong>build</strong> builds an opam package, and outputs <code>.opam-switch</code>, <code>.build-hashes.N</code>, and <code>.build-environment.N</code>. A <strong>rebuild</strong> uses these artifacts as input, builds the package and outputs another <code>.build-hashes.M</code> and <code>.build-environment.M</code>.</em></p>
<p>The command-line utility <code>orb</code> can be installed and used:</p>
<pre class="sh"><code class="sh">$ opam pin add orb git+https://github.com/hannesm/orb.git#active
$ orb build --twice --keep-build-dir --diffoscope &lt;your-favourite-opam-package&gt;</code></pre>

<p>It provides two subcommands <code>build</code> and <code>rebuild</code>. The <code>build</code> command takes a list of local opam <code>--repos</code> where to take opam packages from (defaults to <code>default</code>), a compiler (either a variant <code>--compiler=4.09.0+flambda</code>, a version <code>--compiler=4.06.0</code>, or a pin to a local development version <code>--compiler-pin=~/ocaml</code>), and optionally an existing switch <code>--use-switch</code>. It creates a switch, builds the packages, and emits the opam export, hashes of all files installed by these packages, and the build environment. The flags <code>--keep-build</code> retains the build products, opam&#39;s <code>--keep-build-dir</code> in addition temporary build products and generated source code. If <code>--twice</code> is provided, a rebuild (described next) is executed after the initial build.</p>
<p>The <code>rebuild</code> command takes a directory with the opam export and build environment to build the opam package. It first compares the build-environment with the host system, sets the <code>SOURCE_DATE_EPOCH</code> and switch location accordingly and executes the import. Once the build is finished, it compares the hashes of the resulting files with the previous run. On divergence, if build directories were kept in the previous build, and if diffoscope is available and <code>--diffoscope</code> was provided, diffoscope is run on the diverging files. If <code>--keep-build-dir</code> was provided as well, <code>diff -ur</code> can be used to compare the temporary build and sources, including build logs.</p>
<p>The builds are run in parallel, as opam does, this parallelism does not lead to different binaries in my experiments.</p>
<h2>Results and discussion</h2>

<p><strong>All MirageOS unikernels I have deployed are reproducible \o/</strong>. Also, several binaries such as <code>orb</code> itself, <code>opam</code>, <code>solo5-hvt</code>, and all <code>albatross</code> utilities are reproducible.</p>
<p>The unikernel range from hello world, web servers (e.g. this blog, getting its data on startup via a git clone to memory), authoritative DNS servers, CalDAV server. They vary in size between 79 and 200 opam packages, resulting in 2MB - 16MB big ELF binaries (including debug symbols). The <a href="https://github.com/roburio/reproducible-unikernel-repo">unikernel opam repository</a> contains some reproducible unikernels used for testing. Some work-in-progress enhancements are needed to achieve this:</p>
<p>At the moment, the opam package of a MirageOS unikernel is automatically generated by <code>mirage configure</code>, but only used for tracking opam dependencies. I worked on <a href="https://github.com/mirage/mirage/pull/1022">mirage PR #1022</a> to extend the generated opam package with build and install instructions.</p>
<p>As mentioned above, if locale is set, ocamlgraph needs to be patched to emit a (locale-dependent) timestamp.</p>
<p>The OCaml program <a href="https://github.com/mirage/ocaml-crunch"><code>crunch</code></a> embeds a subdirectory as OCaml code into a binary, which we use in MirageOS quite regularly for static assets, etc. This plays in several ways into reproducibility: on the one hand, it needs a timestamp for its <code>last_modified</code> functionality (and adheres since <a href="https://github.com/mirage/ocaml-crunch/pull/45">June 2018</a> to the <code>SOURCE_DATE_EPOCH</code> spec, thanks to Xavier Clerc). On the other hand, it used before version 3.2.0 (released Dec 14th) hashtables for storing the file contents, where iteration is not deterministic (the insertion is not sorted), <a href="https://github.com/mirage/ocaml-crunch/pull/51">fixed in PR #51</a> by using a Map instead.</p>
<p>In functoria, a tool used to configure MirageOS devices and their dependencies, can emit a list of opam packages which were required to build the unikernel. This uses <code>opam list --required-by --installed --rec &lt;pkgs&gt;</code>, which uses the cudf graph (<a href="https://github.com/mirage/functoria/pull/189#issuecomment-566696426">thanks to Raja for explanation</a>), that is during the rebuild dropping some packages. The <a href="https://github.com/mirage/functoria/pull/189">PR #189</a> avoids by not using the <code>--rec</code> argument, but manually computing the fixpoint.</p>
<p>Certainly, the choice of environment variables, and whether to vary them (as <a href="https://tests.reproducible-builds.org/debian/index_variations.html">debian does</a>) or to not define them (or normalise) while building, is arguably. Since MirageOS does neither support time zone nor internationalisation, there is no need to prematurely solving this issue. On related note, even with different locale settings, MirageOS unikernels are reproducible apart from an <a href="https://github.com/backtracking/ocamlgraph/pull/90">issue in ocamlgraph #90</a> embedding the output of <a href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/date.html"><code>date</code></a>, which is different depending on <code>LANG</code> and locale (<code>LC_*</code>) settings.</p>
<p>Prior art in reproducible MirageOS unikernels is the <a href="https://github.com/mirage/qubes-mirage-firewall/">mirage-qubes-firewall</a>. Since <a href="https://github.com/mirage/qubes-mirage-firewall/commit/07ff3d61477383860216c69869a1ffee59145e45">early 2017</a> it is reproducible. Their approach is different by building in a docker container with the opam repository pinned to an exact git commit.</p>
<h2>Further work</h2>

<p>I only tested a certain subset of opam packages and MirageOS unikernels, mainly on a single machine (my laptop) running FreeBSD, and am happy if others will test reproducibility of their OCaml programs with the tools provided. There could as well be CI machines rebuilding opam packages and reporting results to a central repository. I&#39;m pretty sure there are more reproducibility issues in the opam ecosystem. I developed an <a href="https://github.com/roburio/reproducible-testing-repo">reproducible testing opam repository</a> with opam packages that do not depend on OCaml, mainly for further tooling development. Some tests were also conducted on a Debian system with the same result. The variations, apart from build time, were using a different user, and different locale settings.</p>
<p>As mentioned above, more environment, such as the CPU features, and external system packages, should be captured in the build environment.</p>
<p>When comparing OCaml libraries, some output files (cmt / cmti / cma / cmxa) are not deterministic, but contain minimal diverge where I was not able to spot the root cause. It would be great to fix this, likely in the OCaml compiler distribution. Since the final result, the binary I&#39;m interested in, is not affected by non-identical intermediate build products, I hope someone (you?) is interested in improving on this side. OCaml bytecode output also seems to be non-deterministic. There is <a href="https://github.com/coq/coq/issues/11229">a discussion on the coq issue tracker</a> which may be related.</p>
<p>In contrast to initial plans, I did not used the <a href="https://reproducible-builds.org/specs/build-path-prefix-map/"><code>BUILD_PATH_PREFIX_MAP</code></a> environment variable, which is implemented in OCaml by <a href="https://github.com/ocaml/ocaml/pull/1515">PR #1515</a> (and followups). The main reasons are that something in the OCaml toolchain (I suspect the bytecode interpreter) needed absolute paths to find libraries, thus I&#39;d need a symlink from the left-hand side to the current build directory, which was tedious. Also, my installed assembler does not respect the build path prefix map, and BUILD_PATH_PREFIX_MAP is not widely supported. See e.g. the Debian <a href="https://tests.reproducible-builds.org/debian/rb-pkg/unstable/amd64/diffoscope-results/ocaml-zarith.html">zarith</a> package with different build paths and its effects on the binary.</p>
<p>I&#39;m fine with recording the build path (switch location) in the build environment for now - it turns out to end up only once in MirageOS unikernels, likely by the last linking step, which <a href="http://blog.llvm.org/2019/11/deterministic-builds-with-clang-and-lld.html">hopefully soon be solved by llvm 9.0</a>.</p>
<p>What was fun was to compare the unikernel when built on Linux with gcc against a built on FreeBSD with clang and lld - spoiler: they emit debug sections with different dwarf versions, it is pretty big. Other fun differences were between OCaml compiler versions: the difference between minor versions (4.08.0 vs 4.08.1) is pretty small (~100kB as human-readable output), while the difference between major version (4.08.1 vs 4.09.0) is rather big (~900kB as human-readable diff).</p>
<p>An item on my list for the future is to distribute the opam export, build hashes and build environment artifacts in a authenticated way. I want to integrate this as <a href="https://in-toto.io/">in-toto</a> style into <a href="https://github.com/hannesm/conex">conex</a>, my not-yet-deployed implementation of <a href="https://theupdateframework.github.io/">tuf</a> for opam that needs further development and a test installation, hopefully in 2020.</p>
<p>If you want to support our work on MirageOS unikernels, please <a href="https://robur.coop/Donate">donate to robur</a>. I&#39;m interested in feedback, either via <a href="https://twitter.com/h4nnes">twitter</a>, <a href="https://mastodon.social/@hannesm">hannesm@mastodon.social</a> or an issue on the <a href="https://github.com/hannesm/hannes.nqsb.io/issues">data repository</a>.</p>
<a href="#7663836576be89be3bcd5d24ea16acff" onclick="switchContent('ocamlorg-post26','ocamlorg-post25')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="107fe40a3b016cf0713df25cff28604f"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://blog.janestreet.com/using-python-and-ocaml-in-the-same-jupyter-notebook/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fblog.janestreet.com%2Fusing-python-and-ocaml-in-the-same-jupyter-notebook%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23107fe40a3b016cf0713df25cff28604f&amp;t=Using+Python+and+OCaml+in+the+same+Jupyter+notebook" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23107fe40a3b016cf0713df25cff28604f&text=Using+Python+and+OCaml+in+the+same+Jupyter+notebook" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://blog.janestreet.com/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://blog.janestreet.com/using-python-and-ocaml-in-the-same-jupyter-notebook/" target="_blank" title="Go to the original post">Using Python and OCaml in the same Jupyter notebook</a><span class="additional-info"> — Jane Street, Dec 16, 2019</span></h1><div class="planet-post"><div style="width: 75%; margin: auto; text-align: center; font-style: italic; font-size: 75%">
The cover image is based on <a href="https://commons.wikimedia.org/wiki/File:Jupiter_family.jpg">Jupiter family</a> by NASA/JPL.
</div>

</div></section>

<a name="4f2683d64a8374bab80f01ac2203c5b9"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://tarides.com/blog/2019-12-11-tarides-wins-the-fic-2020-startup-award" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Ftarides.com%2Fblog%2F2019-12-11-tarides-wins-the-fic-2020-startup-award" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%234f2683d64a8374bab80f01ac2203c5b9&amp;t=Tarides+wins+the+FIC+2020+startup+award" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%234f2683d64a8374bab80f01ac2203c5b9&text=Tarides+wins+the+FIC+2020+startup+award" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://tarides.com/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://tarides.com/blog/2019-12-11-tarides-wins-the-fic-2020-startup-award" target="_blank" title="Go to the original post">Tarides wins the FIC 2020 startup award</a><span class="additional-info"> — Tarides (Céline Laplassotte), Dec 11, 2019</span></h1><div class="planet-post"><div id="ocamlorg-post27"><p>We are very excited to announce that Tarides has <a href="https://www.forum-fic.com/en/home/price/the-fic-start-up-award.htm">won an
award</a>
from the International Cybersecurity Forum (FIC 2020).</p>
<p>Organized every year in Lille (France), the International
Cybersecurity Forum has become the leading European event on
cybersecurity and digital trust. Its main goal is to foster reflection
and exchanges within the European cybersecurity ecosystem.</p>
<p>We are very happy to have won the "Coup de Coeur" Prize, which will
bring great visibility to our technological innovations. It is als…</p><a href="#4f2683d64a8374bab80f01ac2203c5b9" onclick="switchContent('ocamlorg-post27','ocamlorg-post28')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post28" style="display: none"><p>We are very excited to announce that Tarides has <a href="https://www.forum-fic.com/en/home/price/the-fic-start-up-award.htm">won an
award</a>
from the International Cybersecurity Forum (FIC 2020).</p>
<p>Organized every year in Lille (France), the International
Cybersecurity Forum has become the leading European event on
cybersecurity and digital trust. Its main goal is to foster reflection
and exchanges within the European cybersecurity ecosystem.</p>
<p>We are very happy to have won the "Coup de Coeur" Prize, which will
bring great visibility to our technological innovations. It is also an
opportunity for us to meet experts in the cybersecurity sector and to
consider additional use-cases for our work. We would like to thank the
<a href="https://ceis.eu/">CEIS</a> for organising the event and the members of
the jury for commending <a href="https://mirage.io">MirageOS</a> and
<a href="https://tarides.com/blog/2019-07-05-i-lab-2019">OSMOSE</a>.</p>
<p>The next FIC will be held on the 28th, 29th and 30th of January
2020 in Lille. For more details about the FIC and to register, visit
<a href="https://www.forum-fic.com/en/home.htm">their website</a>.</p>
<br/>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 680px;">
      <a href="https://tarides.com/static/dc5973af18f70eb3d969d8aa1c8dfae6/bf5f1/FIC2020.jpg" class="gatsby-resp-image-link" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.7326968973747%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABvZVlqB4X/8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIAEBESIf/aAAgBAQABBQINqUYtM9v/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAgEFAAAAAAAAAAAAAAAAAAEREiAhMZH/2gAIAQEABj8CoTfBOcG7P//EABsQAAIDAAMAAAAAAAAAAAAAAAERACFBEGGx/9oACAEBAAE/IczKsvYBTfqE2VONgAQqf//aAAwDAQACAAMAAAAQWD//xAAYEQADAQEAAAAAAAAAAAAAAAAAAREhMf/aAAgBAwEBPxCO9IWQ/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAECAQE/ELiP/8QAHBABAQADAAMBAAAAAAAAAAAAAREAIVExQWGx/9oACAEBAAE/EAN5gjIxWw3eCfgKGDOfMN7JqJzPEnzANISH7hNTxzP/2Q=='); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/dc5973af18f70eb3d969d8aa1c8dfae6/2f992/FIC2020.jpg" class="gatsby-resp-image-image" alt="FIC2020 Startup Award Winners" title="FIC2020 Startup Award Winners" srcset="/static/dc5973af18f70eb3d969d8aa1c8dfae6/c2e49/FIC2020.jpg 170w,
/static/dc5973af18f70eb3d969d8aa1c8dfae6/f8bf2/FIC2020.jpg 340w,
/static/dc5973af18f70eb3d969d8aa1c8dfae6/2f992/FIC2020.jpg 680w,
/static/dc5973af18f70eb3d969d8aa1c8dfae6/bf5f1/FIC2020.jpg 838w" sizes="(max-width: 680px) 100vw, 680px" loading="lazy"/>
  </a>
    </span></p><a href="#4f2683d64a8374bab80f01ac2203c5b9" onclick="switchContent('ocamlorg-post28','ocamlorg-post27')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="18d694bd3bcad3bf6115e2ba6f8aaf63"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://blog.janestreet.com/deep-learning-the-hardest-go-problem-in-the-world/" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fblog.janestreet.com%2Fdeep-learning-the-hardest-go-problem-in-the-world%2F" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2318d694bd3bcad3bf6115e2ba6f8aaf63&amp;t=Deep-Learning+the+Hardest+Go+Problem+in+the+World" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2318d694bd3bcad3bf6115e2ba6f8aaf63&text=Deep-Learning+the+Hardest+Go+Problem+in+the+World" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://blog.janestreet.com/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://blog.janestreet.com/deep-learning-the-hardest-go-problem-in-the-world/" target="_blank" title="Go to the original post">Deep-Learning the Hardest Go Problem in the World</a><span class="additional-info"> — Jane Street, Dec 06, 2019</span></h1><div class="planet-post"><h2>Updates and a New Run</h2>

</div></section>

<a name="b0e2230c4b88119d5289376e203c7396"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://frama-c.com/index.html" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fframa-c.com%2Findex.html" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23b0e2230c4b88119d5289376e203c7396&amp;t=Frama-C+20.0+%28Calcium%29+is+out.+Download+it+here." class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23b0e2230c4b88119d5289376e203c7396&text=Frama-C+20.0+%28Calcium%29+is+out.+Download+it+here." class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://frama-c.com/rss.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://frama-c.com/index.html" target="_blank" title="Go to the original post">Frama-C 20.0 (Calcium) is out. Download it here.</a><span class="additional-info"> — Frama-C, Dec 04, 2019</span></h1><div class="planet-post"></div></section>

<a name="dbe697a49eaeafd406b9d3825a7851a1"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://tarides.com/blog/2019-12-04-mirageos-talk-at-the-paris-open-source-summit" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Ftarides.com%2Fblog%2F2019-12-04-mirageos-talk-at-the-paris-open-source-summit" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23dbe697a49eaeafd406b9d3825a7851a1&amp;t=MirageOS+talk+at+the+Paris+Open+Source+Summit" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23dbe697a49eaeafd406b9d3825a7851a1&text=MirageOS+talk+at+the+Paris+Open+Source+Summit" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://tarides.com/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://tarides.com/blog/2019-12-04-mirageos-talk-at-the-paris-open-source-summit" target="_blank" title="Go to the original post">MirageOS talk at the Paris Open Source Summit</a><span class="additional-info"> — Tarides (Céline Laplassotte), Dec 04, 2019</span></h1><div class="planet-post"><div id="ocamlorg-post29"><p>We are thrilled to have been selected by the <a href="https://www.opensourcesummit.paris">Paris Open Source Summit</a>
committee to talk about “Secure-by-design IoT applications using MirageOS”.</p>
<p>The Paris Open Source Summit is an annual event where you can connect to
open-source communities and learn from tech leaders, project committers and
CTOs about the latest technical solutions, innovative uses and societal
challenges of open digital technology.</p>
<p>Thomas Gazagnaire, Tarides CEO/CTO, will explain what makes MirageOS a good
framework to b…</p><a href="#dbe697a49eaeafd406b9d3825a7851a1" onclick="switchContent('ocamlorg-post29','ocamlorg-post30')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post30" style="display: none"><p>We are thrilled to have been selected by the <a href="https://www.opensourcesummit.paris">Paris Open Source Summit</a>
committee to talk about “Secure-by-design IoT applications using MirageOS”.</p>
<p>The Paris Open Source Summit is an annual event where you can connect to
open-source communities and learn from tech leaders, project committers and
CTOs about the latest technical solutions, innovative uses and societal
challenges of open digital technology.</p>
<p>Thomas Gazagnaire, Tarides CEO/CTO, will explain what makes MirageOS a good
framework to build IoT applications and how we can use embedded devices running
on ARMv8, ESP32 or RISC-V to run secure and end-to-end open-source
infrastructure services such as VPN proxies and email servers. He will also
highlight how this infrastructure will be used to form the basis of OSMOSE: a
secure, distributed and privacy-preserving platform to write user-centric IoT
applications.</p>
<p>MirageOS is a library operating system (using the MIT license) which enables the
construction of unikernels: specialized services where the runtime binary
contains only the necessary code for execution and no more. Unikernels have a
drastically smaller attack surface than service deployments in traditional
operating systems and could lead to 1000x less code for the full application
stack. Moreover, as MirageOS is written in a memory safe language (OCaml), a
full class of bugs related to memory corruption – representing <a href="https://msrc-blog.microsoft.com/2019/07/16/a-proactive-approach-to-more-secure-code/">70% of the
released CVEs</a> in classic operating systems written in C –
can no longer appear. These two properties combined (and more!) allow MirageOS
to build “secure-by-design” applications where everything – from the high-level
business logic to the low-level device drivers – has been designed to be as
secure as possible.</p>
<p>To learn more about the project, attend the Paris Open Source Summit! The talk
will take place during the '<a href="https://www.opensourcesummit.paris/EMBEDDED+&+IOT_168_5745.html">Embedded &#x26; IOT</a>' section
at 14:50 – 15:20 on December 10th, 2019.</p>
<br/>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 680px;">
      <a href="https://tarides.com/static/7826ecb5d3f2934a405f25446b1eb1d8/1f853/poss_2019.jpg" class="gatsby-resp-image-link" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 50.09765625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUBAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABtpDFSWjUQ//EABgQAQEBAQEAAAAAAAAAAAAAAAESAgAD/9oACAEBAAEFArOCzbD5hUlGM9//xAAbEQACAgMBAAAAAAAAAAAAAAABAwACEiGR8P/aAAgBAwEBPwFiqKsDWYKOyPcn/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAECESH/2gAIAQIBAT8BVOl02kf/xAAaEAACAgMAAAAAAAAAAAAAAAAAAREhMTKR/9oACAEBAAY/ApslWyDAqRquH//EABoQAQADAQEBAAAAAAAAAAAAAAEAESExUZH/2gAIAQEAAT8h+JDU6OEC3jUfoOeSmjl5GmrH/9oADAMBAAIAAwAAABD43//EABkRAQEAAwEAAAAAAAAAAAAAAAERADFhQf/aAAgBAwEBPxAMW9fJJoxbRXpj/8QAGBEBAQADAAAAAAAAAAAAAAAAAQARkfD/2gAIAQIBAT8QTECYHt3/xAAbEAEAAgMBAQAAAAAAAAAAAAABABExQVEhgf/aAAgBAQABPxBQK0aY8fnYpWiiUphg5UAol67BQNohgLAag7LW51DP/9k='); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/7826ecb5d3f2934a405f25446b1eb1d8/2f992/poss_2019.jpg" class="gatsby-resp-image-image" alt="Thomas at the Paris Open Source Summit" title="Thomas at the Paris Open Source Summit" srcset="/static/7826ecb5d3f2934a405f25446b1eb1d8/c2e49/poss_2019.jpg 170w,
/static/7826ecb5d3f2934a405f25446b1eb1d8/f8bf2/poss_2019.jpg 340w,
/static/7826ecb5d3f2934a405f25446b1eb1d8/2f992/poss_2019.jpg 680w,
/static/7826ecb5d3f2934a405f25446b1eb1d8/5d177/poss_2019.jpg 1020w,
/static/7826ecb5d3f2934a405f25446b1eb1d8/1f853/poss_2019.jpg 1024w" sizes="(max-width: 680px) 100vw, 680px" loading="lazy"/>
  </a>
    </span></p><a href="#dbe697a49eaeafd406b9d3825a7851a1" onclick="switchContent('ocamlorg-post30','ocamlorg-post29')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="63aca2f95d31707e96a8c487fd496ee5"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://gallium.inria.fr/blog/an-ocaml-release-story-1" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fgallium.inria.fr%2Fblog%2Fan-ocaml-release-story-1" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2363aca2f95d31707e96a8c487fd496ee5&amp;t=Testing+OCaml+releases+with+opamcheck" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%2363aca2f95d31707e96a8c487fd496ee5&text=Testing+OCaml+releases+with+opamcheck" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="http://gallium.inria.fr/blog/index.rss" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://gallium.inria.fr/blog/an-ocaml-release-story-1" target="_blank" title="Go to the original post">Testing OCaml releases with opamcheck</a><span class="additional-info"> — GaGallium (Florian Angeletti), Dec 03, 2019</span></h1><div class="planet-post"><div id="ocamlorg-post31">



<p>I (Florian Angeletti) have started working at Inria Paris this August. A part of my new job is to help deal with the day-to-day care for the OCaml compiler, particularly during the release process. This blog post is a short glimpse into the life of an OCaml release.</p>





<h2>OCaml and the opam repository</h2>
<p>Currently, the song of the OCaml development process is a canon with two voices: a compiler release spends the first 6 months of its life as the <code>trunk</code> branch of the OCaml compiler git repository…</p><a href="#63aca2f95d31707e96a8c487fd496ee5" onclick="switchContent('ocamlorg-post31','ocamlorg-post32')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post32" style="display: none">



<p>I (Florian Angeletti) have started working at Inria Paris this August. A part of my new job is to help deal with the day-to-day care for the OCaml compiler, particularly during the release process. This blog post is a short glimpse into the life of an OCaml release.</p>





<h2>OCaml and the opam repository</h2>
<p>Currently, the song of the OCaml development process is a canon with two voices: a compiler release spends the first 6 months of its life as the <code>trunk</code> branch of the OCaml compiler git repository. Then after those 6 first months, it is named and given a branch on its own. For instance, this happened on October 18 2019 for OCaml <code>4.10</code>. Starting from this point, the branch is feature-frozen: only bug fixes are merged, whereas new feature development happens in <code>trunk</code>. Our objective is then to release the new version 3 months later. If we succeed, there are at most two branches active at the same time.</p>
<div class="highlight"><pre><span></span>    Dev
    Dev
    Dev
    Dev
    Dev
    Dev
    Bug  Dev
    Bug  Dev
    RCs  Dev
         Dev
         Dev
         Dev
         Bug  Dev
         Bug  Dev
         RCs  Dev
              Dev
              Dev
              Dev
              Bug
              Bug
              Rcs
</pre></div>

<p>However, the OCaml compiler does not live in isolation. It makes little point to release a new version of OCaml which is not compatible with other parts of the OCaml ecosystem.</p>
<p>The release cycle of OCaml <code>4.08</code> was particularly painful from this point of view: we refactored parts of the compiler API that were not previously versioned by <a href="https://github.com/ocaml-ppx/ocaml-migrate-parsetree">ocaml-migrate-parsetree</a>, making it more difficult to update. In turn, without a working version of ocaml-migrate-parsetree, ppxses could not be built, breaking all packages that depend on them. It took months to correct the issue. This slip of schedule affected the <code>4.09.0</code> release and can still be felt on the <code>4.11</code> schedule.</p>
<h2>Catching knifes before the fall</h2>
<p>Lesson learned, we need to test the packages in the opam repository more often. Two tools in current usage can automate such testing: opamcheck and opam-health-check.</p>
<p>The two tools attack the problem with a different angle. The <a href="https://github.com/kit-ty-kate/opam-health-check">opam-health-check</a> monitoring tool is developed to check the coherency of the opam repository, for released OCaml versions.</p>
<p>In a complementary way, <a href="https://github.com/damiendoligez/opamcheck">opamcheck</a> was written by Damien Doligez to check how well new versions of the OCaml compiler fare in terms of building the packages in the opam repository.</p>
<p>A typical difference between opamcheck and opam-health-check is that opamcheck is biased towards newer versions of the compiler: if an opam package builds on the latest unreleased version of the compiler, we don’t need to test it with older compilers. After all, we are mostly interested in packages that are broken by the new release. The handful of packages that may be coincidentally fixed by an unreleased compiler are at most a curiosity; pruning those unlikely events saves us some precious time.</p>
<p>Since I started at Inria, in the midst of the first beta of OCaml <code>4.09.0</code>, I have been working with opamcheck to monitor the state of the opam repository.</p>
<p>The aim here is twofold. First, we want to detect expected breakages that are just a sign that a package needs to be updated before the final release of the new compiler version. The earliest we catch those, the more time the maintainers have to patch their packages. Second, we want to detect unexpected compatibility issues and breakages.</p>
<p>One fun example of such unexpected compatibility issue appeared in the <code>4.09.0</code> release cycle. When I first used opamcheck to test the state of the first <code>4.09.0</code> beta, there was a quite problematic broken package: dune. This was quite stunning at first, because the <code>4.09.0</code> version of OCaml contained mostly bug fixes and small quality-of-life improvements. That was at least what I had told a few worried people a few days earlier…</p>
<p>So what was happening here? The issue stemmed from a small change of behaviour in presence of missing compiled interface (<code>cmi</code>) files : dune was relying on an unspecified OCaml compiler behaviour in such cases, and this behaviour had been altered by a mostly unrelated improvement in the typechecker.</p>
<p>This change of behaviour was patched and dune worked fine in the second beta release of <code>4.09.0</code>. And this time, the next run of opamcheck confirmed that that <code>4.09.0</code> was a quiet release.</p>
<p>This is currently the main use of opamcheck: check the health status of the opam repository on unreleased version of OCaml before opam-health-check more extensive coverage takes the relay. One of our objectives for the future <code>4.10.0</code> release is to achieve a much more extensive test coverage, before the first beta.</p>
<h2>Opam and the PRs</h2>
<p>There is another possible use of opamcheck that is probably much more useful to the anxious OCaml developer: opamcheck can be used to check that a PR or an experimental branch does not break opam packages. A good example is <a href="https://github.com/ocaml/ocaml/issues/8900">#8900</a>: this PR proposes to remove the special handling of abstract types defined inside the current module. This special case looks nice locally, but it allows to write some code which is valid if and only if it is located in the right module, without any possibility to correct this behaviour by making module signatures more precise.</p>
<p>It is therefore quite tempting to try to remove this special case from the typechecker, but is it reasonable?</p>
<p>This was another task for opamcheck. First, I added a new opamcheck option to easily check any pull request on the OCaml compiler. After some work, there was some good news: this pattern is mostly unused in the current opam repository.</p>
<p>Knowing whether there are any opam packages that rely on this feature is definitively a big help when taking these decisions.</p>
<h2>Using opamcheck</h2>
<p>So if you are a worried OCaml developer and want to test your fancy compiler PR on the anvil of the opam repositoy, what are the magical incantations?</p>
<p>One option is to download the docker image <code>octachron/opamcheck</code> with</p>
<div class="highlight"><pre><span></span>docker pull octachron/opamcheck
</pre></div>

<p>Beware that the image weighs around 7 GiB. It is also possible to build and run opamcheck locally as detailed in the <a href="https://github.com/Octachron/opamcheck">readme</a>. However, in this short blog post, I will present the latter option. It has the advantages of being relatively lightweight in terms of configuration, and makes it easier to test your legions of PRs simultaneously (you don’t have legions of PRs, do you?)</p>
<p>Once the image is downloaded, there are three main ways to run it. If you want to compare several versions of the compiler (given as switch names), let’s say <code>4.05</code>, and <code>4.08.1+flambda</code> and <code>4.10.0+trunk</code>, you can run:</p>
<div class="highlight"><pre><span></span>docker run -v opamcheck:/app/log -p 8080:80 --name=opamcheck opamcheck run -online-summary=10 4.05.0 4.08.1+flambda 4.10.0
</pre></div>

<p>The <code>-name</code> option is the docker container name. The <code>-p</code> option maps the port <code>80</code> of the container to the port <code>8080</code> of the host, this is used to connect to the http server embedded in the image. Finally, the <code>-v</code> flag let us choose the location of opamcheck log directory in the host file system. (If you forget this option, a random docker volume name will be used.) Here, it will be at <code>/var/lib/docker/volumes/opamcheck</code>.</p>
<p>While opamcheck is runnning, its progress can be checked with either</p>
<div class="highlight"><pre><span></span>sudo tail -f /var/lib/docker/volumes/opamcheck_log/_data/results
</pre></div>

<p>or by pointing a web browser to <code>localhost:8080/fullindex.html</code>. Note that the first summary is only generated after the OCaml compiler is built and all uninstallable packages have been discovered. On my machine, this rounds up at a 15 minutes wait before the first summary is generated. Later updates should be more frequent.</p>
<p>The result should look like this <a href="https://opamcheck.polychoron.fr/4.10_2019_12_02/fullindex.html">summary run</a> for OCaml <code>4.10.0</code>. The integer parameter in <code>-online-summary=n</code> corresponds to the update period for this html summary. If the option is not provided, the html summary is only built at the end of the run.</p>
<p>If you are more interested by testing a specific PR, for instance <a href="https://github.com/ocaml/ocaml/issues/8900">#8900</a>, the <code>prmode</code> mode works better</p>
<div class="highlight"><pre><span></span>docker run -p 80:8080 opamcheck --name=opamcheck prmode -online-summary=10 -pr 8900 4.09.0
</pre></div>

<p>This command tries to rebase the given PR on top of the given OCaml version (switch name); it fails immediately if the PR cannot be rebased; in this case you should use the latest <code>trunk</code> switch as base or use the branch option, described below. When possible, it is a good idea to use a released version as the base: with a released version, there are more unbroken packages to test your patch against.</p>
<p>If the branch that you want to test is not yet a PR, or needs some manual rebasing to be compared against a specific compiler version, there is a <code>-branch</code> flag. For instance, let’s say that you have a branch <code>my_very_experimental_branch</code> at the location <code>nowhere.org</code>. You can run</p>
<div class="highlight"><pre><span></span>docker run -p 80:8080 opamcheck --name=opamcheck prmode -online-summary=10 -branch https://nowhere.org:my_very_experimental_branch 4.09.0
</pre></div>

<p>This command downloads the branch at <code>nowhere.org</code> and compare it against the <code>4.09.0</code> switch.</p>
<p>Currently, a full run of opamcheck takes one or two days: you will likely get the results before your first PR review. A limitation is the false positive rate: most opam package descriptions are incomplete or out of date, so packages will fail for reasons unrelated to your PR. Unfortunately, this means that there is still some manual triage needed after an opamcheck run.</p>
<p>There are four main objectives for opamcheck in the next months:</p>
<ul>
<li>improve its usability</li>
<li>share more code with opam-health-check, at least on the frontend</li>
<li>reduce the false positive rate</li>
<li>reduce the time required by a CI run</li>
</ul>
<p>If you want to check on future development for opamcheck, and a potentially more up-to-date readme, you can have a look at <a href="https://github.com/Octachron/opamcheck">Octachron/opamcheck</a>.</p>

<a href="#63aca2f95d31707e96a8c487fd496ee5" onclick="switchContent('ocamlorg-post32','ocamlorg-post31')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="3ff9fcf3e29f872754c7236c4bb8611c"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://tarides.com/blog/2019-11-27-introducing-the-graphql-api-for-irmin-2-0" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Ftarides.com%2Fblog%2F2019-11-27-introducing-the-graphql-api-for-irmin-2-0" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%233ff9fcf3e29f872754c7236c4bb8611c&amp;t=Introducing+the+GraphQL+API+for+Irmin+2.0" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%233ff9fcf3e29f872754c7236c4bb8611c&text=Introducing+the+GraphQL+API+for+Irmin+2.0" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://tarides.com/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://tarides.com/blog/2019-11-27-introducing-the-graphql-api-for-irmin-2-0" target="_blank" title="Go to the original post">Introducing the GraphQL API for Irmin 2.0</a><span class="additional-info"> — Tarides (Andreas Garnaes), Nov 27, 2019</span></h1><div class="planet-post"><div id="ocamlorg-post33"><p>With the release of Irmin 2.0.0, we are happy to announce a new package - <code>irmin-graphql</code>, which can be used to serve data from Irmin over HTTP. This blog post will give you some examples to help you get started, there is also <a href="https://irmin.org/tutorial/graphql">a section in the <code>irmin-tutorial</code></a> with similar information. To avoid writing the same thing twice, this post will cover the basics of getting started, plus a few interesting ideas for queries.</p>
<p>Getting the <code>irmin-graphql</code> server running from the command-line is easy:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ irmin grap…</code></pre></div><a href="#3ff9fcf3e29f872754c7236c4bb8611c" onclick="switchContent('ocamlorg-post33','ocamlorg-post34')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post34" style="display: none"><p>With the release of Irmin 2.0.0, we are happy to announce a new package - <code>irmin-graphql</code>, which can be used to serve data from Irmin over HTTP. This blog post will give you some examples to help you get started, there is also <a href="https://irmin.org/tutorial/graphql">a section in the <code>irmin-tutorial</code></a> with similar information. To avoid writing the same thing twice, this post will cover the basics of getting started, plus a few interesting ideas for queries.</p>
<p>Getting the <code>irmin-graphql</code> server running from the command-line is easy:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ irmin graphql --root<span class="token operator">=</span>/tmp/irmin</code></pre></div>
<p>where <code>/tmp/irmin</code> is the actual path to your repository. This will start the server on <code>localhost:8080</code>, but it's possible to customize this using the <code>--address</code> and <code>--port</code> flags.</p>
<p>The new GraphQL API has been added to address some of the shortcomings that have been identified with the old HTTP API, as well as enable a number of new features and capabilities.</p>
<h1><a href="https://tarides.com/feed.xml#graphql" aria-label="graphql permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GraphQL</h1>
<p><a href="https://graphql.org/">GraphQL</a> is a query language for exposing data as a graph via an API, typically using HTTP as a transport. The centerpiece of a GraphQL API is the <em>schema</em>, which describes the graph in terms of types and relationships between these types. The schema is accessible by the consumer, and acts as a contract between the API and the consumer, by clearly defining all API operations and fully assigning types to all interactions.</p>
<p>Viewing Irmin data as a graph turns out to be a natural and useful model. Concepts such as branches and commits fit in nicely, and the stored application data is organized as a tree. Such highly hierarchical data can be challenging to interact with using REST, but is easy to represent and navigate with GraphQL.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 680px;">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 74.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADFElEQVQ4y51SXUhTcRS/m6l9iuJMDQ0jKC3zIYLyoQ+SSHrxIYKooIcsejAqpYQSC+xBbO5uytxUQstSI5RMUXwoBA3LNM1uzdyHH9vubXfbvZtud37udP4TorIe7A+Hc87/9z+/+zvnXIr64yTQOkpB62UkjqP1iXHq6qvRKt2VzcqqXLzPwzyLYLHqamorraf+eaYmzCFvnZ6gcp69WEfieE3N5YS655Cifwy7ap9C4qMmQELmWtdrOQBQF9u7QzXzc3N/J520GH/LI8sqz0frHkNyRW1wn74+GKutgy1K7Ydf30AQVhOpSu9TpnFDKP4yOhzJGL4mfevrSSprazt8qrHletaT5hvHHzUUnmxsyc9t6zwzPvhuh41lk2YlKYLU2FBtuqqSjIqiBIGViSIX5uTt4QQMSL40ZnTk48D7/l7WOt2z5BHap5jRDsnBdQR4Rxe22iQIQr3JZBx0+XwZpKawszs8Rl0tV9DVslVqjx7IiLqTX7AJC8PRwsjdphOnIwqLi7b/bHMFk/Oae3GrCFBdGqqs9Hodap/fpZmcMLRirhY9nMLtth9BvApNw7GWBo/XQbvc9mIkk21QVhUm0zpmG617G0Pru+LU+l5s+Rhp+Ro+AI/nO2ARYDFJAclOIlZDYqfTCna7GZaX/SBJbuBd9p3R5brR5MaXsP9ZC+xvbIXEpjZI0NTcJYTn5uc94HBMLaO6IPrg4uIsErIHEXsAEADWblkiGHYBgsgJsDyjoEpUpREPtWObldrBjUrtgKy0gqFKyrMpVLYe1aRKASEVYClVkoQ0zHfPzPJhqDYKSffiB0IYEu5xOK0pZLYGs+n2m6Ehfc/wsK6PYSo+Go01LMvmUP9z3IG5cHZ66pLFYLgx9mmkyGL4mi/y/C2X05lNWiYmF0VW/rvn/oqJHocM+u9TgpdNXwj6Dn1mBs7aWPMJr5/PFERb/JqUCQInW/FsLH5Q8vvdwHETZP44hQXA++b/InS5bAqfzwVkYU5+Gs0a+jOQ8NUaCdmQx+WEYXwBF3oTl5iHSvMwL0DVmT8AxGI5cAVaFsEAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/77be7ca8c9940e693b03660d2d5cee01/5e3e6/git-data-model.png" class="gatsby-resp-image-image" alt="Git data model" title="Git data model" srcset="/static/77be7ca8c9940e693b03660d2d5cee01/924ad/git-data-model.png 170w,
/static/77be7ca8c9940e693b03660d2d5cee01/6103d/git-data-model.png 340w,
/static/77be7ca8c9940e693b03660d2d5cee01/5e3e6/git-data-model.png 680w,
/static/77be7ca8c9940e693b03660d2d5cee01/8ff1e/git-data-model.png 800w" sizes="(max-width: 680px) 100vw, 680px" loading="lazy"/>
    </span>
(image from <a href="https://git-scm.com/book/en/v2/Git-Internals-Git-Objects">Pro Git</a>)</p>
<p>As a consumer of an API, one of the biggest initial challenges is understanding what operations are exposed and how to use them. Conversely, as a developer of an API, keeping documentation up-to-date is challenging and time consuming. Though no substitute for more free-form documentation, a GraphQL schema provides an excellent base line for understanding a GraphQL API that is guaranteed to be accurate and up-to-date. This issue is definitely true of the old Irmin HTTP API, which was hard to approach for newcomers due to lack of documentation.</p>
<p>Being able to inspect the schema of a GraphQL API enables powerful tooling. A great example of this is <a href="https://tarides.com/graphiql">GraphiQL</a>, which is a browser-based IDE for GraphQL queries. GraphiQL can serve both as an interactive API explorer and query designer with intelligent autocompletion, formatting and more.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 680px;">
      <a href="https://tarides.com/static/19632cbb13504bb32d6d6d285ec1f542/e705e/graphiql.png" class="gatsby-resp-image-link" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.12942366026289%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABe0lEQVQoz3WS2Y6kMAxF+f9PnIeSejRQbNl3Aty2U01VbxPpAgL55Niku91u6Psew3CnDC3TNEEI0bJy1vWZZVkhpYRxESEV7PsOrU2755zRKeOQUkatFRtn2+hjhXMOYhIw2sKFAOdfUVrTZhLLKhrkUbO3dNImzNIBOHGeB66VUsQySfx5m2EsbZoLIhVHuhtjm6VSiiCvGl4dX6xP8Ja0y0OdV4yxAfrFYFgkQqAWbUCICZY24A72ShJHxb5Fes70fDyApVQCanqZyPIyzK2YwbM0cNrDjQreeJStoBcB935A0n+xZYOaLQGp5YOohWZwkBm3fH4QU0oNyDObCOgZOOsGzKVg1glqHVGTIEPfLLm244FeEL7+BmyGNGd3J0NqOxFwqzu2cuLgdhlYYxMiw7NBPuc7cFEvw+BC+0GP7X+uDv9ZfBwu4KosvHLwZMnvEn37LnGlG8exHWw+BoHOm/e+xVqLSD/G+4hRGFiyc//E0/A5pvOr6TtanQh1FESOJwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"></span>
  <img src="https://tarides.com/static/19632cbb13504bb32d6d6d285ec1f542/5e3e6/graphiql.png" class="gatsby-resp-image-image" alt="GraphiQL" title="GraphiQL" srcset="/static/19632cbb13504bb32d6d6d285ec1f542/924ad/graphiql.png 170w,
/static/19632cbb13504bb32d6d6d285ec1f542/6103d/graphiql.png 340w,
/static/19632cbb13504bb32d6d6d285ec1f542/5e3e6/graphiql.png 680w,
/static/19632cbb13504bb32d6d6d285ec1f542/89b07/graphiql.png 1020w,
/static/19632cbb13504bb32d6d6d285ec1f542/2f8d2/graphiql.png 1360w,
/static/19632cbb13504bb32d6d6d285ec1f542/e705e/graphiql.png 1978w" sizes="(max-width: 680px) 100vw, 680px" loading="lazy"/>
  </a>
    </span></p>
<p>The combination of introspection and a strongly typed schema also allows creating smart clients using code generation. This is already a quite wide-spread idea with <a href="https://tarides.com/apollo-swift">Apollo for iOS</a>, <a href="https://tarides.com/apollo-java">Apollo for Android</a> or <a href="https://tarides.com/graphql_ppx"><code>graphql_ppx</code></a> for OCaml/Reason. Though generic GraphQL client libraries will do a fine job interacting with the Irmin GraphQL API, these highlighted libraries will offer excellent ergonomics and type-safety out of the box.</p>
<p>One of the problems that GraphQL set out to solve is that of over- and underfetching. When designing REST API response payloads, there is always a tension between including too little data, which will require clients to make more network requests, and including too much data, which wastes resources for both client and server (serialization, network transfer, deserialization, etc).<br/>
The existing low-level Irmin HTTP API is a perfect example of this. Fetching the contents of a particular file on the master branch requires at least 4 HTTP requests (fetch the branch, fetch the commit, fetch the tree, fetch the blob), i.e. massive underfetching. By comparison, this is something easily solved with a single request to the new GraphQL API. More generally, the GraphQL API allows you to fetch <em>exactly</em> the data you need in a single request without making one-off endpoints.</p>
<p>For the curious, here's the GraphQL query to fetch the contents of <code>README.md</code> from the branch <code>master</code>:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  master <span class="token punctuation">{</span>
    tree <span class="token punctuation">{</span>
      get<span class="token punctuation">(</span><span class="token attr-name">key</span><span class="token punctuation">:</span> <span class="token string">"README.md"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The response will look something like this:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"master"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"tree"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"get"</span><span class="token operator">:</span> <span class="token string">"The contents of README.md"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The GraphQL API is not limited to only reading data, you can also write data to your Irmin store. Here's a simple example that will set the key <code>README.md</code> to <code>"foo"</code>, and return the hash of that commit:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">mutation</span> <span class="token punctuation">{</span>
  set<span class="token punctuation">(</span><span class="token attr-name">key</span><span class="token punctuation">:</span> <span class="token string">"README.md"</span><span class="token punctuation">,</span> <span class="token attr-name">value</span><span class="token punctuation">:</span> <span class="token string">"foo"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    hash
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>By default, GraphQL allows you to do multiple operations in a single query, so you get bulk operations for free. Here's a more complex example that modifies two different branches, <code>branch-a</code> and <code>branch-b</code>, and then merges <code>branch-b</code> into <code>branch-a</code> <em>all in a single query</em>:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">branch_a</span><span class="token punctuation">:</span> set<span class="token punctuation">(</span><span class="token attr-name">branch</span><span class="token punctuation">:</span> <span class="token string">"branch-a"</span><span class="token punctuation">,</span> <span class="token attr-name">key</span><span class="token punctuation">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token attr-name">value</span><span class="token punctuation">:</span> <span class="token string">"bar"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    hash
  <span class="token punctuation">}</span>

  <span class="token attr-name">branch_b</span><span class="token punctuation">:</span> set<span class="token punctuation">(</span><span class="token attr-name">branch</span><span class="token punctuation">:</span> <span class="token string">"branch-a"</span><span class="token punctuation">,</span> <span class="token attr-name">key</span><span class="token punctuation">:</span> <span class="token string">"baz"</span><span class="token punctuation">,</span> <span class="token attr-name">value</span><span class="token punctuation">:</span> <span class="token string">"qux"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    hash
  <span class="token punctuation">}</span>

  merge_with_branch<span class="token punctuation">(</span><span class="token attr-name">branch</span><span class="token punctuation">:</span> <span class="token string">"branch-b"</span><span class="token punctuation">,</span> <span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"branch-a"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    hash
    tree <span class="token punctuation">{</span>
      list_contents_recursively <span class="token punctuation">{</span>
        key
        value
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Here's what the response might look like:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"branch_a"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"hash"</span><span class="token operator">:</span> <span class="token string">"0a1313ae9dfe1d4339aee946dd76b383e02949b6"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"branch_b"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"hash"</span><span class="token operator">:</span> <span class="token string">"28855c277671ccc180c81058a28d3254f17d2f7b"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"merge_with_branch"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"hash"</span><span class="token operator">:</span> <span class="token string">"7b17437a16a858816d2710a94ccaa1b9c3506d1f"</span><span class="token punctuation">,</span>
      <span class="token property">"tree"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"list_contents_recursively"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"/foo"</span><span class="token punctuation">,</span>
            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"bar"</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"/baz"</span><span class="token punctuation">,</span>
            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"qux"</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Overall, the new GraphQL API operates at a much higher level than the old HTTP API, and offers a number of complex operations that were tricky to accomplish before.</p>
<h1><a href="https://tarides.com/feed.xml#customizable" aria-label="customizable permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customizable</h1>
<p>With GraphQL, all request and response data is fully described by the schema. Because Irmin allows the user to have custom content types, this leaves the question of what type to assign to such values. By default, the GraphQL API will expose all values as strings, i.e. the serialized version of the data that your application stores. This works quite well when Irmin is used as a simple key-value store, but it can be very inconvenient scheme when storing more complex values. As an example, consider storing contacts (name, email, phone, tags, etc) in your Irmin store, where values have the following type:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token comment">(* Custom content type: a contact *)</span>
<span class="token keyword">type</span> contact <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> string<span class="token punctuation">;</span>
  email <span class="token punctuation">:</span> string<span class="token punctuation">;</span>
  <span class="token comment">(* ... *)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Fetching such a value will by default be returned to the client as the JSON encoded representation. Assume we're storing a contact under the key <code>john-doe</code>, which we fetch with the following query:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  master <span class="token punctuation">{</span>
    tree <span class="token punctuation">{</span>
      get<span class="token punctuation">(</span><span class="token attr-name">key</span><span class="token punctuation">:</span> <span class="token string">"john-doe"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The response would then look something like this:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"master"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"tree"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"get"</span><span class="token operator">:</span> <span class="token string">"{\"name\":\"John Doe\", \"email\": \"john.doe@gmail.com/"</span><span class="token punctuation">,</span> ...<span class="token punctuation">}</span>"
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The client will have to parse this JSON string and cannot choose to only fetch parts of the value (say, only the email). Optimally we would want the client to get a structured response such as the following:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"master"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"tree"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"get"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span>
        <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"john.doe@gmail.com"</span><span class="token punctuation">,</span>
        ...
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>To achieve this, the new GraphQL API allows providing an "output type" and an "input type" for most of the configurable types in your store (<code>contents</code>, <code>key</code>, <code>metadata</code>, <code>hash</code>, <code>branch</code>). The output type specifies how data is presented to the client, while the input type controls how data can be provided by the client. Let's take a closer look at specifying a custom output type.</p>
<p>Essentially you have to construct a value of type <code>(unit, 'a option) Graphql_lwt.Schema.typ</code> (from the <a href="https://tarides.com/ocaml-graphql-server"><code>graphql-lwt</code></a> package), assuming your content type is <code>'a</code>. We could construct a GraphQL object type for our example content type <code>contact</code> as follows:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token comment">(* (unit, contact option) Graphql_lwt.Schema.typ *)</span>
<span class="token keyword">let</span> contact<span class="token punctuation">_</span>schema<span class="token punctuation">_</span>typ <span class="token operator">=</span> Graphql<span class="token punctuation">_</span>lwt<span class="token punctuation">.</span>Schema<span class="token punctuation">.</span><span class="token punctuation">(</span>obj <span class="token string">"Contact"</span>
  <span class="token operator">~</span>fields<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">fun</span> <span class="token punctuation">_</span> <span class="token operator">-></span> <span class="token punctuation">[</span>
    field <span class="token string">"name"</span>
      <span class="token operator">~</span>typ<span class="token punctuation">:</span><span class="token punctuation">(</span>non<span class="token punctuation">_</span>null string<span class="token punctuation">)</span>
      <span class="token operator">~</span>args<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token operator">~</span>resolve<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">fun</span> <span class="token punctuation">_</span> contact <span class="token operator">-></span>
        contact<span class="token punctuation">.</span>name
      <span class="token punctuation">)</span>
    <span class="token punctuation">;</span>
    <span class="token comment">(* ... more fields *)</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<p>To use the custom type, you need to instantiate the functor <code>Irmin_unix.Graphql.Server.Make_ext</code> (assuming you're deploying to a Unix target) with an Irmin store (type <code>Irmin.S</code>) and a custom types module (type <code>Irmin_graphql.Server.CUSTOM_TYPES</code>). This requires a bit of plumbing:</p>
<div class="gatsby-highlight" data-language="ocaml"><pre class="language-ocaml"><code class="language-ocaml"><span class="token comment">(* Instantiate the Irmin functor somehow *)</span>
<span class="token keyword">module</span> S <span class="token punctuation">:</span> Irmin<span class="token punctuation">.</span>S <span class="token keyword">with</span> <span class="token keyword">type</span> contents <span class="token operator">=</span> contact <span class="token operator">=</span>
  <span class="token comment">(* ... *)</span>

<span class="token comment">(* Custom GraphQL presentation module *)</span>
<span class="token keyword">module</span> Custom<span class="token punctuation">_</span>types <span class="token operator">=</span> <span class="token keyword">struct</span>
  <span class="token comment">(* Construct default GraphQL types *)</span>
  <span class="token keyword">module</span> Defaults <span class="token operator">=</span> Irmin<span class="token punctuation">_</span>graphql<span class="token punctuation">.</span>Server<span class="token punctuation">.</span>Default<span class="token punctuation">_</span>types <span class="token punctuation">(</span>S<span class="token punctuation">)</span>

  <span class="token comment">(* Use the default types for most things *)</span>
  <span class="token keyword">module</span> Key <span class="token operator">=</span> Defaults<span class="token punctuation">.</span>Key
  <span class="token keyword">module</span> Metadata <span class="token operator">=</span> Defaults<span class="token punctuation">.</span>Metadata
  <span class="token keyword">module</span> Hash <span class="token operator">=</span> Defaults<span class="token punctuation">.</span>Hash
  <span class="token keyword">module</span> Branch <span class="token operator">=</span> Defaults<span class="token punctuation">.</span>Branch

  <span class="token comment">(* Use custom output type for contents *)</span>
  <span class="token keyword">module</span> Contents <span class="token operator">=</span> <span class="token keyword">struct</span>
    <span class="token keyword">include</span> Defaults<span class="token punctuation">.</span>Contents
    <span class="token keyword">let</span> schema<span class="token punctuation">_</span>typ <span class="token operator">=</span> contact<span class="token punctuation">_</span>schema<span class="token punctuation">_</span>typ
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">module</span> Remote <span class="token operator">=</span> <span class="token keyword">struct</span>
  <span class="token keyword">let</span> remote <span class="token operator">=</span> Some s<span class="token punctuation">.</span>remote
<span class="token keyword">end</span>

<span class="token keyword">module</span> GQL <span class="token operator">=</span> Irmin<span class="token punctuation">_</span>unix<span class="token punctuation">.</span>Graphql<span class="token punctuation">.</span>Server<span class="token punctuation">.</span>Make<span class="token punctuation">_</span>ext <span class="token punctuation">(</span>S<span class="token punctuation">)</span> <span class="token punctuation">(</span>Remote<span class="token punctuation">)</span> <span class="token punctuation">(</span>Custom<span class="token punctuation">_</span>types<span class="token punctuation">)</span></code></pre></div>
<p>With this in hand, we can now query specifically for the email of <code>john-doe</code>:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  master <span class="token punctuation">{</span>
    tree <span class="token punctuation">{</span>
      get<span class="token punctuation">(</span><span class="token attr-name">key</span><span class="token punctuation">:</span> <span class="token string">"john-doe"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        email
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>... and get a nicely structured JSON response back:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"master"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"tree"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"get"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"john.doe@gmail.com"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The custom types is very powerful and opens up for transforming or enriching the data at query time, e.g. geocoding the address of a contact, or checking an on-line status.</p>
<h1><a href="https://tarides.com/feed.xml#watches" aria-label="watches permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Watches</h1>
<p>A core feature of Irmin is the ability to <em>watch</em> for changes to the underlying data store in real-time. <code>irmin-graphql</code> takes advantage of GraphQL subscriptions to expose Irmin watches. Subscriptions are a relative recent addition to the GraphQL spec (<a href="https://tarides.com/graphql-spec-june-2018">June 2018</a>), which allows clients to <em>subscribe</em> to changes. These changes are pushed to the client over a suitable transport mechanism, e.g. websockets, Server-Sent Events, or a chunked HTTP response, as a regular GraphQL response.</p>
<p>As an example, the following query watches for all changes and returns the new hash:</p>
<div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql">subscription <span class="token punctuation">{</span>
  watch <span class="token punctuation">{</span>
    commit <span class="token punctuation">{</span>
      hash
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>For every change, a message like the following will be sent:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"watch"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"commit"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"hash"</span><span class="token operator">:</span> <span class="token string">"c01a59bacc16d89e9cdd344a969f494bb2698d8f"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Under the hood, subscriptions in <code>irmin-graphql</code> are implemented using Irmin watches, but this is opaque to the client -- this will work with any GraphQL spec compliant client!</p>
<p>Here's a video, which hows how the GraphQL response changes live as the Irmin store is being manipulated:</p>
<p><video controls="controls" width="680"><source src="/blog/2019-11-27-introducing-irmin-graphql/irmin-subscriptions.mp4" type="video/mp4"></source></video></p>
<p>Note that the current implementation only supports websockets with more transport options coming soon.</p>
<h1><a href="https://tarides.com/feed.xml#wrap-up" aria-label="wrap up permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wrap-up</h1>
<p>Irmin 2.0 ships with a powerful new GraphQL API, that makes it much easier to interact with Irmin over the network. This makes Irmin available for many more languages and contexts, not just applications using OCaml (or Javascript). The new API operates at a much high level than the old API, and offers advanced features such as "bring your own GraphQL types", and watching for changes via GraphQL subscriptions.</p>
<p>We're looking forward to seeing what you'll build with it!</p><a href="#3ff9fcf3e29f872754c7236c4bb8611c" onclick="switchContent('ocamlorg-post34','ocamlorg-post33')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="fb215206c4d4735b6999c0fbc82a3404"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://mirage.io/blog/introducing-irmin-v2" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Fmirage.io%2Fblog%2Fintroducing-irmin-v2" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23fb215206c4d4735b6999c0fbc82a3404&amp;t=Announcing+Irmin+2.0.0" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23fb215206c4d4735b6999c0fbc82a3404&text=Announcing+Irmin+2.0.0" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://mirage.io/blog/atom.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://mirage.io/blog/introducing-irmin-v2" target="_blank" title="Go to the original post">Announcing Irmin 2.0.0</a><span class="additional-info"> — MirageOS (<a href="mailto:anil@recoil.org">Anil Madhavapeddy</a>), Nov 26, 2019</span></h1><div class="planet-post"><div id="ocamlorg-post35"><p>We are pleased to announce <a href="https://github.com/mirage/irmin/releases">Irmin
2.0.0</a>, a major release of the
Git-like distributed branching and storage substrate that underpins MirageOS.
We began the release process for all the components that make up Irmin <a href="https://tarides.com/blog/2019-05-13-on-the-road-to-irmin-v2">back in
May 2019</a>, and
there have been close to 1000 commits since Irmin 1.4.0 release back in June</p>
<ol><li>To celebrate this milestone, we have a new logo and opened a dedicated
website: <a href="https://irmin.org">irmin.org</a>.</li></ol>

<p>You can read more details about the new features in the <a href="https://tarides.com/blog/2019-11-21-irmin-v2">Irmin v2 blog
post</a>.  Enjoy the new releas…</p><a href="#fb215206c4d4735b6999c0fbc82a3404" onclick="switchContent('ocamlorg-post35','ocamlorg-post36')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post36" style="display: none"><p>We are pleased to announce <a href="https://github.com/mirage/irmin/releases">Irmin
2.0.0</a>, a major release of the
Git-like distributed branching and storage substrate that underpins MirageOS.
We began the release process for all the components that make up Irmin <a href="https://tarides.com/blog/2019-05-13-on-the-road-to-irmin-v2">back in
May 2019</a>, and
there have been close to 1000 commits since Irmin 1.4.0 release back in June</p>
<ol><li>To celebrate this milestone, we have a new logo and opened a dedicated
website: <a href="https://irmin.org">irmin.org</a>.</li></ol>

<p>You can read more details about the new features in the <a href="https://tarides.com/blog/2019-11-21-irmin-v2">Irmin v2 blog
post</a>.  Enjoy the new release,
and stay tuned for the upcoming Wodan integration in 2020 that will be a stable
filesystem for the hypervisor targets for MirageOS that do not have a
conventional OS kernel underneath them!</p>
<a href="#fb215206c4d4735b6999c0fbc82a3404" onclick="switchContent('ocamlorg-post36','ocamlorg-post35')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="165e92a6c3e9483d841e9e34a81ff7c9"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="https://tarides.com/blog/2019-11-21-irmin-v2" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=https%3A%2F%2Ftarides.com%2Fblog%2F2019-11-21-irmin-v2" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23165e92a6c3e9483d841e9e34a81ff7c9&amp;t=Irmin+v2" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23165e92a6c3e9483d841e9e34a81ff7c9&text=Irmin+v2" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://tarides.com/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="https://tarides.com/blog/2019-11-21-irmin-v2" target="_blank" title="Go to the original post">Irmin v2</a><span class="additional-info"> — Tarides (Thomas Gazagnaire), Nov 21, 2019</span></h1><div class="planet-post"><div id="ocamlorg-post37"><p>We are pleased to announce <a href="https://github.com/mirage/irmin/releases">Irmin
2.0.0</a>, a major release of the
Git-like distributed branching and storage substrate that underpins
<a href="https://mirage.io">MirageOS</a>.  We began the release process for all the
components that make up Irmin <a href="https://tarides.com/blog/2019-05-13-on-the-road-to-irmin-v2">back in May
2019</a>, and there
have been close to 1000 commits since Irmin 1.4.0 released back in June 2018. To
celebrate this milestone, we have a new logo and opened a dedicated website:
<a href="https://irmin.org">irmin.org</a>.</p>
<p>Our focus this year has been on ensuring the production success of our
early adopters -- s…</p><a href="#165e92a6c3e9483d841e9e34a81ff7c9" onclick="switchContent('ocamlorg-post37','ocamlorg-post38')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post38" style="display: none"><p>We are pleased to announce <a href="https://github.com/mirage/irmin/releases">Irmin
2.0.0</a>, a major release of the
Git-like distributed branching and storage substrate that underpins
<a href="https://mirage.io">MirageOS</a>.  We began the release process for all the
components that make up Irmin <a href="https://tarides.com/blog/2019-05-13-on-the-road-to-irmin-v2">back in May
2019</a>, and there
have been close to 1000 commits since Irmin 1.4.0 released back in June 2018. To
celebrate this milestone, we have a new logo and opened a dedicated website:
<a href="https://irmin.org">irmin.org</a>.</p>
<p>Our focus this year has been on ensuring the production success of our
early adopters -- such as the
<a href="https://gitlab.com/tezos/tezos/tree/master/src/lib_storage">Tezos</a> blockchain
and the <a href="https://github.com/moby/datakit">Datakit 9P</a>
stack -- as well as spawning new research projects into the practical
application of distributed and mergeable data stores.  We are also
very pleased to welcome several new maintainers into the Mirage
project for their contributions to Irmin, namely
<a href="https://github.com/icristescu">Ioana Cristescu</a>,
<a href="https://github.com/CraigFe">Craig Ferguson</a>,
<a href="https://github.com/andreas">Andreas Garnaes</a>,
<a href="https://github.com/pascutto">Clément Pascutto</a> and
<a href="https://github.com/zshipko">Zach Shipko</a>.</p>
<h2><a href="https://tarides.com/feed.xml#new-major-features" aria-label="new major features permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New Major Features</h2>
<h3><a href="https://tarides.com/feed.xml#new-cli" aria-label="new cli permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New CLI</h3>
<p>While Irmin is normally used as a library, it is obviously useful to
be able to interact with a data store from a shell.  The <code>irmin-unix</code>
opam package now provides an <code>irmin</code> binary that is configured via a
Yaml file and can perform queries and mutations against a Git store.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">echo</span> <span class="token string">"root: ."</span> <span class="token operator">></span> irmin.yml
$ irmin init
$ irmin <span class="token builtin class-name">set</span> foo/bar <span class="token string">"testing 123"</span>
$ irmin get foo/bar</code></pre></div>
<p>Try <code>irmin --help</code> to see all the commands and options available.</p>
<h3><a href="https://tarides.com/feed.xml#tezos-and-irmin-pack" aria-label="tezos and irmin pack permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tezos and irmin-pack</h3>
<p>Another big user of Irmin is the <a href="https://tezos.com">Tezos blockchain</a>,
and we have been optimising the persistent space usage of Irmin as their
network grows.  Because Tezos doesn’t require full Git format support,
we created a hybrid backend that grabs the best bits of Git (e.g. the
packfile mechanism) and engineered a domain-specific backend tailored
for Tezos usage. Crucially, because of the way Irmin is split into
clean libraries and OCaml modules, we only had to modify a small part
of the codebase and could also reuse elements of our
<a href="https://github.com/mirage/ocaml-git">OCaml-git</a> codebase as well.</p>
<p>The <a href="https://github.com/mirage/irmin/pull/615">irmin-pack backend</a> is available
for <a href="https://github.com/mirage/irmin/pull/888">use in the CLI</a> and provides a
significant improvement in disk usage.  There is a corresponding <a href="https://gitlab.com/tezos/tezos/merge_requests/1268">Tezos merge
request</a> using the Irmin
2.0 code that has been integrated downstream and will become available via
their release process in due course.</p>
<p>As part of this development process, we also released an efficient multi-level
index implementation (imaginatively dubbed
<a href="https://github.com/mirage/index">index</a> in opam). Our implementation takes an
arbitrary IO implementation and user-supplied content types and supplies a
standard key-value interface for persistent storage. Index provides instance
sharing by default, so each OCaml runtime shares a common singleton instance.</p>
<h3><a href="https://tarides.com/feed.xml#irmin-graphql-and-browser-irmin" aria-label="irmin graphql and browser irmin permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Irmin-GraphQL and “browser Irmin”</h3>
<p>Another new area of huge interest to us is
<a href="https://graphql.org">GraphQL</a> in order to provide frontends with a rich
query language for Irmin-hosted applications.  Irmin 2.0 includes a
built-in GraphQL server so you can <a href="https://twitter.com/cuvius/status/1017136581755457539">manipulate your Git repo via
GraphQL</a>.</p>
<p>If you are interested in (for example) compiling elements of Irmin to
JavaScript or wasm, for usage in frontends, then the Irmin 2.0 release
makes it significantly easier to support this architecture.  We’ve
already seen some exploratory efforts <a href="https://github.com/mirage/irmin/issues/681">report issues</a>
when doing this, and we’ve had it working ourselves in <a href="http://roscidus.com/blog/blog/2015/04/28/cuekeeper-gitting-things-done-in-the-browser/">Irmin 1.0 Cuekeeper</a>
so we are excited by the potential power of applications built using
this model.  If you have ideas/questions, please get in touch on the
<a href="https://github.com/mirage/irmin/issues">issue tracker</a> with your
usecase.</p>
<h3><a href="https://tarides.com/feed.xml#wodan" aria-label="wodan permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wodan</h3>
<p>Irmin’s storage layer is also well abstracted, so backends other than
a Unix filesystem or Git are supported.  Irmin can run in highly
diverse and OS-free environments, and so we began engineering the
<a href="https://github.com/mirage/wodan">Wodan filesystem</a> as a
domain-specific filesystem designed for MirageOS, Irmin and modern
flash drives.  See <a href="https://g2p.github.io/research/wodan.pdf">the OCaml Workshop 2017 abstract on
it</a> for more design
rationale.</p>
<p>As part of the Irmin 2.0 release, Wodan is also being prepared for a
release, and you can find <a href="https://github.com/mirage/wodan/tree/master/src/wodan-irmin">Irmin 2.0
support</a>
in the source.  If you’d like a standalone block-device based
persistence environment for Irmin, please try this out.  This is the
preferred backend for using Irmin storage in a unikernel.</p>
<h3><a href="https://tarides.com/feed.xml#versioned-caldav" aria-label="versioned caldav permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Versioned CalDAV</h3>
<p>An application pulling all these pieces together is being developed
by our friends at <a href="https://robur.io/About%20Us/Team">Robur</a>: an Irmin-based
<a href="https://github.com/roburio/caldav">CalDAV calendaring server</a>
that even hosts its DNS server using a versioned Irmin store.  We'll
blog more about this as the components get released and stabilised, but
the unikernel enthusiasts among you may want to browse the
<a href="https://github.com/roburio/unikernels/tree/future">Robur unikernels future branch</a>
to see how they are deploying them today.</p>
<p>A huge thank you to all our commercial customers, end users and open-source
developers who have contributed their time, expertise and
financial support to help us achieve our goal of delivering a modern
storage stack in the spirit of Git.  Our next steps for Irmin are to
continue to increase the performance and optimise the storage,
and to build more end-to-end applications using the application core
on top of MirageOS.</p><a href="#165e92a6c3e9483d841e9e34a81ff7c9" onclick="switchContent('ocamlorg-post38','ocamlorg-post37')" class="btn planet-toggle">Hide</a></div></div></section>

<a name="963357dbd386849422b286156bb5c270"></a><section style="clear: both"><h1 class="ruled planet"><span class="share"><a href="http://binaryanalysisplatform.github.io/bap-2-release" target="_blank" title="Go to the original post"><img src="../../img/chain-link-icon.png" alt=""/></a><a href="https://plus.google.com/share?url=http%3A%2F%2Fbinaryanalysisplatform.github.io%2Fbap-2-release" class="googleplus" target="_blank" title="Share on Google+"><img src="../../img/googleplus.png" alt="Google+"/></a><a href="https://www.facebook.com/share.php?u=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23963357dbd386849422b286156bb5c270&amp;t=BAP+2.0+is+released" class="facebook" target="_blank" title="Share on Facebook"><img src="../../img/facebook.png" alt="FB"/></a><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Focaml.org%2Fcommunity%2Fplanet%2F%23963357dbd386849422b286156bb5c270&text=BAP+2.0+is+released" class="twitter" target="_blank" title="Share on Twitter"><img src="../../img/twitter.png" alt="Twitter"/></a><a href="https://binaryanalysisplatform.github.io/feed.xml" class="rss" target="_blank" title="Original RSS feed"><img src="../../img/rss.svg" alt="RSS" class="svg"/><img src="../../img/rss.png" alt="RSS" class="png"/></a></span><a href="http://binaryanalysisplatform.github.io/bap-2-release" target="_blank" title="Go to the original post">BAP 2.0 is released</a><span class="additional-info"> — The BAP Blog, Nov 19, 2019</span></h1><div class="planet-post"><div id="ocamlorg-post39"><p>The Carnegie Mellon University <a href="https://github.com/BinaryAnalysisPlatform/bap">Binary Analysis Platform (CMU BAP)</a> is a suite of utilities and libraries that enables analysis of programs in their machine representation. BAP is written in OCaml, relies on dynamically loaded plugins for extensibility, and is widely used for security analysis, program verification, and reverse engineering.</p>

<p>This is a major update that includes lots of new features, libraries, and tools, as well as improvements and bug fixes to the existing code. The following sma…</p><a href="#963357dbd386849422b286156bb5c270" onclick="switchContent('ocamlorg-post39','ocamlorg-post40')" class="btn planet-toggle">Read more...</a></div><div id="ocamlorg-post40" style="display: none"><p>The Carnegie Mellon University <a href="https://github.com/BinaryAnalysisPlatform/bap">Binary Analysis Platform (CMU BAP)</a> is a suite of utilities and libraries that enables analysis of programs in their machine representation. BAP is written in OCaml, relies on dynamically loaded plugins for extensibility, and is widely used for security analysis, program verification, and reverse engineering.</p>

<p>This is a major update that includes lots of new features, libraries, and tools, as well as improvements and bug fixes to the existing code. The following small <a href="https://t.co/ylzub6LBRq?amp=1">demo</a> showcases the modern BAP look and feel.
In this announcement we would like to focus on two very important features of BAP 2.0:</p>

<ul>
  <li><a href="http://binaryanalysisplatform.github.io/bap/api/odoc/bap-knowledge/Bap_knowledge/Knowledge/index.html">knowledge representation and reasoning system</a>;</li>
  <li><a href="http://binaryanalysisplatform.github.io/bap/api/master/bap-core-theory/Bap_core_theory/index.html">the tagless final representation of program semantics</a>.</li>
</ul>

<h2>The Knowledge Base</h2>

<p>The Knowledge Representation and Reasoning System, or the Knowledge Base (KB) for short, is the central part of our new architecture. The KB is a step forward from the conventional approach to staging multiple analyses in which dependent analyses (aka passes) are ordered topologically, based on their dependencies. The KB is inspired by logic programming and enables an optimal and seamless staging of mutually dependent analyses. Mutually dependent analyses are also present in the source-based program analysis but are much more evident in the field of binary analysis and reverse engineering, where even such basic artifacts as control flow graph and call graph are not available as ground truth (and in general are not even computable).</p>

<p>Object properties in the KB are represented with directed-complete partially ordered sets.  The KB also imposes the monotonicity restriction that requires that all updates to the property are monotonic, i.e., each consequent value of the same property is a refinement of the previous value. These restrictions enable the KB to compute the least fixed point of any property,  is computed. A property representation could be optionally refined into a complete lattice, which gives the KB users extra control on how properties are computed.</p>

<p>By storing all information in an external location the KB addresses the scalability issue so relevant to binary analysis and reverse engineering. In the future, we plan to implement a distributed storage for our Knowledge Base as well as experiment with other inference engines. Soon, it should also possible to work with the knowledge base in non-OCaml programs, including our BAP Lisp dialect. That, practically, turns the knowledge base into a common runtime for binary analysis. In the current version of BAP, the Knowledge Base state is fully serializable and portable between different versions of BAP, OCaml, and even between native and bytecode runtimes. The Knowledge Base state could be imported into an application and is integrated with the BAP caching system.</p>

<h2>New Program Representation</h2>

<p>Employing the tagless final embedding together with our new Knowledge Base we were able to achieve our main goal - to switch to an extensible program representation without compromising any existing code that uses the current, non-extensible, BAP Intermediate Language (BIL). The new representation allows us to add new language features (like floating-point operations or superscalar pipeline manipulations) without breaking (or even recompiling) the existing analyses. The new representation also facilitates creation of new intermediate languages which all can coexist with each other, making it easier to write formally verified analyses.</p>

<h1>Links</h1>
<ul>
  <li><a href="https://github.com/BinaryAnalysisPlatform/bap">The Main Page</a></li>
  <li><a href="http://binaryanalysisplatform.github.io/bap/api/odoc/index.html">Documentation</a></li>
  <li><a href="https://github.com/BinaryAnalysisPlatform/bap-tutorial">The tutorial</a></li>
  <li><a href="https://gitter.im/BinaryAnalysisPlatform/bap">Our Chat</a></li>
  <li><a href="https://binaryanalysisplatform.github.io/">Our Blog</a></li>
  <li><a href="https://discuss.ocaml.org/t/ann-bap-2-0-release/4719">Discuss the news</a></li>
</ul>

<a href="#963357dbd386849422b286156bb5c270" onclick="switchContent('ocamlorg-post40','ocamlorg-post39')" class="btn planet-toggle">Hide</a></div></div></section>
</div>

<p style="clear:both; padding-top: 6ex">
View <a href="older.html">older blog posts</a>.
</p>

</section>
<section class="span4">
<div class="subscribers" style="float:right">

<h3 class="syndication">Syndications
  <a href="../../opml.xml" title="OPML"><img src="../../img/Opml-icon.svg" class="svg opml" alt="OPML"/><img src="../../img/Opml-icon.png" class="png ompl" alt="OPML"/></a>
  <a href="../../feed.xml" title="Aggregated feed"><img src="../../img/rss.svg" class="svg" alt="Atom"/><img src="../../img/rss.png" class="png" alt="Atom"/></a>
</h3>

<ul><li><a href="https://medium.com/feed/ahrefs/tagged/ocaml" title="Ocaml in ahrefs on Medium">Ahrefs</a></li><li><a href="http://amirchaudhry.com/tags/ocaml-atom.xml" title="Amir Chaudhry - 'OCaml'">Amir Chaudhry</a></li><li><a href="http://math.andrej.com/feed.xml" title="Mathematics and Computation">Andrej Bauer</a></li><li><a href="http://www.ujamjar.com/ocaml.xml" title="MicroJamJar">Andy Ray</a></li><li><a href="http://anil.recoil.org/feeds/atom.xml" class="broken" title="creating direct connection to anil.recoil.org:80">Anil Madhavapeddy</a></li><li><a href="http://ashishagarwal.org/tag/ocaml/feed/" title="Ashish Agarwal » OCaml">Ashish Agarwal</a></li><li><a href="http://cufp.org/blog/all.rss.xml" title="CUFP">CUFP</a></li><li><a href="https://www.blogger.com/feeds/7617521785419311079/posts/default" title="News from Cameleon">Cameleon news</a></li><li><a href="http://caml.inria.fr/news.en.rss" title="The Caml Language">Caml INRIA</a></li><li><a href="http://camlspotter.blogspot.com/feeds/posts/default?alt=rss" class="broken" title="Neither an Atom nor a RSS2 feed">Caml Spotting</a></li><li><a href="http://coherentpdf.com/blog/?tag=ocaml&feed=rss2" title="Ocaml – Coherent Graphics Ltd">Coherent Graphics</a></li><li><a href="http://coq.inria.fr/news/feed" class="broken" title="creating direct connection to coq.inria.fr:80">Coq</a></li><li><a href="https://www.blogger.com/feeds/9108979482982930820/posts/default/-/OCaml" title="Cranial Burnout">Cranial Burnout</a></li><li><a href="https://cryptosense.com/tag/ocaml/feed/" title="Ocaml – Cryptosense">Cryptosense</a></li><li><a href="https://erratique.ch/feeds/news.atom" title="Erratique">Daniel Bünzli</a></li><li><a href="https://erratique.ch/log/feed.atom" title="log erratique">Daniel Bünzli (log)</a></li><li><a href="http://nleyten.com:82/feed/tag/ocaml/atom" title="Nleyten - Tag - ocaml">Dario Teixeira</a></li><li><a href="https://www.blogger.com/feeds/17133288/posts/default/-/ocaml" title="Blogue à tabac">David Baelde</a></li><li><a href="http://blog.bentobako.org/index.php?feed/tag/ocaml/atom" title="David Mentré's blog - Tag - ocaml">David Mentré</a></li><li><a href="http://dutherenverseauborddelatable.wordpress.com/category/ocaml/feed/" title="OCaml – Il y a du thé renversé au bord de la table">David Teller</a></li><li><a href="https://examachine.net/blog/category/ocaml/feed/" class="broken" title="Internal Server Error">Eray Özkural</a></li><li><a href="http://www.mega-nerd.com/erikd/Blog/index.rss20" title="m3ga blog">Erik de Castro Lopo</a></li><li><a href="http://blog.emillon.org/feeds/ocaml.xml" title="Enter the void *">Etienne Millon</a></li><li><a href="http://frama-c.com/rss.xml" title="Frama-C RSS News">Frama-C</a></li><li><a href="http://functionaljobs.com/jobs/search/?q=ocaml&format=rss" title="Functional Jobs: Search 'ocaml'">Functional Jobs</a></li><li><a href="http://gallium.inria.fr/blog/index.rss" title="Gagallium">GaGallium</a></li><li><a href="http://drup.github.io/feed-ocaml.xml" title="Drup's thingies">Gabriel Radanne</a></li><li><a href="http://gaiustech.wordpress.com/category/ocaml/feed/" title="Ocaml – So I decided to take my work back underground">Gaius Hammond</a></li><li><a href="http://reynard.io/feed.xml" title="Gemma Gordon">Gemma Gordon (OCaml Labs)</a></li><li><a href="http://blog.camlcity.org/blog/rss" title="Blog on camlcity.org">Gerd Stolpmann</a></li><li><a href="https://jobs.github.com/positions.atom?description=ocaml" title="GitHub Jobs ">GitHub Jobs</a></li><li><a href="http://www.wisdomandwonder.com/tag/OCaml/feed" title="OCaml – Wisdom And Wonder">Grant Rettke</a></li><li><a href="https://hannes.nqsb.io/atom" title="full stack engineer">Hannes Mehnert</a></li><li><a href="http://hongboz.wordpress.com/feed/" title="hongboz">Hong bo Zhang</a></li><li><a href="http://ambassadortothecomputers.blogspot.com/feeds/posts/default?alt=rss" title="Ambassador to the Computers">Jake Donham</a></li><li><a href="https://blog.janestreet.com/feed.xml" title="Jane Street Tech Blog">Jane Street</a></li><li><a href="http://kcsrk.info/atom.xml" title="OCaml feed from KC Sivaramakrishnan">KC Sivaramakrishnan</a></li><li><a href="http://lpw25.net/rss.xml" title="lpw25.net">Leo White</a></li><li><a href="http://www.skjegstad.com/feeds/ocaml.tag.atom.xml" title="Magnus Skjegstad">Magnus Skjegstad</a></li><li><a href="http://newblog.0branch.com/rss.xml" title="0branch.com :: blog - All posts">Marc Simpson</a></li><li><a href="http://syntaxexclamation.wordpress.com/tag/ocaml/feed/" title="ocaml – Syntax!">Matthias Puech</a></li><li><a href="https://www.blogger.com/feeds/5888658295182480819/posts/default" title="Alaska Ataca a Kamtchatka">Matías Giovannini</a></li><li><a href="https://www.blogger.com/feeds/3693082774051755513/posts/default/-/OCaml" title="Mike's Fourth Try">Mike Lin</a></li><li><a href="http://mcclurmc.wordpress.com/feed/" title="Mike McClurg">Mike McClurg</a></li><li><a href="http://www.somerandomidiot.com/blog/categories/ocaml/atom.xml" title="Ocaml on Some Random Idiot">Mindy Preston</a></li><li><a href="https://mirage.io/blog/atom.xml" title="The MirageOS Blog">MirageOS</a></li><li><a href="http://ocaml-book.com/blog?format=rss" title="Blog - OCaml from the Very Beginning">OCaml Book</a></li><li><a href="http://ocamllabs.io/feed.xml" title="OCaml Labs">OCaml Labs</a></li><li><a href="http://ocamllabs.github.com/compiler-hacking/rss.xml" title="OCaml Labs compiler hacking">OCaml Labs compiler hacking</a></li><li><a href="https://opam.ocaml.org/blog/feed.xml" title="The OCaml Platform Blog">OCaml Platform</a></li><li><a href="http://www.ocamljava.org/feed.xml" title="OCaml-Java">OCaml-Java</a></li><li><a href="http://forge.ocamlcore.org/export/rss20_news.php" title="OCaml Forge Project News">OCamlCore Forge News</a></li><li><a href="http://forge.ocamlcore.org/export/rss20_projects.php" title="OCaml Forge Full Project Listing">OCamlCore Forge Projects</a></li><li><a href="http://www.ocamlcore.com/wp/feed/?amp%3Blanguage=en&language=en" title="OCamlCore">OCamlCore.com</a></li><li><a href="http://www.ocamlpro.com/feed/" title="OCamlPro">OCamlPro</a></li><li><a href="http://odns.tuxfamily.org/feed/" title="ODNS and ring">ODNS project</a></li><li><a href="http://ox.tuxfamily.org/feed/" title="Ocaml XMPP">Ocaml XMPP project</a></li><li><a href="https://ocsigen.github.io/feed.xml" title="Ocsigen Blog">Ocsigen blog</a></li><li><a href="https://ocsigen.github.io/feed.xml" title="Ocsigen Blog">Ocsigen project</a></li><li><a href="https://www.blogger.com/feeds/2073503406800427577/posts/default" title="The Opa Blog">Opa</a></li><li><a href="http://functional-orbitz.blogspot.com/feeds/posts/default/-/planetocaml?alt=rss" title="functional orbitz">Orbitz</a></li><li><a href="http://www.donadeo.net/facets/programming-languages/objective-caml/feed/" title="Paolo Donadeo — LifeLOG/Objective Caml">Paolo Donadeo</a></li><li><a href="http://lambdafoo.com/blog/categories/ocaml/atom.xml" title="Category: ocaml | Perpetually Curious">Perpetually Curious</a></li><li><a href="http://whitequark.org/blog//categories/ocaml/atom.xml" title="Category: ocaml | whitespace">Peter Zotov</a></li><li><a href="http://psellos.com/atom.xml" title="Psellos Blog">Psellos</a></li><li><a href="http://rwmj.wordpress.com/tag/ocaml/feed/" title="ocaml – Richard WM Jones">Richard Jones</a></li><li><a href="http://rudenoise.uk/ocaml.rss" title="Rudenoise">Rudenoise</a></li><li><a href="http://rgrinberg.com/blog/atom.xml" title="blog">Rudi Grinberg</a></li><li><a href="http://seb.mondet.org/blog/feed/ocaml.rss" title="Seb's Blog: RSS feed for tag: ocaml">Sebastien Mondet</a></li><li><a href="http://www.blogger.com/feeds/5012565255225108517/posts/default/-/OCaml" title="Shayne Fletcher">Shayne Fletcher</a></li><li><a href="http://upsilon.cc/~zack/tags/ocaml/index.rss" title="tags/ocaml">Stefano Zacchiroli</a></li><li><a href="http://le-gall.net/sylvain+violaine/blog/index.php?feed/tag/ocaml/atom" class="broken" title="Neither an Atom nor a RSS2 feed">Sylvain Le Gall</a></li><li><a href="https://tarides.com/feed.xml" title="Tarides RSS Feed">Tarides</a></li><li><a href="https://binaryanalysisplatform.github.io/feed.xml" title="The BAP Blog">The BAP Blog</a></li><li><a href="https://roscidus.com/blog/blog/categories/ocaml/atom.xml" title="Category: ocaml | Thomas Leonard's blog">Thomas Leonard</a></li><li><a href="https://www.blogger.com/feeds/6115529230232389198/posts/default" title="PL diaries">Till Varoquaux</a></li><li><a href="http://typeocaml.com/rss/" title="Many things about OCaml">Xinuo Chen</a></li><li><a href="http://www.blogger.com/feeds/954580896613987338/posts/default/-/ocaml" title="Abrahadabra">Yan Shvartzshnaider</a></li></ul>

</div>
</section>
</div>
</div>

      </div>
    </div>
  </div>
</div>

    
    <footer id="footer" class="navbar navbar-inverse">
      <div class="navbar-inner">
	
<div class="column">
  <div class="entry">
    <h1><a href="../../learn/">Learn</a></h1>
    <ul>
      <li><a href="../../learn/taste.html">Code Examples</a></li>
      <li><a href="../../learn/tutorials/">Tutorials</a></li>
      <li><a href="../../learn/books.html">Books</a></li>
      <li><a href="../../learn/success.html">Success Stories</a></li>
      <li><a href="."></a></li>
    </ul>
  </div>
</div>
<div class="column">
  <div class="entry">
    <h1><a href="../../docs/">Documentation</a></h1>
    <ul>
      <li><a href="../../docs/install.html">Install</a></li>
      <li><a href="http://caml.inria.fr/pub/docs/manual-ocaml/">Manual</a></li>
      <li><a href="https://opam.ocaml.org/packages/">Packages</a></li>
      <li><a href="../../releases/index.html">Compiler Releases</a></li>
      <li><a href="../../docs/logos.html">Logos</a></li>
    </ul>
  </div>
</div>
<div class="column">
  <div class="entry">
    <h1><a href="../../community/">Community</a></h1>
    <ul>
      <li><a href="../../community/mailing_lists.html">Mailing Lists</a></li>
      <li><a href="../../meetings/">Meetings</a></li>
      <li><a href="../../community/planet/">News</a></li>
      <li><a href="../../community/support.html">Support</a></li>
      <li><a href="http://caml.inria.fr/mantis/my_view_page.php" target="_blank">Bug Tracker</a></li>
    </ul>
  </div>
</div>

<div class="column">
  <div class="entry">
    <h1>Website</h1>
    <ul>
      <li><a href="https://github.com/ocaml/ocaml.org/tree/master/site/community/planet/index.md" target="_blank">Edit this page</a></li>
      <li><a href="https://github.com/ocaml/ocaml.org/issues" target="_blank">Website Issues</a></li>
      <li><a href="../../about.html">About This Site</a></li>
    <li><a href="https://github.com/ocaml/ocaml.org/" target="_blank">Find Us on GitHub</a></li>
      <li><a href="../../contributors.html">Credits</a></li>
    </ul>
  </div>
</div>

      </div>
    </footer>
    
    
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js" type="text/javascript"></script>

     

  </body>
</html>
