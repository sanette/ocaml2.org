<!DOCTYPE HTML>


<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta charset="utf-8"/>
    
    <link href="4.10.0.html" rel="alternate" hreflang="en"/>

    
    <title>OCaml 4.10.0 &#8211; OCaml</title>
    <link href="../img/favicon32x32.ico?" rel="shortcut icon" type="image/x-icon"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <link href="//fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet"/>
    <link href="//fonts.googleapis.com/css?family=Domine:400,700" rel="stylesheet"/>
    <link href="//fonts.googleapis.com/css?family=Droid+Sans+Mono" rel="stylesheet" type="text/css"/>
    
    <link href="../css/bootstrap.css" rel="stylesheet" media="screen"/>
    <link href="../css/bootstrap_mod.css" rel="stylesheet" media="screen"/>
    <link href="../css/ocamlorg.css" rel="stylesheet" media="screen"/>
    
    
    <script src="../js/collapsed-menu.js" type="text/javascript"></script>
    
    
    <script>
      if (document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image', '1.1')) {
      document.documentElement.className = 'svg';
      }
    </script>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" onclick="toggleVisibilityMenu('menu-items')">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="../" class="brand"><img src="../img/colour-logo-white.svg" class="svg" alt="OCaml"/><img src="../img/colour-logo-white.png" class="png" alt="OCaml"/></a>
          <div id="menu-items" class="nav-collapse collapse">
                        <ul class="nav">
              <li><a href="../learn/">Learn</a></li>
              <li><a href="../docs/">Documentation</a></li>
              <li><a href="https://opam.ocaml.org/">Packages</a></li>
              <li><a href="../community/">Community</a></li>
              <li><a href="../community/planet/">News</a></li>
            </ul>

            
            <a href="https://github.com/ocaml/ocaml.org/tree/master/site/releases/4.10.0.md" title="Edit this page" class="edit-this-page pull-right"><span>Edit this page</span></a>
	    <script language="JavaScript">
	      // Preload the hover image
	      Image1= new Image(33,33);
	      Image1.src = '/img/edit-hover.svg';
	      Image2= new Image(33,33);
	      Image2.src = '/img/edit-hover.png';
	    </script>
            
            <form id="searchform" class="navbar-search pull-right" method="get" action="//www.google.com/search">
              <input type="hidden" name="as_sitesearch" value="ocaml.org"/>
              <input placeholder="Search" class="search-query" name="q" type="text"/>
            </form>
          </div>
        </div>
      </div>
      
    </nav>
    
    
<div class="container">
  <div class="row">
    
    
    
    
    <div id="content-primary" class="span12">
            <div id="tryocaml" class="content" style="display:none;">
        <div class="container">
          <div class="row">
            <div id="lesson-message"></div>
            <div id="languages" style="display:none;"></div>
            <div id="menu-lessons" style="display:none">
              <table class="zebra-striped">
                <tr><td id="text-x"><code></code></td> <td></td></tr>
              </table>
            </div>
            <div class="span9 ocaml">
              <div id="toplevel-container">
                <pre id="output"></pre>
                <div id="sharp">#</div>
                <div id="toplevel"></div>
              </div>
              <div id="buttons"></div>
              <div id="graphics-title"></div>
              <div id="graphics"></div>
            </div>
          </div>
        </div>
      </div>

      
<div class="running-header">
  
  <div class="row">
    <ol class="breadcrumb">
      <li><a href="../">Home</a><span class="divider"></span></li>
<li><a href="../releases/">Releases</a><span class="divider"></span></li>
<li class="active">OCaml 4.10.0</li>


    </ol>
    <ul class="translations">
      <li class="active">en</li>

    </ul>
  </div>
  
</div>

      <div id="main-contents" class="content">
        

<h1 id="OCaml-4-10-0">OCaml 4.10.0</h1><p>This page describes OCaml version <strong>4.10.0</strong>, released on
2020-02-21.  Go <a href="./">here</a> for a list of all releases.</p>
<p>This release is available as multiple
<a href="https://opam.ocaml.org/doc/Usage.html">OPAM</a> switches:</p>
<ul><li><p>4.10.0 — Official release 4.10.0</p>
</li><li><p>4.10.0+flambda — Official release 4.10.0, with flambda activated</p>
</li><li><p>4.10.0+afl — Official release 4.10.0, with afl-fuzz instrumentation</p>
</li><li><p>4.10.0+spacetime - Official 4.10.0 release with spacetime activated</p>
</li><li><p>4.10.0+default-unsafe-string — Official release 4.10.0, without
 safe strings by default</p>
</li><li><p>4.10.0+no-flat-float-array - Official release 4.10.0, with
 --disable-flat-float-array</p>
</li><li><p>4.10.0+flambda+no-flat-float-array — Official release 4.10.0, with
 flambda activated and --disable-flat-float-array</p>
</li><li><p>4.10.0+fp — Official release 4.10.0, with frame-pointers</p>
</li><li><p>4.10.0+fp+flambda — Official release 4.10.0, with frame-pointers
 and flambda activated</p>
</li><li><p>4.10.0+musl+static+flambda - Official release 4.10.0, compiled with
 musl-gcc -static and with flambda activated</p>
</li><li><p>4.10.0+32bit - Official release 4.10.0, compiled in 32-bit mode
 for 64-bit Linux and OS X hosts</p>
</li><li><p>4.10.0+bytecode-only - Official release 4.10.0, without the
 native-code compiler</p>
</li></ul>

<h2 id="What-39-s-new">What&#39;s new</h2><p>Some of the highlights in release 4.10 are:</p>
<ul><li>A new best-fit allocator for the major heap which reducing both GC cost an
 memory usage.</li><li>Immutable strings are now enforced at configuration time</li><li>User-defined indexing operators for multidimensional arrays</li><li>Coming soon: statmemprof, a new statistical memory profiler. The external API
 will be release next version.</li><li>Miscellaneous improvements to the manual</li><li>A more precise exhaustiveness check for GADTs</li><li>Many bug fixes</li></ul>

<p>For a comprehensive list of changes and details on all new features,
bug fixes, optimizations, etc., please consult the
<a href="#Changes">changelog</a>.</p>
<h2 id="Source-distribution"><img src="../img/source.gif" alt=""/> Source distribution</h2>

<ul><li><a href="https://github.com/ocaml/ocaml/archive/4.10.0.tar.gz">Source
 tarball</a>
 (.tar.gz) for compilation under Unix (including Linux and MacOS X)
 and Microsoft Windows (including Cygwin).</li><li>Also available in
 <a href="https://github.com/ocaml/ocaml/archive/4.10.0.zip">.zip</a>
 format.</li><li><a href="https://opam.ocaml.org/">OPAM</a> is a source-based distribution of
 OCaml and many companion libraries and tools. Compilation and
 installation are automated by powerful package managers.</li><li>The official development repo is hosted on
 <a href="https://github.com/ocaml/ocaml">GitHub</a>.</li></ul>

<p>The
<a href="4.10/notes/INSTALL.adoc">INSTALL</a> file
of the distribution provides detailed compilation and installation
instructions — see also the <a href="4.10/notes/README.win32.adoc">Windows release
notes</a> for
instructions on how to build under Windows.</p>
<h2 id="Alternative-Compilers">Alternative Compilers</h2>

<p>Additionally, the following projects allow you to compile OCaml code to
targets traditionally associated with other languages:</p>
<ul><li><a href="http://ocsigen.org/js_of_ocaml/">Js_of_ocaml</a> is a stable OCaml
 to JavaScript compiler.</li><li><a href="http://bucklescript.github.io/bucklescript/">Bucklescript</a> is a
 newer OCaml to JavaScript compiler. See its
 <a href="https://github.com/bucklescript/bucklescript/wiki/Differences-from-js_of_ocaml">wiki</a> for
 an explanation of how it differs from <code>js_of_ocaml</code>.</li><li><a href="http://www.ocamljava.org/">OCaml-java</a> is a stable OCaml to
 Java compiler.</li></ul>

<h2 id="User-39-s-manual"><img src="../img/doc.gif" alt=""/> User&#39;s manual</h2>

<p>The user&#39;s manual for OCaml can be:</p>
<ul><li><a href="4.10/htmlman/index.html">browsed
 online</a>,</li><li>downloaded as a single
 <a href="4.10/ocaml-4.10-refman.pdf">PDF</a>,
 or <a href="4.10/ocaml-4.10-refman.txt">plain
 text</a>
 document,</li><li>downloaded as a single
 <a href="4.10/ocaml-4.10-refman-html.tar.gz">TAR</a>
 or
 <a href="4.10/ocaml-4.10-refman-html.zip">ZIP</a>
 archive of HTML files,</li><li>downloaded as a single
 <a href="4.10/ocaml-4.10-refman.info.tar.gz">tarball</a>
 of Emacs info files,</li></ul>

<h2 id="Changes">Changes</h2>

<p>This is the
<a href="4.10/notes/Changes">changelog</a>.</p>
<p>(Changes that can break existing programs are marked with a &quot;*&quot;)</p>
<h3 id="Language-features">Language features</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/7757">#7757</a>, <a href="https://github.com/ocaml/ocaml/issues/1726">#1726</a>: multi-indices for extended indexing operators:
 <code>a.%{0;1;2}</code> desugars to <code>( .%{ ;.. } ) a [|0;1;2|]</code>
 (Florian Angeletti, review by Gabriel Radanne)</p>
</li><li><p>[*breaking change*] [#1859](https://github.com/ocaml/ocaml/issues/1859), <a href="https://github.com/ocaml/ocaml/issues/9117">#9117</a>: enforce safe (immutable) strings by removing
 the -unsafe-string option by default. This can be overridden by
 a configure-time option (available since 4.04 in 2016):
 --disable-force-safe-string since 4.08, -no-force-safe-since
 between 4.07 and 4.04.
 In the force-safe-string mode (now the default), the return type of the
 String_val macro in C stubs is <code>const char*</code> instead of
 <code>char*</code>. This change may break C FFI code.
 (Kate Deplaix)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/6662">#6662</a>, <a href="https://github.com/ocaml/ocaml/issues/8908">#8908</a>: allow writing &quot;module _ = E&quot; to ignore module expressions
 (Thomas Refis, review by Gabriel Radanne)</p>
</li></ul>

<h3 id="Runtime-system">Runtime system:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/8809">#8809</a>, <a href="https://github.com/ocaml/ocaml/issues/9292">#9292</a>: Add a best-fit allocator for the major heap; still
 experimental, it should be much better than current allocation
 policies (first-fit and next-fit) for programs with large heaps,
 reducing both GC cost and memory usage.
 This new best-fit is not (yet) the default; set it explicitly with
 OCAMLRUNPARAM=&quot;a=2&quot; (or Gc.set from the program). You may also want
 to increase the <code>space_overhead</code> parameter of the GC (a percentage,
 80 by default), for example OCAMLRUNPARAM=&quot;o=85&quot;, for optimal
 speed.
 (Damien Doligez, review by Stephen Dolan, Jacques-Henri Jourdan,
 Xavier Leroy, Leo White)</p>
</li><li><p>[*breaking change*] [#8713](https://github.com/ocaml/ocaml/issues/8713), <a href="https://github.com/ocaml/ocaml/issues/8940">#8940</a>, <a href="https://github.com/ocaml/ocaml/issues/9115">#9115</a>, <a href="https://github.com/ocaml/ocaml/issues/9143">#9143</a>, <a href="https://github.com/ocaml/ocaml/issues/9202">#9202</a>, <a href="https://github.com/ocaml/ocaml/issues/9251">#9251</a>:
 Introduce a state table in the runtime to contain the global variables.
 (The Multicore runtime will have one such state for each domain.)</p>
</li></ul>

<p> This changes the status of some internal variables of the OCaml runtime;
 in many cases the header file originally defining the internal variable
 provides a compatibility macro with the old name, but programs
 re-defining those variables by hand need to be fixed.</p>
<p> (KC Sivaramakrishnan and Stephen Dolan,</p>
<pre><code>compatibility hacking by David Allsopp, Florian Angeletti, Kate Deplaix,
Jacques Garrigue, Guillaume Munch-Maccagnoni and Nicolás Ojeda Bär,
review by David Allsopp, Alain Frisch, Nicolas Ojeda Bar,
Gabriel Scherer, Damien Doligez, and Guillaume Munch-Maccagnoni)</code></pre><ul><li><p><a href="https://github.com/ocaml/ocaml/issues/8993">#8993</a>: New C functions caml_process_pending_actions{,_exn} in
 caml/signals.h, intended for executing all pending actions inside
 long-running C functions (requested minor and major collections,
 signal handlers, finalisers, and memprof callbacks). The function
 caml_process_pending_actions_exn returns any exception arising
 during their execution, allowing resources to be cleaned-up before
 re-raising.
 (Guillaume Munch-Maccagnoni, review by Jacques-Henri Jourdan,
 Stephen Dolan, and Gabriel Scherer)</p>
</li><li><p>[*breaking change*] [#8691](https://github.com/ocaml/ocaml/issues/8691), <a href="https://github.com/ocaml/ocaml/issues/8897">#8897</a>, <a href="https://github.com/ocaml/ocaml/issues/9027">#9027</a>: Allocation functions are now guaranteed not to
 trigger any OCaml callback when called from C. In long-running C
 functions, this can be replaced with calls to
 caml_process_pending_actions at safe points.
 Side effect of this change: in bytecode mode, polling for
 asynchronous callbacks is performed at every minor heap allocation,
 in addition to function calls and loops as in previous OCaml
 releases.
 (Jacques-Henri Jourdan, review by Stephen Dolan, Gabriel Scherer and
 Guillaume Munch-Maccagnoni)</p>
</li><li><p>[*breaking change*] [#9037](https://github.com/ocaml/ocaml/issues/9037): caml_check_urgent_gc is now guaranteed not to trigger any
 finaliser. In long-running C functions, this can be replaced
 with calls to caml_process_pending_actions at safe points.
 (Guillaume Munch-Maccagnoni, review by Jacques-Henri Jourdan and
 Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8619">#8619</a>: Ensure Gc.minor_words remains accurate after a GC.
 (Stephen Dolan, Xavier Leroy and David Allsopp,
 review by Xavier Leroy and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8667">#8667</a>: Limit GC credit to 1.0
 (Leo White, review by Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8670">#8670</a>: Fix stack overflow detection with systhreads
 (Stephen Dolan, review by Xavier Leroy, Anil Madhavapeddy, Gabriel Scherer,
 Frédéric Bour and Guillaume Munch-Maccagnoni)</p>
</li><li><p>[*breaking change*] [#8711](https://github.com/ocaml/ocaml/issues/8711): The major GC hooks are no longer allowed to interact with the
 OCaml heap.
 (Jacques-Henri Jourdan, review by Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8630">#8630</a>: Use abort() instead of exit(2) in caml_fatal_error, and add
 the new hook caml_fatal_error_hook.
 (Jacques-Henri Jourdan, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8641">#8641</a>: Better call stacks when a C call is involved in byte code mode
 (Jacques-Henri Jourdan, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8634">#8634</a>, <a href="https://github.com/ocaml/ocaml/issues/8668">#8668</a>, <a href="https://github.com/ocaml/ocaml/issues/8684">#8684</a>, <a href="https://github.com/ocaml/ocaml/issues/9103">#9103</a> (originally <a href="https://github.com/ocaml/ocaml/issues/847">#847</a>): Statistical memory profiling.
 In OCaml 4.10, support for allocations in the minor heap in native
 mode is not available, and callbacks for promotions and
 deallocations are not available.
 Hence, there is not any public API for this feature yet.
 (Jacques-Henri Jourdan, review by Stephen Dolan, Gabriel Scherer
 and Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9268">#9268</a>, <a href="https://github.com/ocaml/ocaml/issues/9271">#9271</a>: Fix bytecode backtrace generation with large integers present.
 (Stephen Dolan and Mark Shinwell, review by Gabriel Scherer and
 Jacques-Henri Jourdan)</p>
</li></ul>

<h3 id="Standard-library">Standard library:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/8760">#8760</a>: List.concat_map : (&#39;a -&gt; &#39;b list) -&gt; &#39;a list -&gt; &#39;b list
 (Gabriel Scherer, review by Daniel Bünzli and Thomas Refis)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8832">#8832</a>: List.find_map : (&#39;a -&gt; &#39;b option) -&gt; &#39;a list -&gt; &#39;b option
 (Gabriel Scherer, review by Jeremy Yallop, Nicolás Ojeda Bär
 and Daniel Bünzli)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/7672">#7672</a>, <a href="https://github.com/ocaml/ocaml/issues/1492">#1492</a>: Add <code>Filename.quote_command</code> to produce properly-quoted
 commands for execution by Sys.command.
 (Xavier Leroy, review by David Allsopp and Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8971">#8971</a>: Add <code>Filename.null</code>, the conventional name of the &quot;null&quot; device.
 (Nicolás Ojeda Bär, review by Xavier Leroy and Alain Frisch)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8651">#8651</a>: add &#39;%#F&#39; modifier in printf to output OCaml float constants
 in hexadecimal
 (Pierre Roux, review by Gabriel Scherer and Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8657">#8657</a>: Optimization in [Array.make] when initializing with unboxed
 or young values.
 (Jacques-Henri Jourdan, review by Gabriel Scherer and Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8716">#8716</a>: Optimize [Array.fill] and [Hashtbl.clear] with a new runtime primitive
 (Alain Frisch, review by David Allsopp, Stephen Dolan and Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8530">#8530</a>: List.sort: avoid duplicate work by chop
 (Guillaume Munch-Maccagnoni, review by David Allsopp, Damien Doligez and
 Gabriel Scherer)</p>
</li></ul>

<h3 id="Other-libraries">Other libraries:</h3>

<ul><li><a href="https://github.com/ocaml/ocaml/issues/1939">#1939</a>, <a href="https://github.com/ocaml/ocaml/issues/2023">#2023</a>: Implement Unix.truncate and Unix.ftruncate on Windows.
 (Florent Monnier and Nicolás Ojeda Bär, review by David Allsopp)</li></ul>

<h3 id="Code-generation-and-optimizations">Code generation and optimizations:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/8806">#8806</a>: Add an [@@immediate64] attribute for types that are known to
 be immediate only on 64 bit platforms
 (Jérémie Dimino, review by Vladimir Keleshev)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9028">#9028</a>, <a href="https://github.com/ocaml/ocaml/issues/9032">#9032</a>: Fix miscompilation by no longer assuming that
 untag_int (tag_int x) = x in Cmmgen; the compilation of <code>(n lsl 1) + 1</code>,
 for example, would be incorrect if evaluated with a large value for <code>n</code>.
 (Stephen Dolan, review by Vincent Laviron and Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8672">#8672</a>: Optimise Switch code generation on booleans.
 (Stephen Dolan, review by Pierre Chambart)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8990">#8990</a>: amd64: Emit 32bit registers for Iconst_int when we can
 (Xavier Clerc, Tom Kelly and Mark Shinwell, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/2322">#2322</a>: Add pseudo-instruction <code>Ladjust_trap_depth</code> to replace
 dummy Lpushtrap generated in linearize
 (Greta Yorsh and Vincent Laviron, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8707">#8707</a>: Simplif: more regular treatment of Tupled and Curried functions
 (Gabriel Scherer, review by Leo White and Alain Frisch)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8526">#8526</a>: Add compile-time option -function-sections in ocamlopt to emit
 each function in a separate named text section on supported targets.
 (Greta Yorsh, review by Pierre Chambart)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/2321">#2321</a>: Eliminate dead ICatch handlers
 (Greta Yorsh, review by Pierre Chambart and Vincent Laviron)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8919">#8919</a>: lift mutable lets along with immutable ones
 (Leo White, review by Pierre Chambart)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8909">#8909</a>: Graph coloring register allocator: the weights put on
 preference edges should not be divided by 2 in branches of
 conditional constructs, because it is not good for performance
 and because it leads to ignoring preference edges with 0 weight.
 (Eric Stavarache, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9006">#9006</a>: int32 code generation improvements
 (Stephen Dolan, designed with Greta Yorsh, review by Xavier Clerc,
 Xavier Leroy and Alain Frisch)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9041">#9041</a>: amd64: Avoid stall in sqrtsd by clearing destination.
 (Stephen Dolan, with thanks to Andrew Hunter, Will Hasenplaugh,
 Spiros Eliopoulos and Brian Nigito. Review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/2165">#2165</a>: better unboxing heuristics for let-bound identifiers
 (Alain Frisch, review by Vincent Laviron and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8735">#8735</a>: unbox across static handlers
 (Alain Frisch, review by Vincent Laviron and Gabriel Scherer)</p>
</li></ul>

<h3 id="Manual-and-documentation">Manual and documentation:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/8718">#8718</a>, <a href="https://github.com/ocaml/ocaml/issues/9089">#9089</a>: syntactic highlighting for code examples in the manual
 (Florian Angeletti, report by Anton Kochkov, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9101">#9101</a>: add links to section anchor before the section title,
 make the name of those anchor explicits.
 (Florian Angeletti, review by Daniel Bünzli, Sébastien Hinderer,
 and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9257">#9257</a>, cautionary guidelines for using the internal runtime API
 without too much updating pain.
 (Florian Angeletti, review by Daniel Bünzli, Guillaume Munch-Maccagnoni
 and KC Sivaramakrishnan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8950">#8950</a>: move local opens in pattern out of the extension chapter
 (Florian Angeletti, review and suggestion by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9088">#9088</a>, <a href="https://github.com/ocaml/ocaml/issues/9097">#9097</a>: fix operator character classes
 (Florian Angelettion, review by Gabriel Scherer,
 report by Clément Busschaert)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9169">#9169</a>: better documentation for the best-fit allocation policy
 (Gabriel Scherer, review by Guillaume Munch-Maccagnoni
 and Florian Angeletti)</p>
</li></ul>

<h3 id="Compiler-user-interface-and-warnings">Compiler user-interface and warnings:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/8833">#8833</a>: Hint for (type) redefinitions in toplevel session
 (Florian Angeletti, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/2127">#2127</a>, <a href="https://github.com/ocaml/ocaml/issues/9185">#9185</a>: Refactor lookup functions
 Included observable changes:</p>
<ul><li><p>makes the location of usage warnings and alerts for constructors more
precise</p>
</li><li><p>don&#39;t warn about a constructor never being used to build values when it
has been defined as private
(Leo White, Hugo Heuzard review by Thomas Refis, Florian Angeletti)</p>
</li></ul></li><li><p><a href="https://github.com/ocaml/ocaml/issues/8702">#8702</a>, <a href="https://github.com/ocaml/ocaml/issues/8777">#8777</a>: improved error messages for fixed row polymorphic variants
 (Florian Angeletti, report by Leo White, review by Thomas Refis)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8844">#8844</a>: Printing faulty constructors, inline records fields and their types
 during type mismatches. Also slightly changed other type mismatches error
 output.
 (Mekhrubon Turaev, review by Florian Angeletti, Leo White)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8885">#8885</a>: Warn about unused local modules
 (Thomas Refis, review by Alain Frisch)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8872">#8872</a>: Add ocamlc option &quot;-output-complete-exe&quot; to build a self-contained
 binary for bytecode programs, containing the runtime and C stubs.
 (Stéphane Glondu, Nicolás Ojeda Bär, review by Jérémie Dimino and Daniel
 Bünzli)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8874">#8874</a>: add tests for typechecking error messages and pack them into
 pretty-printing boxes.
 (Oxana Kostikova, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8891">#8891</a>: Warn about unused functor parameters
 (Thomas Refis, review by Gabriel Radanne)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8903">#8903</a>: Improve errors for first-class modules
 (Leo White, review by Jacques Garrigue)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8914">#8914</a>: clarify the warning on unboxable types used in external primitives (61)
 (Gabriel Scherer, review by Florian Angeletti, report on the Discourse forum)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9046">#9046</a>: disable warning 30 by default
 This outdated warning complained on label/constructor name conflicts
 within a mutually-recursive type declarations; there is now no need
 to complain thanks to type-based disambiguation.
 (Gabriel Scherer)</p>
</li></ul>

<h3 id="Tools">Tools:</h3>

<ul><li><p>[*breaking change*] [#6792](https://github.com/ocaml/ocaml/issues/6792), <a href="https://github.com/ocaml/ocaml/issues/8654">#8654</a> ocamldebug now supports programs using Dynlink. This
 changes ocamldebug messages, which may break compatibility
 with older emacs modes.
 (Whitequark and Jacques-Henri Jourdan, review by Gabriel Scherer
 and Xavier Clerc)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8621">#8621</a>: Make ocamlyacc a Windows Unicode application
 (David Allsopp, review by Nicolás Ojeda Bär)</p>
</li><li><p>[*breaking change*] [#8834](https://github.com/ocaml/ocaml/issues/8834), <code>ocaml</code>: adhere to the XDG base directory specification to
 locate an <code>.ocamlinit</code> file. Reads an <code>$XDG_CONFIG_HOME/ocaml/init.ml</code>
 file before trying to lookup <code>~/.ocamlinit</code>. On Windows the behaviour
 is unchanged.
 (Daniel C. Bünzli, review by David Allsopp, Armaël Guéneau and
 Nicolás Ojeda Bär)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9113">#9113</a>: ocamldoc: fix the rendering of multi-line code blocks
 in the &#39;man&#39; backend.
 (Gabriel Scherer, review by Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9127">#9127</a>, <a href="https://github.com/ocaml/ocaml/issues/9130">#9130</a>: ocamldoc: fix the formatting of closing brace in record types.
 (David Allsopp, report by San Vu Ngoc)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9181">#9181</a>: make objinfo work on Cygwin and look for the caml_plugin_header
 symbol in both the static and the dynamic symbol tables.
 (Sébastien Hinderer, review by Gabriel Scherer and David Allsopp)</p>
</li></ul>

<h3 id="Build-system">Build system:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/8840">#8840</a>: use ocaml{c,opt}.opt when available to build internal tools
 On my machine this reduces parallel-build times from 3m30s to 2m50s.
 (Gabriel Scherer, review by Xavier Leroy and Sébastien Hinderer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8650">#8650</a>: ensure that &quot;make&quot; variables are defined before use;
 revise generation of config/util.ml to better quote special characters
 (Xavier Leroy, review by David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8690">#8690</a>, <a href="https://github.com/ocaml/ocaml/issues/8696">#8696</a>: avoid rebuilding the world when files containing primitives
 change.
 (Stephen Dolan, review by Gabriel Scherer, Sébastien Hinderer and
 Thomas Refis)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8835">#8835</a>: new configure option --disable-stdlib-manpages to disable building
 and installation of the library manpages.
 (David Allsopp, review by Florian Angeletti and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8837">#8837</a>: build manpages using ocamldoc.opt when available
 cuts the manpages build time from 14s to 4s
 (Gabriel Scherer, review by David Allsopp and Sébastien Hinderer,
 report by David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8843">#8843</a>, <a href="https://github.com/ocaml/ocaml/issues/8841">#8841</a>: fix use of off_t on 32-bit systems.
 (Stephen Dolan, report by Richard Jones, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8947">#8947</a>, <a href="https://github.com/ocaml/ocaml/issues/9134">#9134</a>, <a href="https://github.com/ocaml/ocaml/issues/9302">#9302</a>, <a href="https://github.com/ocaml/ocaml/issues/9311">#9311</a>: fix/improve support for the BFD library
 (Sébastien Hinderer, review by Damien Doligez and David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8951">#8951</a>: let make&#39;s default target build the compiler
 (Sébastien Hinderer, review by David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8995">#8995</a>: allow developers to specify frequently-used configure options in
 Git (ocaml.configure option) and a directory for host-specific, shareable
 config.cache files (ocaml.configure-cache option). See HACKING.adoc for
 further details.
 (David Allsopp, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9136">#9136</a>: Don&#39;t propagate Cygwin-style prefix from configure to
 Makefile.config on Windows ports.
 (David Allsopp, review by Sébastien Hinderer)</p>
</li></ul>

<h3 id="Internal-compiler-libs-changes">Internal/compiler-libs changes:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/8828">#8828</a>: Added abstractions for variants, records, constructors, fields and
 extension constructor types mismatch.
 (Mekhrubon Turaev, review by Florian Angeletti, Leo White and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/7927">#7927</a>, <a href="https://github.com/ocaml/ocaml/issues/8527">#8527</a>: Replace long tuples into records in typeclass.ml
 (Ulugbek Abdullaev, review by David Allsopp and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/1963">#1963</a>: split cmmgen into generic Cmm helpers and clambda transformations
 (Vincent Laviron, review by Mark Shinwell)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/1901">#1901</a>: Fix lexing of character literals in comments
 (Pieter Goetschalckx, review by Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/1932">#1932</a>: Allow octal escape sequences and identifiers containing apostrophes
 in ocamlyacc actions and comments.
 (Pieter Goetschalckx, review by Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/2288">#2288</a>: Move middle end code from [Asmgen] to [Clambda_middle_end] and
 [Flambda_middle_end].  Run [Un_anf] from the middle end, not [Cmmgen].
 (Mark Shinwell, review by Pierre Chambart)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8692">#8692</a>: Remove Misc.may_map and similar
 (Leo White, review by Gabriel Scherer and Thomas Refis)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8677">#8677</a>: Use unsigned comparisons in amd64 and i386 emitter of Lcondbranch3.
 (Greta Yorsh, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8766">#8766</a>: Parmatch: introduce a type for simplified pattern heads
 (Gabriel Scherer and Thomas Refis, review by Stephen Dolan and
 Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8774">#8774</a>: New implementation of Env.make_copy_of_types
 (Alain Frisch, review by Thomas Refis, Leo White and Jacques Garrigue)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/7924">#7924</a>: Use a variant instead of an int in Bad_variance exception
 (Rian Douglas, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8890">#8890</a>: in -dtimings output, show time spent in C linker clearly
 (Valentin Gatien-Baron)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8910">#8910</a>, <a href="https://github.com/ocaml/ocaml/issues/8911">#8911</a>: minor improvements to the printing of module types
 (Gabriel Scherer, review by Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8913">#8913</a>: ocamltest: improve &#39;promote&#39; implementation to take
 skipped lines/bytes into account
 (Gabriel Scherer, review by Sébastien Hinderer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8908">#8908</a>: Use an option instead of a string for module names (&quot;_&quot; becomes None),
 and a dedicated type for functor parameters: &quot;()&quot; maps to &quot;Unit&quot; (instead of
 &quot;*&quot;).
 (Thomas Refis, review by Gabriel Radanne)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8928">#8928</a>: Move contains_calls and num_stack_slots from Proc to Mach.fundecl
 (Greta Yorsh, review by Florian Angeletti and Vincent Laviron)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8959">#8959</a>, <a href="https://github.com/ocaml/ocaml/issues/8960">#8960</a>, <a href="https://github.com/ocaml/ocaml/issues/8968">#8968</a>, <a href="https://github.com/ocaml/ocaml/issues/9023">#9023</a>: minor refactorings in the typing of patterns:</p>
<ul><li><p>refactor the {let,pat}_bound_idents* functions</p>
</li><li><p>minor bugfix in type_pat</p>
</li><li><p>refactor the generic pattern-traversal functions
in Typecore and Typedtree</p>
</li><li><p>restrict the use of Need_backtrack
(Gabriel Scherer and Florian Angeletti,
review by Thomas Refis and Gabriel Scherer)</p>
</li></ul></li><li><p><a href="https://github.com/ocaml/ocaml/issues/9030">#9030</a>: clarify and document the parameter space of type_pat
 (Gabriel Scherer and Florian Angeletti and Jacques Garrigue,
 review by Florian Angeletti and Thomas Refis)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8975">#8975</a>: &quot;ocamltests&quot; files are no longer required or used by
 &quot;ocamltest&quot;. Instead, any text file in the testsuite directory containing a
 valid &quot;TEST&quot; block will be automatically included in the testsuite.
 (Nicolás Ojeda Bär, review by Gabriel Scherer and Sébastien Hinderer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8992">#8992</a>: share argument implementations between executables
 (Florian Angeletti, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9015">#9015</a>: fix fatal error in pprint_ast (<a href="https://github.com/ocaml/ocaml/issues/8789">#8789</a>)
 (Damien Doligez, review by ...)</p>
</li></ul>

<h3 id="Bug-fixes">Bug fixes:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/5673">#5673</a>, <a href="https://github.com/ocaml/ocaml/issues/7636">#7636</a>: unused type variable causes generalization error
 (Jacques Garrigue and Leo White, review by Leo White,
 reports by Jean-Louis Giavitto and Christophe Raffalli)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/6922">#6922</a>, <a href="https://github.com/ocaml/ocaml/issues/8955">#8955</a>: Fix regression with -principal type inference for inherited
 methods, allowing to compile ocamldoc with -principal
 (Jacques Garrigue, review by Leo White)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/7925">#7925</a>, <a href="https://github.com/ocaml/ocaml/issues/8611">#8611</a>: fix error highlighting for exceptionally
 long toplevel phrases
 (Kyle Miller, reported by Armaël Guéneau, review by Armaël Guéneau
 and Nicolás Ojeda Bär)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8622">#8622</a>: Don&#39;t generate #! headers over 127 characters.
 (David Allsopp, review by Xavier Leroy and Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8715">#8715</a>: minor bugfixes in CamlinternalFormat; removes the unused
 and misleading function CamlinternalFormat.string_of_formatting_gen
 (Gabriel Scherer and Florian Angeletti,
 review by Florian Angeletti and Gabriel Radanne)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8792">#8792</a>, <a href="https://github.com/ocaml/ocaml/issues/9018">#9018</a>: Possible (latent) bug in Ctype.normalize_type
 removed incrimined Btype.log_type, replaced by Btype.set_type
 (Jacques Garrigue, report by Alain Frisch, review by Thomas Refis)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8856">#8856</a>, <a href="https://github.com/ocaml/ocaml/issues/8860">#8860</a>: avoid stackoverflow when printing cyclic type expressions
 in some error submessages.
 (Florian Angeletti, report by Mekhrubon Turaev, review by Leo White)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8875">#8875</a>: fix missing newlines in the output from MSVC invocation.
 (Nicolás Ojeda Bär, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8921">#8921</a>, <a href="https://github.com/ocaml/ocaml/issues/8924">#8924</a>: Fix stack overflow with Flambda
 (Vincent Laviron, review by Pierre Chambart and Leo White,
 report by Aleksandr Kuzmenko)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8892">#8892</a>, <a href="https://github.com/ocaml/ocaml/issues/8895">#8895</a>: fix the definition of Is_young when CAML_INTERNALS is not
 defined.
 (David Allsopp, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8896">#8896</a>: deprecate addr typedef in misc.h
 (David Allsopp, suggestion by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8981">#8981</a>: Fix check for incompatible -c and -o options.
 (Greta Yorsh, review by Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9019">#9019</a>, <a href="https://github.com/ocaml/ocaml/issues/9154">#9154</a>: Unsound exhaustivity of GADTs from incomplete unification
 Also fixes bug found by Thomas Refis in <a href="https://github.com/ocaml/ocaml/issues/9012">#9012</a>
 (Jacques Garrigue, report and review by Leo White, Thomas Refis)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9031">#9031</a>: Unregister Windows stack overflow handler while shutting
 the runtime down.
 (Dmitry Bely, review by David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9051">#9051</a>: fix unregistered local root in win32unix/select.c (could result in
 <code>select</code> returning file_descr-like values which weren&#39;t in the original sets)
 and correct initialisation of some blocks allocated with caml_alloc_small.
 (David Allsopp, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9073">#9073</a>, <a href="https://github.com/ocaml/ocaml/issues/9120">#9120</a>: fix incorrect GC ratio multiplier when allocating custom blocks
 with caml_alloc_custom_mem in runtime/custom.c
 (Markus Mottl, review by Gabriel Scherer and Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9209">#9209</a>, <a href="https://github.com/ocaml/ocaml/issues/9212">#9212</a>: fix a development-version regression caused by <a href="https://github.com/ocaml/ocaml/issues/2288">#2288</a>
 (Kate Deplaix and David Allsopp, review by Sébastien Hinderer
 and Gabriel Scherer )</p>
</li></ul>

      </div>
    </div>
  </div>
</div>

    
    <footer id="footer" class="navbar navbar-inverse">
      <div class="navbar-inner">
	
<div class="column">
  <div class="entry">
    <h1><a href="../learn/">Learn</a></h1>
    <ul>
      <li><a href="../learn/taste.html">Code Examples</a></li>
      <li><a href="../learn/tutorials/">Tutorials</a></li>
      <li><a href="../learn/books.html">Books</a></li>
      <li><a href="../learn/success.html">Success Stories</a></li>
      <li><a href="."></a></li>
    </ul>
  </div>
</div>
<div class="column">
  <div class="entry">
    <h1><a href="../docs/">Documentation</a></h1>
    <ul>
      <li><a href="../docs/install.html">Install</a></li>
      <li><a href="http://caml.inria.fr/pub/docs/manual-ocaml/">Manual</a></li>
      <li><a href="https://opam.ocaml.org/packages/">Packages</a></li>
      <li><a href="../releases/index.html">Compiler Releases</a></li>
      <li><a href="../docs/logos.html">Logos</a></li>
    </ul>
  </div>
</div>
<div class="column">
  <div class="entry">
    <h1><a href="../community/">Community</a></h1>
    <ul>
      <li><a href="../community/mailing_lists.html">Mailing Lists</a></li>
      <li><a href="../meetings/">Meetings</a></li>
      <li><a href="../community/planet/">News</a></li>
      <li><a href="../community/support.html">Support</a></li>
      <li><a href="http://caml.inria.fr/mantis/my_view_page.php" target="_blank">Bug Tracker</a></li>
    </ul>
  </div>
</div>

<div class="column">
  <div class="entry">
    <h1>Website</h1>
    <ul>
      <li><a href="https://github.com/ocaml/ocaml.org/tree/master/site/releases/4.10.0.md" target="_blank">Edit this page</a></li>
      <li><a href="https://github.com/ocaml/ocaml.org/issues" target="_blank">Website Issues</a></li>
      <li><a href="../about.html">About This Site</a></li>
    <li><a href="https://github.com/ocaml/ocaml.org/" target="_blank">Find Us on GitHub</a></li>
      <li><a href="../contributors.html">Credits</a></li>
    </ul>
  </div>
</div>

      </div>
    </footer>
    
    
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js" type="text/javascript"></script>

     

  </body>
</html>
