<!DOCTYPE HTML>

<html>
<head>
<link href="style.css" rel="stylesheet" type="text/css"/>
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type"/>
<link href="index.html" rel="Start"/>
<link href="Digest.html" rel="previous"/>
<link href="Event.html" rel="next"/>
<link href="index.html" rel="Up"/>
<link href="index_types.html" title="Index of types" rel="Appendix"/>
<link href="index_exceptions.html" title="Index of exceptions" rel="Appendix"/>
<link href="index_values.html" title="Index of values" rel="Appendix"/>
<link href="index_modules.html" title="Index of modules" rel="Appendix"/>
<link href="index_module_types.html" title="Index of module types" rel="Appendix"/>
<link href="Arg.html" title="Arg" rel="Chapter"/>
<link href="Arith_status.html" title="Arith_status" rel="Chapter"/>
<link href="Array.html" title="Array" rel="Chapter"/>
<link href="ArrayLabels.html" title="ArrayLabels" rel="Chapter"/>
<link href="Big_int.html" title="Big_int" rel="Chapter"/>
<link href="Bigarray.html" title="Bigarray" rel="Chapter"/>
<link href="Buffer.html" title="Buffer" rel="Chapter"/>
<link href="Callback.html" title="Callback" rel="Chapter"/>
<link href="CamlinternalLazy.html" title="CamlinternalLazy" rel="Chapter"/>
<link href="CamlinternalMod.html" title="CamlinternalMod" rel="Chapter"/>
<link href="CamlinternalOO.html" title="CamlinternalOO" rel="Chapter"/>
<link href="Char.html" title="Char" rel="Chapter"/>
<link href="Complex.html" title="Complex" rel="Chapter"/>
<link href="Condition.html" title="Condition" rel="Chapter"/>
<link href="Digest.html" title="Digest" rel="Chapter"/>
<link href="Dynlink.html" title="Dynlink" rel="Chapter"/>
<link href="Event.html" title="Event" rel="Chapter"/>
<link href="Filename.html" title="Filename" rel="Chapter"/>
<link href="Format.html" title="Format" rel="Chapter"/>
<link href="Gc.html" title="Gc" rel="Chapter"/>
<link href="Genlex.html" title="Genlex" rel="Chapter"/>
<link href="Graphics.html" title="Graphics" rel="Chapter"/>
<link href="GraphicsX11.html" title="GraphicsX11" rel="Chapter"/>
<link href="Hashtbl.html" title="Hashtbl" rel="Chapter"/>
<link href="Int32.html" title="Int32" rel="Chapter"/>
<link href="Int64.html" title="Int64" rel="Chapter"/>
<link href="Lazy.html" title="Lazy" rel="Chapter"/>
<link href="Lexing.html" title="Lexing" rel="Chapter"/>
<link href="List.html" title="List" rel="Chapter"/>
<link href="ListLabels.html" title="ListLabels" rel="Chapter"/>
<link href="Map.html" title="Map" rel="Chapter"/>
<link href="Marshal.html" title="Marshal" rel="Chapter"/>
<link href="MoreLabels.html" title="MoreLabels" rel="Chapter"/>
<link href="Mutex.html" title="Mutex" rel="Chapter"/>
<link href="Nativeint.html" title="Nativeint" rel="Chapter"/>
<link href="Num.html" title="Num" rel="Chapter"/>
<link href="Obj.html" title="Obj" rel="Chapter"/>
<link href="Oo.html" title="Oo" rel="Chapter"/>
<link href="Parsing.html" title="Parsing" rel="Chapter"/>
<link href="Pervasives.html" title="Pervasives" rel="Chapter"/>
<link href="Printexc.html" title="Printexc" rel="Chapter"/>
<link href="Printf.html" title="Printf" rel="Chapter"/>
<link href="Queue.html" title="Queue" rel="Chapter"/>
<link href="Random.html" title="Random" rel="Chapter"/>
<link href="Ratio.html" title="Ratio" rel="Chapter"/>
<link href="Scanf.html" title="Scanf" rel="Chapter"/>
<link href="Set.html" title="Set" rel="Chapter"/>
<link href="Sort.html" title="Sort" rel="Chapter"/>
<link href="Stack.html" title="Stack" rel="Chapter"/>
<link href="StdLabels.html" title="StdLabels" rel="Chapter"/>
<link href="Str.html" title="Str" rel="Chapter"/>
<link href="Stream.html" title="Stream" rel="Chapter"/>
<link href="String.html" title="String" rel="Chapter"/>
<link href="StringLabels.html" title="StringLabels" rel="Chapter"/>
<link href="Sys.html" title="Sys" rel="Chapter"/>
<link href="Thread.html" title="Thread" rel="Chapter"/>
<link href="ThreadUnix.html" title="ThreadUnix" rel="Chapter"/>
<link href="Tk.html" title="Tk" rel="Chapter"/>
<link href="Unix.html" title="Unix" rel="Chapter"/>
<link href="UnixLabels.html" title="UnixLabels" rel="Chapter"/>
<link href="Weak.html" title="Weak" rel="Chapter"/><link href="#6_Dynamicloadingofcompiledfiles" title="Dynamic loading of compiled files" rel="Section"/>
<link href="#6_Accesscontrol" title="Access control" rel="Section"/>
<link href="#6_DeprecatedlowlevelAPIforaccesscontrol" title="Deprecated, low-level API for access control" rel="Section"/>
<link href="#6_Deprecatedinitialization" title="Deprecated, initialization" rel="Section"/>
<link href="#6_Errorreporting" title="Error reporting" rel="Section"/>
<title>Dynlink</title>
</head>
<body>
<div class="navbar"><a href="Digest.html" class="pre" title="Digest">Previous</a>
&nbsp;<a href="index.html" class="up" title="Index">Up</a>
&nbsp;<a href="Event.html" class="post" title="Event">Next</a>
</div>
<h1>Module <a href="type_Dynlink.html">Dynlink</a></h1>

<pre><span class="keyword">module</span> Dynlink: <code class="code"><span class="keyword">sig</span></code> <a href="Dynlink.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Dynamic loading of object files.<br/>
</div>
<hr width="100%"/>

<pre><span id="VALis_native"><span class="keyword">val</span> is_native</span> : <code class="type">bool</code></pre><div class="info ">
<code class="code"><span class="keyword">true</span></code> if the program is native,
    <code class="code"><span class="keyword">false</span></code> if the program is bytecode.<br/>
</div>
<br/>
<h6 id="6_Dynamicloadingofcompiledfiles">Dynamic loading of compiled files</h6><br/>

<pre><span id="VALloadfile"><span class="keyword">val</span> loadfile</span> : <code class="type">string -> unit</code></pre><div class="info ">
In bytecode: load the given bytecode object file (<code class="code">.cmo</code> file) or
    bytecode library file (<code class="code">.cma</code> file), and link it with the running
    program. In native code: load the given OCaml plugin file (usually
    <code class="code">.cmxs</code>), and link it with the running
    program.
    All toplevel expressions in the loaded compilation units
    are evaluated. No facilities are provided to
    access value names defined by the unit. Therefore, the unit
    must register itself its entry points with the main program,
    e.g. by modifying tables of functions.<br/>
</div>

<pre><span id="VALloadfile_private"><span class="keyword">val</span> loadfile_private</span> : <code class="type">string -> unit</code></pre><div class="info ">
Same as <code class="code">loadfile</code>, except that the compilation units just loaded
    are hidden (cannot be referenced) from other modules dynamically
    loaded afterwards.<br/>
</div>

<pre><span id="VALadapt_filename"><span class="keyword">val</span> adapt_filename</span> : <code class="type">string -> string</code></pre><div class="info ">
In bytecode, the identity function. In native code, replace the last
    extension with <code class="code">.cmxs</code>.<br/>
</div>
<br/>
<h6 id="6_Accesscontrol">Access control</h6><br/>

<pre><span id="VALallow_only"><span class="keyword">val</span> allow_only</span> : <code class="type">string list -> unit</code></pre><div class="info ">
<code class="code">allow_only units</code> restricts the compilation units that dynamically-linked
    units can reference: it only allows references to the units named in
    list <code class="code">units</code>.  References to any other compilation unit will cause
    a <code class="code"><span class="constructor">Unavailable_unit</span></code> error during <code class="code">loadfile</code> or <code class="code">loadfile_private</code>.
<p>

    Initially (just after calling <code class="code">init</code>), all compilation units composing
    the program currently running are available for reference from
    dynamically-linked units.  <code class="code">allow_only</code> can be used to grant access
    to some of them only, e.g. to the units that compose the API for
    dynamically-linked code, and prevent access to all other units,
    e.g. private, internal modules of the running program.<br/>
</p></div>

<pre><span id="VALprohibit"><span class="keyword">val</span> prohibit</span> : <code class="type">string list -> unit</code></pre><div class="info ">
<code class="code">prohibit units</code> prohibits dynamically-linked units from referencing
    the units named in list <code class="code">units</code>.  This can be used to prevent
    access to selected units, e.g. private, internal modules of
    the running program.<br/>
</div>

<pre><span id="VALdefault_available_units"><span class="keyword">val</span> default_available_units</span> : <code class="type">unit -> unit</code></pre><div class="info ">
Reset the set of units that can be referenced from dynamically-linked
    code to its default value, that is, all units composing the currently
    running program.<br/>
</div>

<pre><span id="VALallow_unsafe_modules"><span class="keyword">val</span> allow_unsafe_modules</span> : <code class="type">bool -> unit</code></pre><div class="info ">
Govern whether unsafe object files are allowed to be
    dynamically linked. A compilation unit is 'unsafe' if it contains
    declarations of external functions, which can break type safety.
    By default, dynamic linking of unsafe object files is
    not allowed. In native code, this function does nothing; object files
    with external functions are always allowed to be dynamically linked.<br/>
</div>
<br/>
<h6 id="6_DeprecatedlowlevelAPIforaccesscontrol">Deprecated, low-level API for access control</h6><br/>

<pre><span id="VALadd_interfaces"><span class="keyword">val</span> add_interfaces</span> : <code class="type">string list -> string list -> unit</code></pre><div class="info ">
<code class="code">add_interfaces units path</code> grants dynamically-linked object
    files access to the compilation  units named in list <code class="code">units</code>.
    The interfaces (<code class="code">.cmi</code> files) for these units are searched in
    <code class="code">path</code> (a list of directory names).<br/>
</div>

<pre><span id="VALadd_available_units"><span class="keyword">val</span> add_available_units</span> : <code class="type">(string * <a href="Digest.html#TYPEt">Digest.t</a>) list -> unit</code></pre><div class="info ">
Same as <a href="Dynlink.html#VALadd_interfaces"><code class="code"><span class="constructor">Dynlink</span>.add_interfaces</code></a>, but instead of searching <code class="code">.cmi</code> files
    to find the unit interfaces, uses the interface digests given
    for each unit. This way, the <code class="code">.cmi</code> interface files need not be
    available at run-time. The digests can be extracted from <code class="code">.cmi</code>
    files using the <code class="code">extract_crc</code> program installed in the
    OCaml standard library directory.<br/>
</div>

<pre><span id="VALclear_available_units"><span class="keyword">val</span> clear_available_units</span> : <code class="type">unit -> unit</code></pre><div class="info ">
Empty the list of compilation units accessible to dynamically-linked
    programs.<br/>
</div>
<br/>
<h6 id="6_Deprecatedinitialization">Deprecated, initialization</h6><br/>

<pre><span id="VALinit"><span class="keyword">val</span> init</span> : <code class="type">unit -> unit</code></pre><div class="info ">
<span class="warning">Deprecated.</span>Initialize the <code class="code"><span class="constructor">Dynlink</span></code> library. This function is called
    automatically when needed.<br/>
</div>
<br/>
<h6 id="6_Errorreporting">Error reporting</h6><br/>

<pre><code><span id="TYPElinking_error"><span class="keyword">type</span> <code class="type"></code>linking_error</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTlinking_error.Undefined_global"><span class="constructor">Undefined_global</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTlinking_error.Unavailable_primitive"><span class="constructor">Unavailable_primitive</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTlinking_error.Uninitialized_global"><span class="constructor">Uninitialized_global</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr></table>



<pre><code><span id="TYPEerror"><span class="keyword">type</span> <code class="type"></code>error</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTerror.Not_a_bytecode_file"><span class="constructor">Not_a_bytecode_file</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTerror.Inconsistent_import"><span class="constructor">Inconsistent_import</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTerror.Unavailable_unit"><span class="constructor">Unavailable_unit</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTerror.Unsafe_file"><span class="constructor">Unsafe_file</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTerror.Linking_error"><span class="constructor">Linking_error</span></span> <span class="keyword">of</span> <code class="type">string * <a href="Dynlink.html#TYPElinking_error">linking_error</a></code></code></td>

</tr>
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTerror.Corrupted_interface"><span class="constructor">Corrupted_interface</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTerror.File_not_found"><span class="constructor">File_not_found</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTerror.Cannot_open_dll"><span class="constructor">Cannot_open_dll</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top">
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top">
<code><span id="TYPEELTerror.Inconsistent_implementation"><span class="constructor">Inconsistent_implementation</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr></table>



<pre><span id="EXCEPTIONError"><span class="keyword">exception</span> Error</span> <span class="keyword">of</span> <code class="type"><a href="Dynlink.html#TYPEerror">error</a></code></pre>
<div class="info ">
Errors in dynamic linking are reported by raising the <code class="code"><span class="constructor">Error</span></code>
    exception with a description of the error.<br/>
</div>

<pre><span id="VALerror_message"><span class="keyword">val</span> error_message</span> : <code class="type"><a href="Dynlink.html#TYPEerror">error</a> -> string</code></pre><div class="info ">
Convert an error description to a printable message.<br/>
</div>
</body></html>